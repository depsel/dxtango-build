import{a as Y}from"/build/_shared/chunk-36YI2FTW.js";import{a as U}from"/build/_shared/chunk-J76CSQVK.js";import"/build/_shared/chunk-DLLPPQ62.js";import{a as B}from"/build/_shared/chunk-SHMG4Y5B.js";import{a as V}from"/build/_shared/chunk-L76L4QWD.js";import{e as G,f as M,h as L,j as q}from"/build/_shared/chunk-PLUCZ5ZI.js";import"/build/_shared/chunk-CMAVFNQJ.js";import"/build/_shared/chunk-KCUI5YJN.js";import{b as N}from"/build/_shared/chunk-QZCETK4F.js";import{a as x,b as D}from"/build/_shared/chunk-V6MG2CRX.js";import{a as C}from"/build/_shared/chunk-K2WBBUBW.js";import{a as F}from"/build/_shared/chunk-CD5IF7GC.js";import{i as v,j as E,k as O}from"/build/_shared/chunk-6CXKIKKN.js";import{a as h,b,c as y}from"/build/_shared/chunk-EF4J777R.js";import{D as T,Ia as R,W as A,ba as p,rb as _,v as g,xb as d,y as l,zb as P}from"/build/_shared/chunk-JQLUC77E.js";import{d as I}from"/build/_shared/chunk-MJPS7W4Y.js";import{a as no,b as n}from"/build/_shared/chunk-IS2TAHEU.js";import{e as r,h as o}from"/build/_shared/chunk-P3O6KQPX.js";o();o();o();o();var z=r(no(),1);o();var w=l("/dictionary"),H=l("/dictionary/active_company");o();var k=async(m,c)=>await g({url:H,params:m,method:"POST",silent:!0},c);o();var K=q({company:L().required("Seleccione una empresa activa")}).required();var t=r(n(),1),J=()=>{let m=F(),c=R(),{state:a,result:u}=N({url:w,fieldsMap:{label:"name",value:"db_name",isActive:"is_active"}}),{handleSubmit:Z,control:$,reset:j,setError:oo,formState:{errors:to,isSubmitting:ro,isSubmitSuccessful:eo}}=G({defaultValues:{company:""},resolver:M(K)}),S=eo||ro;return(0,z.useEffect)(()=>{if(a instanceof y){let s=u.findIndex(f=>f.isActive===!0);s>=0&&j({company:u[s].value})}},[a]),(0,t.jsx)("form",{noValidate:!0,onSubmit:Z(async s=>{let f={company:s.company},mo=await k(f,m);await D({toast:c,result:mo,messages:{success:{title:E},error:{title:A},loading:{title:O}}}).then(()=>{m.navigate(p)}).catch(ao=>{oo("root",{message:ao})})}),children:(0,t.jsxs)(P,{children:[(0,t.jsx)(V,{errors:to}),(0,t.jsx)(C,{children:(0,t.jsxs)(_,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[(0,t.jsxs)(d,{children:[(0,t.jsx)(U,{fieldProps:{name:"company",placeholder:"Seleccione una empresa",options:u,noOptionsMessage(s){return"No hay empresas disponibles"},selectedOptionStyle:"check",isLoading:a instanceof h},formControlProps:{isDisabled:S||!(a instanceof y)},formControlInnerProps:{label:"Empresa activa"},control:$}),a instanceof b&&(0,t.jsx)(Y,{error:a.errorOrNull().error})]}),(0,t.jsx)(d,{})]})}),(0,t.jsx)(C,{children:(0,t.jsx)(B,{isLoading:S})})]})})};var W=r(n(),1),Q=()=>(0,W.jsx)(J,{});var e=r(n(),1);function X(){let m=I();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(x,{title:v,actionButton:{label:T,buttonProps:{colorScheme:"gray",onClick:()=>{m(p)}}}}),(0,e.jsx)(Q,{})]})}export{X as default};
