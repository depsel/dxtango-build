import{a as G}from"/build/_shared/chunk-EIG6C5RC.js";import{a as N}from"/build/_shared/chunk-PNRYVTA3.js";import"/build/_shared/chunk-QR3HCVRD.js";import{a as V}from"/build/_shared/chunk-IUKXLSLM.js";import{a as O}from"/build/_shared/chunk-QS5NQQHD.js";import{e as x,f as F,h as L,j as q}from"/build/_shared/chunk-SD3IP6KZ.js";import"/build/_shared/chunk-COC53NOQ.js";import"/build/_shared/chunk-NHHPDOFU.js";import{b as R}from"/build/_shared/chunk-MZVBQ25Z.js";import{a as P,b as v,c as E}from"/build/_shared/chunk-DYPZFGEQ.js";import{a as S}from"/build/_shared/chunk-6IXGFIFA.js";import{a as b,b as _,c as y}from"/build/_shared/chunk-6WQ4ASNM.js";import{H as p,Qa as A,Wa as d,Ya as h,la as T,v as I,w as f}from"/build/_shared/chunk-AN2JWTYU.js";import"/build/_shared/chunk-MUTVBZ6W.js";import{c as g}from"/build/_shared/chunk-OHSBC2MA.js";import"/build/_shared/chunk-E43VAFT6.js";import{a as to,b as n}from"/build/_shared/chunk-J7TISYNY.js";import{e as r,h as o}from"/build/_shared/chunk-AXWLPIOK.js";o();o();o();o();var U=r(to(),1);o();var B=f("/dictionary"),D=f("/dictionary/active_company");o();var H=async(a,c)=>await I({url:D,params:a,method:"POST",silent:!0},c);o();var M=q({company:L().required("Seleccione una empresa activa")}).required();var t=r(n(),1),Y=()=>{let a=v(),c=T(),{state:m,result:u}=R({url:B,fieldsMap:{label:"name",value:"db_name",isActive:"is_active"}}),{handleSubmit:J,control:K,reset:Q,setError:W,formState:{errors:X,isSubmitting:Z,isSubmitSuccessful:$}}=x({defaultValues:{company:""},resolver:F(M)}),C=$||Z;return(0,U.useEffect)(()=>{if(m instanceof y){let s=u.findIndex(l=>l.isActive===!0);s>=0&&Q({company:u[s].value})}},[m]),(0,t.jsx)("form",{noValidate:!0,onSubmit:J(async s=>{let l={company:s.company},j=await H(l,a);await E({toast:c,result:j,messages:{success:{title:"Empresa actualizada"},error:{title:"Ha ocurrido un error"},loading:{title:"Actualizando empresa"}}}).then(()=>{a.navigate(p)}).catch(oo=>{W("root",{message:oo})})}),children:(0,t.jsxs)(h,{children:[(0,t.jsx)(O,{errors:X}),(0,t.jsx)(S,{children:(0,t.jsxs)(A,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"center",gap:4,children:[(0,t.jsxs)(d,{children:[(0,t.jsx)(N,{fieldProps:{name:"company",placeholder:"Seleccione una empresa",options:u,noOptionsMessage(s){return"No hay empresas disponibles"},selectedOptionStyle:"check",isLoading:m instanceof b},formControlProps:{isDisabled:C||!(m instanceof y)},formControlInnerProps:{label:"Empresa activa"},control:K}),m instanceof _&&(0,t.jsx)(G,{error:m.errorOrNull().error})]}),(0,t.jsx)(d,{})]})}),(0,t.jsx)(S,{children:(0,t.jsx)(V,{isLoading:C})})]})})};var k=r(n(),1),w=()=>(0,k.jsx)(Y,{});var e=r(n(),1);function z(){let a=g();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(P,{title:"Empresa",actionButton:{label:"Cancelar",buttonProps:{colorScheme:"gray",onClick:()=>{a(p)}}}}),(0,e.jsx)(w,{})]})}export{z as default};
