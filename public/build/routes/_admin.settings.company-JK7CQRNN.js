import{a as L}from"/build/_shared/chunk-F2PUKCFV.js";import{a as O}from"/build/_shared/chunk-IF35UXSI.js";import"/build/_shared/chunk-QR3HCVRD.js";import{a as V}from"/build/_shared/chunk-YS7PZJ5S.js";import{a as G}from"/build/_shared/chunk-YPEM6OVU.js";import{e as F,f as N,h as q,j as B}from"/build/_shared/chunk-SD3IP6KZ.js";import"/build/_shared/chunk-COC53NOQ.js";import"/build/_shared/chunk-NHHPDOFU.js";import{b as P}from"/build/_shared/chunk-N2W4SHIU.js";import{a as v,b as E,c as x}from"/build/_shared/chunk-QHPH3CD4.js";import{a as S}from"/build/_shared/chunk-ZX3ORQWN.js";import{a as _,b as R,c as y}from"/build/_shared/chunk-EFBMV3GD.js";import{A as T,P as p,Ya as h,cb as d,eb as b,ta as A,v as I,w as f}from"/build/_shared/chunk-DDQFO3X3.js";import"/build/_shared/chunk-MUTVBZ6W.js";import{c as g}from"/build/_shared/chunk-OHSBC2MA.js";import"/build/_shared/chunk-E43VAFT6.js";import{a as ro,b as n}from"/build/_shared/chunk-J7TISYNY.js";import{e as r,h as o}from"/build/_shared/chunk-AXWLPIOK.js";o();o();o();o();var Y=r(ro(),1);o();var D=f("/dictionary"),H=f("/dictionary/active_company");o();var M=async(a,c)=>await I({url:H,params:a,method:"POST",silent:!0},c);o();var U=B({company:q().required("Seleccione una empresa activa")}).required();var t=r(n(),1),w=()=>{let a=E(),c=A(),{state:m,result:u}=P({url:D,fieldsMap:{label:"name",value:"db_name",isActive:"is_active"}}),{handleSubmit:K,control:Q,reset:W,setError:X,formState:{errors:Z,isSubmitting:$,isSubmitSuccessful:j}}=F({defaultValues:{company:""},resolver:N(U)}),C=j||$;return(0,Y.useEffect)(()=>{if(m instanceof y){let s=u.findIndex(l=>l.isActive===!0);s>=0&&W({company:u[s].value})}},[m]),(0,t.jsx)("form",{noValidate:!0,onSubmit:K(async s=>{let l={company:s.company},oo=await M(l,a);await x({toast:c,result:oo,messages:{success:{title:"Empresa actualizada"},error:{title:"Ha ocurrido un error"},loading:{title:"Actualizando empresa"}}}).then(()=>{a.navigate(p)}).catch(to=>{X("root",{message:to})})}),children:(0,t.jsxs)(b,{children:[(0,t.jsx)(G,{errors:Z}),(0,t.jsx)(S,{children:(0,t.jsxs)(h,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"center",gap:4,children:[(0,t.jsxs)(d,{children:[(0,t.jsx)(O,{fieldProps:{name:"company",placeholder:"Seleccione una empresa",options:u,noOptionsMessage(s){return"No hay empresas disponibles"},selectedOptionStyle:"check",isLoading:m instanceof _},formControlProps:{isDisabled:C||!(m instanceof y)},formControlInnerProps:{label:"Empresa activa"},control:Q}),m instanceof R&&(0,t.jsx)(L,{error:m.errorOrNull().error})]}),(0,t.jsx)(d,{})]})}),(0,t.jsx)(S,{children:(0,t.jsx)(V,{isLoading:C})})]})})};var z=r(n(),1),k=()=>(0,z.jsx)(w,{});var e=r(n(),1);function J(){let a=g();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(v,{title:"Empresa",actionButton:{label:T,buttonProps:{colorScheme:"gray",onClick:()=>{a(p)}}}}),(0,e.jsx)(k,{})]})}export{J as default};
