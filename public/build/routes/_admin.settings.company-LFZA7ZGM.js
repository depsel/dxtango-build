import{a as V}from"/build/_shared/chunk-MVI3E7A7.js";import{a as M}from"/build/_shared/chunk-A6SZ6ZPD.js";import"/build/_shared/chunk-QUDASFS5.js";import"/build/_shared/chunk-6RHVNQC3.js";import"/build/_shared/chunk-KCUI5YJN.js";import{a as Y}from"/build/_shared/chunk-V3AUB7EB.js";import{a as U}from"/build/_shared/chunk-ESWUXJEN.js";import{e as D,f as G,h as L,k as q}from"/build/_shared/chunk-64TEVNJ7.js";import{b}from"/build/_shared/chunk-GK4DXTEP.js";import{b as v}from"/build/_shared/chunk-LYIQ4MX7.js";import{a as C,b as F}from"/build/_shared/chunk-5L4DRFTU.js";import{b as x}from"/build/_shared/chunk-JH3DW3YR.js";import{a as P,b as h,c as y}from"/build/_shared/chunk-KWCD7EI4.js";import{i as N,j as E,k as O}from"/build/_shared/chunk-7FZKV7GZ.js";import{Jb as R,Qb as d,Sb as _,Y as T,Ya as A,ha as p,v as g,y as l}from"/build/_shared/chunk-X7PKD636.js";import{d as I}from"/build/_shared/chunk-DZKJSWIA.js";import{a as ao,b as n}from"/build/_shared/chunk-IS2TAHEU.js";import{e as r,h as o}from"/build/_shared/chunk-P3O6KQPX.js";o();o();o();o();var z=r(ao(),1);o();var B=l("/dictionary"),w=l("/dictionary/active_company");o();var H=async(m,c)=>await g({url:w,params:m,method:"POST",silent:!0},c);o();var k=q({company:L().required("Seleccione una empresa activa")}).required();var t=r(n(),1),J=()=>{let m=x(),c=A(),{state:a,result:u}=b({url:B,fieldsMap:{label:"name",value:"db_name",selected:"is_active"}}),{handleSubmit:X,control:Z,reset:$,setError:j,formState:{errors:oo,isSubmitting:to,isSubmitSuccessful:ro}}=D({defaultValues:{company:""},resolver:G(k)}),S=ro||to;return(0,z.useEffect)(()=>{if(a instanceof y){let s=u.findIndex(f=>f.selected===!0);s>=0&&$({company:u[s].value})}},[a]),(0,t.jsx)("form",{noValidate:!0,onSubmit:X(async s=>{let f={company:s.company},eo=await H(f,m);await F({toast:c,result:eo,messages:{success:{title:E},error:{title:T},loading:{title:O}}}).then(()=>{m.navigate(p)}).catch(mo=>{j("root",{message:mo})})}),children:(0,t.jsxs)(_,{children:[(0,t.jsx)(U,{errors:oo}),(0,t.jsx)(C,{children:(0,t.jsxs)(R,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[(0,t.jsxs)(d,{children:[(0,t.jsx)(M,{fieldProps:{name:"company",placeholder:"Seleccione una empresa",options:u,noOptionsMessage(s){return"No hay empresas disponibles"},selectedOptionStyle:"check",isLoading:a instanceof P},formControlProps:{isDisabled:S||!(a instanceof y)},formControlInnerProps:{label:"Empresa activa"},control:Z}),a instanceof h&&(0,t.jsx)(V,{error:a.errorOrNull().error})]}),(0,t.jsx)(d,{})]})}),(0,t.jsx)(C,{children:(0,t.jsx)(Y,{isLoading:S})})]})})};var Q=r(n(),1),K=()=>(0,Q.jsx)(J,{});var e=r(n(),1);function W(){let m=I();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(v,{title:N,returnButton:{buttonProps:{onClick:()=>{m(p)}}}}),(0,e.jsx)(K,{})]})}export{W as default};
