import{a as J,b as d,c as oe}from"/build/_shared/chunk-X4IR7ZYM.js";import{a as V}from"/build/_shared/chunk-FTQA2WXA.js";import{a as Q,b as re,c as te}from"/build/_shared/chunk-6ETWAEBC.js";import{a as ee}from"/build/_shared/chunk-XMOVTS3H.js";import{a as z,b as M}from"/build/_shared/chunk-L3E3UBE3.js";import"/build/_shared/chunk-RALSDSOB.js";import{a as v}from"/build/_shared/chunk-3VJFON6W.js";import"/build/_shared/chunk-GZQJXPBT.js";import"/build/_shared/chunk-U6GMCTV4.js";import"/build/_shared/chunk-74FFW6IE.js";import{a as h}from"/build/_shared/chunk-4PX4OOS6.js";import{b as U}from"/build/_shared/chunk-V4GV7RJE.js";import{a as Y}from"/build/_shared/chunk-3CMSTGAX.js";import{b as j}from"/build/_shared/chunk-YCTICJS5.js";import{a as K}from"/build/_shared/chunk-DGTHX2SG.js";import{e as X,f as W,i as Z,l as $}from"/build/_shared/chunk-R3EIFBBN.js";import{a as E,b as F,c as R}from"/build/_shared/chunk-TWIFHJP5.js";import{a as I}from"/build/_shared/chunk-UZUU2BD7.js";import{b as q}from"/build/_shared/chunk-VIEJRPHH.js";import{y as B}from"/build/_shared/chunk-5LJ5WJLW.js";import{Na as C,Wa as he,hc as T,lc as N,nc as l,oc as o,pc as u,qc as O,ra as k,uc as f,wb as A}from"/build/_shared/chunk-DP2TJOZR.js";import{F as c,a as x,d as H}from"/build/_shared/chunk-3PZF3L6F.js";import{e as n,h as s}from"/build/_shared/chunk-P3O6KQPX.js";s();s();s();s();var ne=n(x(),1);s();var ae=n(x(),1);var se=n(he(),1);var ie=()=>{let[i,a]=(0,ae.useState)(null),_=$({password:Z().required("Ingrese una contrase\xF1a").test("password","Formato de contrase\xF1a no v\xE1lido",m=>{if(m!=""&&m!=null){let S=re(m);return se.default.isEqual(i,S)||a(S),ee(te,m)}return!0})}).required();return{yupValidationSchema:oe.concat(_),passwordStatus:i}};var e=n(c(),1),de=i=>{let{typeSettings:a}=i,_=q(),y=A(),{yupValidationSchema:m,passwordStatus:S}=ie(),{state:P,result:ce}=U({endpoint:z,fieldsMap:{label:"name",value:"id"}}),{state:b,result:ue}=a.api.getRelation(),{handleSubmit:fe,control:t,setError:_e,resetField:Se,watch:Pe,formState:{errors:be,isSubmitting:ge,isSubmitSuccessful:Ce}}=X({defaultValues:{username:"",password:"",email:"",tango_id:0,perfil_facturacion_id:0,habilitado_en_dxt:!0,puede_crear_pedido:!0,puede_editar_pedido:!0,ver_pedidos_cumplidos:!0,ver_sin_precio:!1,mostrar_mensaje_de_advertencia:!1,puede_anular_pedido:!1,borrar_pedido_al_anular:!1,aprobar_pedido_al_crear:!1,dia_de_entrega:30},resolver:W(m)}),g=Pe("puede_anular_pedido");(0,ne.useEffect)(()=>{g===!1&&Se("borrar_pedido_al_anular",{defaultValue:!1})},[g]);let r=Ce||ge;return(0,e.jsx)("form",{noValidate:!0,onSubmit:fe(async G=>{let{...D}=G;D.email===""&&delete D.email;let Ie=D;(await a.api.post(Ie,_)).map({success:L=>{y({title:B,status:"success"}),_.navigate(C)},error:L=>{y({title:k,status:"error"}),_e("root",{message:L.info.error_description})}})}),children:(0,e.jsxs)(O,{children:[(0,e.jsx)(K,{errors:be}),(0,e.jsx)(I,{children:(0,e.jsxs)(T,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(u,{size:"sm",textTransform:"uppercase",children:"Informaci\xF3n del Vendedor"})}),(0,e.jsxs)(o,{colSpan:{md:2},children:[(0,e.jsx)(v,{fieldProps:{name:"tango_id",placeholder:a.tangoRelatedFields?.placeholder,options:ue,noOptionsMessage(G){return a.tangoRelatedFields?.empty},isSearchable:!0,selectedOptionStyle:"check",isLoading:b instanceof E,virtualized:!0},formControlProps:{isDisabled:r||!(b instanceof R)},formControlInnerProps:{label:a.tangoRelatedFields?.label},control:t}),b instanceof F&&(0,e.jsx)(V,{error:b.errorOrNull().error})]}),(0,e.jsx)(o,{children:(0,e.jsx)(h,{fieldProps:{name:"username",id:"username",type:"text"},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Nombre de Usuario"},control:t})}),(0,e.jsx)(o,{children:(0,e.jsx)(Q,{fieldProps:{name:"password",id:"password"},formControlInnerProps:{label:"Contrase\xF1a"},passwordStatus:S,disableForm:r,control:t})}),(0,e.jsx)(o,{children:(0,e.jsx)(h,{fieldProps:{name:"email",id:"email",type:"text",inputMode:"email"},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Correo electr\xF3nico"},control:t})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(f,{})}),(0,e.jsxs)(o,{colSpan:{md:2},children:[(0,e.jsx)(v,{fieldProps:{name:"perfil_facturacion_id",placeholder:"Seleccione un perfil",options:ce,noOptionsMessage(G){return"No hay perfiles disponibles"},isLoading:P instanceof E,selectedOptionStyle:"check"},formControlProps:{isDisabled:r||!(P instanceof R)},formControlInnerProps:{label:"Perfil de facturaci\xF3n"},control:t}),P instanceof F&&(0,e.jsx)(V,{error:P.errorOrNull().error})]}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(f,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(u,{size:"sm",textTransform:"uppercase",children:"Estado"})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(J,{fieldProps:{name:"habilitado_en_dxt",options:[{value:!0,label:"Establecido en Tango"},{value:!1,label:"Deshabilitado"}]},formControlProps:{isDisabled:r},radioProps:{size:{base:"sm",sm:"md"}},control:t})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(f,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(u,{size:"sm",textTransform:"uppercase",children:"Comunicaci\xF3n"})}),(0,e.jsx)(o,{children:(0,e.jsx)(d,{fieldProps:{name:"mostrar_mensaje_de_advertencia",id:"mostrar_mensaje_de_advertencia"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Mostrar mensaje de advertencia"},control:t})})]})}),(0,e.jsx)(I,{children:(0,e.jsxs)(T,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(u,{size:"sm",textTransform:"uppercase",children:"Pedidos"})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsxs)(N,{spacing:4,direction:{base:"column"},children:[(0,e.jsx)(l,{spacing:4,children:(0,e.jsx)(d,{fieldProps:{name:"puede_crear_pedido",id:"puede_crear_pedido"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Puede crear pedidos"},control:t})}),(0,e.jsx)(l,{spacing:4,children:(0,e.jsx)(d,{fieldProps:{name:"puede_editar_pedido",id:"puede_editar_pedido"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Puede editar pedidos"},control:t})}),(0,e.jsx)(l,{spacing:4,children:(0,e.jsx)(d,{fieldProps:{name:"puede_anular_pedido",id:"puede_anular_pedido"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Puede anular pedidos"},control:t})}),(0,e.jsx)(l,{spacing:4,children:(0,e.jsx)(d,{fieldProps:{name:"borrar_pedido_al_anular",id:"borrar_pedido_al_anular"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Borrar pedido al anular"},control:t,watch:{isDisabled:g===!1,...g===!1&&{isChecked:!1}}})}),(0,e.jsx)(l,{spacing:4,children:(0,e.jsx)(d,{fieldProps:{name:"aprobar_pedido_al_crear",id:"aprobar_pedido_al_crear"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Los pedidos se aprueban al crearlos"},control:t})}),(0,e.jsx)(l,{spacing:4,children:(0,e.jsx)(d,{fieldProps:{name:"ver_pedidos_cumplidos",id:"ver_pedidos_cumplidos"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Puede ver los pedidos cumplidos"},control:t})}),(0,e.jsx)(l,{spacing:4,children:(0,e.jsx)(d,{fieldProps:{name:"ver_sin_precio",id:"ver_sin_precio"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Puede ver art\xEDculos sin precios"},control:t})})]})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(f,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(h,{fieldProps:{name:"dia_de_entrega",id:"dia_de_entrega",type:"number",inputMode:"tel"},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Tiempo de entrega de pedidos",helperText:"Expresado en d\xEDas"},control:t})}),(0,e.jsx)(o,{})]})}),(0,e.jsx)(I,{children:(0,e.jsx)(Y,{buttonActionText:"Guardar",isLoading:r,buttonCancelUrl:a.cancelButtonNavigateTo})})]})})};var pe=n(c(),1),le=i=>{let{typeSettings:a}=i;return(0,pe.jsx)(de,{typeSettings:a})};var p=n(c(),1);function me(){let i=M.vendors,a=H();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(j,{title:i.titles.create,returnButton:{buttonProps:{onClick:()=>{a(C)}}}}),(0,p.jsx)(le,{typeSettings:i})]})}export{me as default};
