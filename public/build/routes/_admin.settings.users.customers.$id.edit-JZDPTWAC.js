import{a as re}from"/build/_shared/chunk-64XZOYW7.js";import"/build/_shared/chunk-UDK6EQ5D.js";import{a as de,b as I,c as _e}from"/build/_shared/chunk-X4IR7ZYM.js";import{a as N}from"/build/_shared/chunk-FTQA2WXA.js";import{a as me,b as Se,c as Ie}from"/build/_shared/chunk-6ETWAEBC.js";import{a as fe}from"/build/_shared/chunk-XMOVTS3H.js";import{a as Q,b as ee}from"/build/_shared/chunk-L3E3UBE3.js";import"/build/_shared/chunk-RALSDSOB.js";import{a as A}from"/build/_shared/chunk-3VJFON6W.js";import"/build/_shared/chunk-GZQJXPBT.js";import"/build/_shared/chunk-U6GMCTV4.js";import"/build/_shared/chunk-74FFW6IE.js";import{a as F}from"/build/_shared/chunk-4PX4OOS6.js";import{b as J}from"/build/_shared/chunk-V4GV7RJE.js";import{a as t}from"/build/_shared/chunk-CWO7YRBZ.js";import{a as oe}from"/build/_shared/chunk-GH6O753Y.js";import{b as ae}from"/build/_shared/chunk-DPMSINRD.js";import{a as pe}from"/build/_shared/chunk-3CMSTGAX.js";import{b as te}from"/build/_shared/chunk-YCTICJS5.js";import{a as le}from"/build/_shared/chunk-DGTHX2SG.js";import{e as se,f as ne,i as ce,l as ue}from"/build/_shared/chunk-R3EIFBBN.js";import{a as O,b as V,c as w}from"/build/_shared/chunk-TWIFHJP5.js";import{a as R}from"/build/_shared/chunk-UZUU2BD7.js";import{b as ie}from"/build/_shared/chunk-VIEJRPHH.js";import{k as Y,m as Z,z as $}from"/build/_shared/chunk-5LJ5WJLW.js";import{Ga as E,Ka as v,Wa as xe,hc as h,lc as k,nc as i,oc as o,pc as T,qc as H,ra as K,uc as u,wb as W}from"/build/_shared/chunk-DP2TJOZR.js";import{F as g,a as X,d as j,e as q}from"/build/_shared/chunk-3PZF3L6F.js";import{e as m,h as l}from"/build/_shared/chunk-P3O6KQPX.js";l();l();l();l();var e=m(g(),1),ge=()=>(0,e.jsx)(H,{width:"full",sx:{mt:8,mb:4},children:(0,e.jsxs)(h,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"center",gap:4,children:[(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(u,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(u,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(u,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsxs)(k,{spacing:4,direction:{base:"column"},children:[(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})}),(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})}),(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})}),(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})}),(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})}),(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})}),(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})}),(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})})]})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(u,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})})]})});l();var U=m(X(),1);l();var Pe=m(X(),1),be=m(xe(),1);var Ce=()=>{let[f,p]=(0,Pe.useState)(null),d=ue({password:ce().test("password","Formato de contrase\xF1a no v\xE1lido",_=>{if(_!=null&&_!=""){let c=Se(_);return be.default.isEqual(f,c)||p(c),fe(Ie,_)}return p(null),!0})}).required();return{yupValidationSchema:_e.concat(d),passwordStatus:f}};var r=m(g(),1),Ge=f=>{let{stateData:p,typeSettings:d}=f,a={...p},_=ie(),c=W(),{yupValidationSchema:we,passwordStatus:ye}=Ce(),{state:C,result:B}=J({endpoint:Q,fieldsMap:{label:"name",value:"id"}}),{state:G,result:M}=d.api.getRelation(),{handleSubmit:De,control:n,resetField:L,setError:Ee,watch:ve,formState:{errors:ke,isSubmitting:He,isSubmitSuccessful:Re}}=se({defaultValues:{username:a.username,email:a.email??"",habilitado_en_dxt:a.habilitado_en_dxt,puede_crear_pedido:a.puede_crear_pedido,puede_editar_pedido:a.puede_anular_pedido,ver_pedidos_cumplidos:a.ver_pedidos_cumplidos,ver_sin_precio:a.ver_sin_precio,mostrar_mensaje_de_advertencia:a.mostrar_mensaje_de_advertencia,puede_anular_pedido:a.puede_anular_pedido,borrar_pedido_al_anular:a.borrar_pedido_al_anular,aprobar_pedido_al_crear:a.aprobar_pedido_al_crear,dia_de_entrega:a.dia_de_entrega},resolver:ne(we)}),D=ve("puede_anular_pedido");(0,U.useEffect)(()=>{D===!1&&L("borrar_pedido_al_anular",{defaultValue:!1})},[D]),(0,U.useEffect)(()=>{if(G instanceof w){let b=M.find(S=>S.value===a.tango_id)?.value??void 0;L("tango_id",{defaultValue:b})}if(C instanceof w){let b=B.find(S=>S.value===a.perfil_facturacion_id)?.value??void 0;L("perfil_facturacion_id",{defaultValue:b})}},[G,C]);let s=Re||He;return(0,r.jsx)("form",{noValidate:!0,onSubmit:De(async b=>{let{...S}=b;S.email===""&&delete S.email,S.password===""&&delete S.password;let Fe=S;(await d.api.patch(a.id,Fe,_)).map({success:z=>{c({title:$,status:"success"}),_.navigate(v)},error:z=>{c({title:K,status:"error"}),Ee("root",{message:z.info.error_description})}})}),children:(0,r.jsxs)(H,{children:[(0,r.jsx)(le,{errors:ke}),(0,r.jsx)(R,{children:(0,r.jsxs)(h,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(T,{size:"sm",textTransform:"uppercase",children:"Informaci\xF3n del Cliente"})}),(0,r.jsxs)(o,{colSpan:{md:2},children:[(0,r.jsx)(A,{fieldProps:{name:"tango_id",placeholder:d.tangoRelatedFields?.placeholder,options:M,noOptionsMessage(b){return d.tangoRelatedFields?.empty},isSearchable:!0,selectedOptionStyle:"check",isLoading:G instanceof O,virtualized:!0},formControlProps:{isDisabled:s||!(G instanceof w)},formControlInnerProps:{label:d.tangoRelatedFields?.label},control:n}),G instanceof V&&(0,r.jsx)(N,{error:G.errorOrNull().error})]}),(0,r.jsx)(o,{children:(0,r.jsx)(F,{fieldProps:{name:"username",id:"username",type:"text"},formControlProps:{isDisabled:s},formControlInnerProps:{label:"Nombre de Usuario"},control:n})}),(0,r.jsx)(o,{children:(0,r.jsx)(me,{fieldProps:{name:"password",id:"password"},formControlInnerProps:{label:"Contrase\xF1a"},passwordStatus:ye,disableForm:s,control:n})}),(0,r.jsx)(o,{children:(0,r.jsx)(F,{fieldProps:{name:"email",id:"email",type:"text",inputMode:"email"},formControlProps:{isDisabled:s},formControlInnerProps:{label:"Correo electr\xF3nico"},control:n})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(u,{})}),(0,r.jsxs)(o,{colSpan:{md:2},children:[(0,r.jsx)(A,{fieldProps:{name:"perfil_facturacion_id",placeholder:"Seleccione un perfil",options:B,noOptionsMessage(b){return"No hay perfiles disponibles"},isLoading:C instanceof O,selectedOptionStyle:"check"},formControlProps:{isDisabled:s||!(C instanceof w)},control:n,formControlInnerProps:{label:"Perfil de facturaci\xF3n"}}),C instanceof V&&(0,r.jsx)(N,{error:C.errorOrNull().error})]}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(u,{})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(T,{size:"sm",textTransform:"uppercase",children:"Estado"})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(de,{fieldProps:{name:"habilitado_en_dxt",options:[{value:!0,label:"Establecido en Tango"},{value:!1,label:"Deshabilitado"}]},formControlProps:{isDisabled:s},radioProps:{size:{base:"sm",sm:"md"}},control:n})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(u,{})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(T,{size:"sm",textTransform:"uppercase",children:"Comunicaci\xF3n"})}),(0,r.jsx)(o,{children:(0,r.jsx)(I,{fieldProps:{name:"mostrar_mensaje_de_advertencia",id:"mostrar_mensaje_de_advertencia"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Mostrar mensaje de advertencia"},control:n})})]})}),(0,r.jsx)(R,{children:(0,r.jsxs)(h,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(T,{size:"sm",textTransform:"uppercase",children:"Pedidos"})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsxs)(k,{spacing:4,direction:{base:"column"},children:[(0,r.jsx)(i,{spacing:4,children:(0,r.jsx)(I,{fieldProps:{name:"puede_crear_pedido",id:"puede_crear_pedido"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Puede crear pedidos"},control:n})}),(0,r.jsx)(i,{spacing:4,children:(0,r.jsx)(I,{fieldProps:{name:"puede_editar_pedido",id:"puede_editar_pedido"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Puede editar pedidos"},control:n})}),(0,r.jsx)(i,{spacing:4,children:(0,r.jsx)(I,{fieldProps:{name:"puede_anular_pedido",id:"puede_anular_pedido"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Puede anular pedidos"},control:n})}),(0,r.jsx)(i,{spacing:4,children:(0,r.jsx)(I,{fieldProps:{name:"borrar_pedido_al_anular",id:"borrar_pedido_al_anular"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Borrar pedido al anular"},control:n,watch:{isDisabled:D===!1,...D===!1&&{isChecked:!1}}})}),(0,r.jsx)(i,{spacing:4,children:(0,r.jsx)(I,{fieldProps:{name:"aprobar_pedido_al_crear",id:"aprobar_pedido_al_crear"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Los pedidos se aprueban al crearlos"},control:n})}),(0,r.jsx)(i,{spacing:4,children:(0,r.jsx)(I,{fieldProps:{name:"ver_pedidos_cumplidos",id:"ver_pedidos_cumplidos"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Puede ver los pedidos cumplidos"},control:n})}),(0,r.jsx)(i,{spacing:4,children:(0,r.jsx)(I,{fieldProps:{name:"ver_sin_precio",id:"ver_sin_precio"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Puede ver art\xEDculos sin precios"},control:n})})]})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(u,{})}),(0,r.jsx)(o,{children:(0,r.jsx)(F,{fieldProps:{name:"dia_de_entrega",id:"dia_de_entrega",type:"number",inputMode:"tel"},formControlProps:{isDisabled:s},formControlInnerProps:{label:"Tiempo de entrega de pedidos",helperText:"Expresado en d\xEDas"},control:n})}),(0,r.jsx)(o,{})]})}),(0,r.jsx)(R,{children:(0,r.jsx)(pe,{buttonActionText:"Actualizar",isLoading:s})})]})})};var x=m(g(),1),he=f=>{let{typeSettings:p,id:d}=f,{state:a,retry:_}=p.api.getOne(d);return a.map({loading:c=>(0,x.jsx)(ge,{}),error:({error:c})=>(0,x.jsx)(ae,{error:c,retry:_,cancelAndNavigateTo:E}),success:c=>(0,x.jsx)(Ge,{stateData:c.data,typeSettings:p})})};var P=m(g(),1);function Te(){let f=j(),{id:p}=q(),d=ee.customers;try{if(re(p))return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(te,{title:d.titles.edit,returnButton:{buttonProps:{onClick:()=>{f(v)}}}}),(0,P.jsx)(he,{typeSettings:d,id:p})]})}catch{return(0,P.jsx)(oe,{error:Z,buttonProps:{label:Y,colorScheme:"green",onClick:()=>{f(E)}}})}}export{Te as default};
