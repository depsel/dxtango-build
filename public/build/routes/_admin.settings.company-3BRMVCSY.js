import{a as U}from"/build/_shared/chunk-FTQA2WXA.js";import{a as G}from"/build/_shared/chunk-3VJFON6W.js";import"/build/_shared/chunk-GZQJXPBT.js";import"/build/_shared/chunk-U6GMCTV4.js";import"/build/_shared/chunk-74FFW6IE.js";import{b as h}from"/build/_shared/chunk-V4GV7RJE.js";import{a as V}from"/build/_shared/chunk-3CMSTGAX.js";import{b as v}from"/build/_shared/chunk-YCTICJS5.js";import{a as L}from"/build/_shared/chunk-DGTHX2SG.js";import{e as D,f as F,i as M,l as Y}from"/build/_shared/chunk-R3EIFBBN.js";import{a as P,b,c as y}from"/build/_shared/chunk-TWIFHJP5.js";import{a as C}from"/build/_shared/chunk-UZUU2BD7.js";import{b as x}from"/build/_shared/chunk-VIEJRPHH.js";import{h as N,i as O}from"/build/_shared/chunk-5LJ5WJLW.js";import{Ga as c,J as _,M as l,hc as R,oc as d,qc as E,ra as g,wb as A}from"/build/_shared/chunk-DP2TJOZR.js";import{F as a,a as ro,d as T}from"/build/_shared/chunk-3PZF3L6F.js";import{e as r,h as o}from"/build/_shared/chunk-P3O6KQPX.js";o();o();o();o();var w=r(ro(),1);o();var q=l("/dictionary","GET"),B=l("/dictionary/active_company","POST");o();var H=async(n,p)=>await _({...B,params:n,silent:!0},p);o();var k=Y({company:M().required("Seleccione una empresa activa")}).required();var t=r(a(),1),z=()=>{let n=x(),p=A(),{state:m,result:u}=h({endpoint:q,fieldsMap:{label:"name",value:"db_name",selected:"is_active"}}),{handleSubmit:W,control:X,reset:Z,setError:$,formState:{errors:j,isSubmitting:oo,isSubmitSuccessful:to}}=D({defaultValues:{company:""},resolver:F(k)}),S=to||oo;return(0,w.useEffect)(()=>{if(m instanceof y){let i=u.findIndex(f=>f.selected===!0);i>=0&&Z({company:u[i].value})}},[m]),(0,t.jsx)("form",{noValidate:!0,onSubmit:W(async i=>{let f={company:i.company};(await H(f,n)).map({success:I=>{p({title:O,status:"success"}),n.navigate(c)},error:I=>{p({title:g,status:"error"}),$("root",{message:I.info.error_description})}})}),children:(0,t.jsxs)(E,{children:[(0,t.jsx)(L,{errors:j}),(0,t.jsx)(C,{children:(0,t.jsxs)(R,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[(0,t.jsxs)(d,{children:[(0,t.jsx)(G,{fieldProps:{name:"company",placeholder:"Seleccione una empresa",options:u,noOptionsMessage(i){return"No hay empresas disponibles"},selectedOptionStyle:"check",isLoading:m instanceof P},formControlProps:{isDisabled:S||!(m instanceof y)},formControlInnerProps:{label:"Empresa activa"},control:X}),m instanceof b&&(0,t.jsx)(U,{error:m.errorOrNull().error})]}),(0,t.jsx)(d,{})]})}),(0,t.jsx)(C,{children:(0,t.jsx)(V,{isLoading:S})})]})})};var K=r(a(),1),J=()=>(0,K.jsx)(z,{});var e=r(a(),1);function Q(){let n=T();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(v,{title:N,returnButton:{buttonProps:{onClick:()=>{n(c)}}}}),(0,e.jsx)(J,{})]})}export{Q as default};
