import{a as oe}from"/build/_shared/chunk-5XLCITWI.js";import{a as le,b as g,c as ce,d as ge,e as Ie,f as Pe}from"/build/_shared/chunk-7R3O57NT.js";import{a as O}from"/build/_shared/chunk-36YI2FTW.js";import{a as Se}from"/build/_shared/chunk-XMOVTS3H.js";import{a as L}from"/build/_shared/chunk-J76CSQVK.js";import"/build/_shared/chunk-DLLPPQ62.js";import{a as F}from"/build/_shared/chunk-3IIP4QSN.js";import{a as ue}from"/build/_shared/chunk-SHMG4Y5B.js";import{a as pe}from"/build/_shared/chunk-L76L4QWD.js";import{e as ne,f as me,h as fe,j as _e}from"/build/_shared/chunk-PLUCZ5ZI.js";import"/build/_shared/chunk-CMAVFNQJ.js";import"/build/_shared/chunk-KCUI5YJN.js";import{a as te}from"/build/_shared/chunk-HRDHQIA5.js";import{a as t}from"/build/_shared/chunk-LWCE64AO.js";import{a as ie}from"/build/_shared/chunk-NNGRPTM4.js";import{a as re}from"/build/_shared/chunk-C3XPFWZX.js";import{a as Q}from"/build/_shared/chunk-KOPCI6QW.js";import{b as J}from"/build/_shared/chunk-QZCETK4F.js";import{a as ae,b as de}from"/build/_shared/chunk-V6MG2CRX.js";import{a as H}from"/build/_shared/chunk-K2WBBUBW.js";import"/build/_shared/chunk-TT2RFLCL.js";import{a as se}from"/build/_shared/chunk-CD5IF7GC.js";import{m as Y,n as Z,y as $,z as ee}from"/build/_shared/chunk-6CXKIKKN.js";import{a as N,b as A,c as D}from"/build/_shared/chunk-EF4J777R.js";import{D as q,Db as c,Ia as W,W as K,ba as E,ia as v,ra as Le,rb as h,ub as k,wb as i,xb as o,yb as T,zb as R}from"/build/_shared/chunk-JQLUC77E.js";import{d as X,e as j}from"/build/_shared/chunk-MJPS7W4Y.js";import{a as M,b as I}from"/build/_shared/chunk-IS2TAHEU.js";import{e as l,h as m}from"/build/_shared/chunk-P3O6KQPX.js";m();m();m();m();var e=l(I(),1),be=()=>(0,e.jsx)(R,{width:"full",sx:{mt:8,mb:4},children:(0,e.jsxs)(h,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"center",gap:4,children:[(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(c,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(c,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(c,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsxs)(k,{spacing:4,direction:{base:"column"},children:[(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})}),(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})}),(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})}),(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})}),(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})}),(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})}),(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})}),(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})})]})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(c,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})})]})});m();var U=l(M(),1);m();var Ge=l(M(),1),Ce=l(Le(),1);var he=()=>{let[u,p]=(0,Ge.useState)(null),n=_e({password:fe().test("password","Formato de contrase\xF1a no v\xE1lido",f=>{if(f!=null&&f!=""){let _=Ie(f);return Ce.default.isEqual(u,_)||p(_),Se(Pe,f)}return p(null),!0})}).required();return{yupValidationSchema:ge.concat(n),passwordStatus:u}};var r=l(I(),1),Te=u=>{let{stateData:p,typeSettings:n}=u,a={...p},f=se(),_=W(),{yupValidationSchema:we,passwordStatus:Ee}=he(),{state:G,result:B}=J({url:Q,fieldsMap:{label:"name",value:"id"}}),{state:C,result:z}=n.api.getRelation(),{handleSubmit:ve,control:d,resetField:x,setError:ke,watch:Re,formState:{errors:He,isSubmitting:Fe,isSubmitSuccessful:Ve}}=ne({defaultValues:{username:a.username,email:a.email??"",habilitado_en_dxt:a.habilitado_en_dxt,puede_crear_pedido:a.puede_crear_pedido,puede_editar_pedido:a.puede_anular_pedido,ver_pedidos_cumplidos:a.ver_pedidos_cumplidos,ver_sin_precio:a.ver_sin_precio,mostrar_mensaje_de_advertencia:a.mostrar_mensaje_de_advertencia,puede_anular_pedido:a.puede_anular_pedido,borrar_pedido_al_anular:a.borrar_pedido_al_anular,aprobar_pedido_al_crear:a.aprobar_pedido_al_crear,dia_de_entrega:a.dia_de_entrega},resolver:me(we)}),w=Re("puede_anular_pedido");(0,U.useEffect)(()=>{w===!1&&x("borrar_pedido_al_anular",{defaultValue:!1})},[w]),(0,U.useEffect)(()=>{if(C instanceof D){let b=z.find(S=>S.value===a.tango_id)?.value??void 0;x("tango_id",{defaultValue:b})}if(G instanceof D){let b=B.find(S=>S.value===a.perfil_facturacion_id)?.value??void 0;x("perfil_facturacion_id",{defaultValue:b})}},[C,G]);let s=Ve||Fe;return(0,r.jsx)("form",{noValidate:!0,onSubmit:ve(async b=>{let{...S}=b;S.email===""&&delete S.email,S.password===""&&delete S.password;let xe=S,Ne=await n.api.patch(a.id,xe,f);await de({toast:_,result:Ne,messages:{success:{title:$},error:{title:K},loading:{title:ee}}}).then(()=>{f.navigate(v)}).catch(Ae=>{ke("root",{message:Ae})})}),children:(0,r.jsxs)(R,{children:[(0,r.jsx)(pe,{errors:He}),(0,r.jsx)(H,{children:(0,r.jsxs)(h,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(T,{size:"sm",textTransform:"uppercase",children:"Informaci\xF3n del Vendedor"})}),(0,r.jsxs)(o,{colSpan:{md:2},children:[(0,r.jsx)(L,{fieldProps:{name:"tango_id",placeholder:n.tangoRelatedFields?.placeholder,options:z,noOptionsMessage(b){return n.tangoRelatedFields?.empty},isSearchable:!0,selectedOptionStyle:"check",isLoading:C instanceof N},formControlProps:{isDisabled:s||!(C instanceof D)},formControlInnerProps:{label:n.tangoRelatedFields?.label},control:d}),C instanceof A&&(0,r.jsx)(O,{error:C.errorOrNull().error})]}),(0,r.jsx)(o,{children:(0,r.jsx)(F,{fieldProps:{name:"username",id:"username",type:"text"},formControlProps:{isDisabled:s},formControlInnerProps:{label:"Nombre de Usuario"},control:d})}),(0,r.jsx)(o,{children:(0,r.jsx)(ce,{passwordStatus:Ee,disableForm:s,control:d})}),(0,r.jsx)(o,{children:(0,r.jsx)(F,{fieldProps:{name:"email",id:"email",type:"text",inputMode:"email"},formControlProps:{isDisabled:s},formControlInnerProps:{label:"Correo electr\xF3nico"},control:d})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(c,{})}),(0,r.jsxs)(o,{colSpan:{md:2},children:[(0,r.jsx)(L,{fieldProps:{name:"perfil_facturacion_id",placeholder:"Seleccione un perfil",options:B,noOptionsMessage(b){return"No hay perfiles disponibles"},isLoading:G instanceof N,selectedOptionStyle:"check"},formControlProps:{isDisabled:s||!(G instanceof D)},control:d,formControlInnerProps:{label:"Perfil de facturaci\xF3n"}}),G instanceof A&&(0,r.jsx)(O,{error:G.errorOrNull().error})]}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(c,{})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(T,{size:"sm",textTransform:"uppercase",children:"Estado"})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(le,{fieldProps:{name:"habilitado_en_dxt",options:[{value:!0,label:"Establecido en Tango"},{value:!1,label:"Deshabilitado"}]},formControlProps:{isDisabled:s},radioProps:{size:{base:"sm",sm:"md"}},control:d})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(c,{})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(T,{size:"sm",textTransform:"uppercase",children:"Comunicaci\xF3n"})}),(0,r.jsx)(o,{children:(0,r.jsx)(g,{fieldProps:{name:"mostrar_mensaje_de_advertencia",id:"mostrar_mensaje_de_advertencia"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Mostrar mensaje de advertencia"},control:d})})]})}),(0,r.jsx)(H,{children:(0,r.jsxs)(h,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(T,{size:"sm",textTransform:"uppercase",children:"Pedidos"})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsxs)(k,{spacing:4,direction:{base:"column"},children:[(0,r.jsx)(i,{spacing:4,children:(0,r.jsx)(g,{fieldProps:{name:"puede_crear_pedido",id:"puede_crear_pedido"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Puede crear pedidos"},control:d})}),(0,r.jsx)(i,{spacing:4,children:(0,r.jsx)(g,{fieldProps:{name:"puede_editar_pedido",id:"puede_editar_pedido"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Puede editar pedidos"},control:d})}),(0,r.jsx)(i,{spacing:4,children:(0,r.jsx)(g,{fieldProps:{name:"puede_anular_pedido",id:"puede_anular_pedido"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Puede anular pedidos"},control:d})}),(0,r.jsx)(i,{spacing:4,children:(0,r.jsx)(g,{fieldProps:{name:"borrar_pedido_al_anular",id:"borrar_pedido_al_anular"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Borrar pedido al anular"},control:d,watch:{isDisabled:w===!1,...w===!1&&{isChecked:!1}}})}),(0,r.jsx)(i,{spacing:4,children:(0,r.jsx)(g,{fieldProps:{name:"aprobar_pedido_al_crear",id:"aprobar_pedido_al_crear"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Los pedidos se aprueban al crearlos"},control:d})}),(0,r.jsx)(i,{spacing:4,children:(0,r.jsx)(g,{fieldProps:{name:"ver_pedidos_cumplidos",id:"ver_pedidos_cumplidos"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Puede ver los pedidos cumplidos"},control:d})}),(0,r.jsx)(i,{spacing:4,children:(0,r.jsx)(g,{fieldProps:{name:"ver_sin_precio",id:"ver_sin_precio"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Puede ver art\xEDculos sin precios"},control:d})})]})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(c,{})}),(0,r.jsx)(o,{children:(0,r.jsx)(F,{fieldProps:{name:"dia_de_entrega",id:"dia_de_entrega",type:"number",inputMode:"tel"},formControlProps:{isDisabled:s},formControlInnerProps:{label:"Tiempo de entrega de pedidos",helperText:"Expresado en d\xEDas"},control:d})}),(0,r.jsx)(o,{})]})}),(0,r.jsx)(H,{children:(0,r.jsx)(ue,{buttonActionText:"Actualizar",isLoading:s})})]})})};var V=l(I(),1),De=u=>{let{typeSettings:p,id:n}=u,{state:a,retry:f}=p.api.getOne(n);return a.map({loading:_=>(0,V.jsx)(be,{}),error:({error:_})=>(0,V.jsx)(ie,{error:_,retry:f,cancelAndNavigateTo:E}),success:_=>(0,V.jsx)(Te,{stateData:_.data,typeSettings:p})})};var P=l(I(),1);function ye(){let u=X(),{id:p}=j(),n=re.vendors;try{if(oe(p))return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(ae,{title:n.titles.edit,actionButton:{label:q,buttonProps:{colorScheme:"gray",onClick:()=>{u(v)}}}}),(0,P.jsx)(De,{typeSettings:n,id:p})]})}catch{return(0,P.jsx)(te,{error:Z,buttonProps:{label:Y,colorScheme:"green",onClick:()=>{u(E)}}})}}export{ye as default};
