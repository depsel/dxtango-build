import{a as K,b as d,c as $,d as ee,e as oe}from"/build/_shared/chunk-YUPDQZ23.js";import{a as L}from"/build/_shared/chunk-GIECF5JH.js";import{a as Z}from"/build/_shared/chunk-EZL2WUID.js";import{a as H}from"/build/_shared/chunk-QYNV6ZXS.js";import"/build/_shared/chunk-QR3HCVRD.js";import{a as f}from"/build/_shared/chunk-6I6UQKKH.js";import{a as W}from"/build/_shared/chunk-DFN4Z3JB.js";import{a as Q}from"/build/_shared/chunk-TWC63WIN.js";import{e as X,f as J,h as E,j as Y}from"/build/_shared/chunk-SD3IP6KZ.js";import"/build/_shared/chunk-COC53NOQ.js";import"/build/_shared/chunk-NHHPDOFU.js";import{a as U}from"/build/_shared/chunk-PV3Q4SPS.js";import{a as M}from"/build/_shared/chunk-VP5EY3GX.js";import{b as N}from"/build/_shared/chunk-OFDOSXRQ.js";import{a as z,b as j,c as q}from"/build/_shared/chunk-MZS6CHAS.js";import{a as w}from"/build/_shared/chunk-VTMMMSTK.js";import"/build/_shared/chunk-I5EGJ5XA.js";import{a as D,b as F,c as x}from"/build/_shared/chunk-SWYAOCMN.js";import{L as I,Qa as v,Ta as O,Va as p,Wa as o,X as he,Xa as S,Ya as A,Za as h,ab as _,la as B}from"/build/_shared/chunk-GMXXJD7U.js";import"/build/_shared/chunk-MUTVBZ6W.js";import{c as V}from"/build/_shared/chunk-OHSBC2MA.js";import"/build/_shared/chunk-E43VAFT6.js";import{a as k,b as u}from"/build/_shared/chunk-J7TISYNY.js";import{e as n,h as s}from"/build/_shared/chunk-AXWLPIOK.js";s();s();s();s();var se=n(k(),1);s();var re=n(k(),1);var te=n(he(),1);var ae=()=>{let[i,a]=(0,re.useState)(null),P=Y({password:E().required("Ingrese una contrase\xF1a").test("password","Formato de contrase\xF1a no v\xE1lido",l=>{if(l!=""&&l!=null){let m=ee(l);return te.default.isEqual(i,m)||a(m),Z(oe,l)}return!0}),password_repeat:E().required("Repita la contrase\xF1a").test("passwords-match","Las contrase\xF1as no coinciden",function(l){return this.parent.password===l})}).required();return{yupValidationSchema:$.concat(P),passwordStatus:i}};var e=n(u(),1),ie=i=>{let{typeSettings:a}=i,P=j(),R=B(),{yupValidationSchema:l,passwordStatus:m}=ae(),{state:b,result:pe}=N({url:M,fieldsMap:{label:"name",value:"id"}}),{state:g,result:me}=a.api.getRelation(),{handleSubmit:ce,control:t,setError:ue,resetField:fe,watch:Se,formState:{errors:_e,isSubmitting:Pe,isSubmitSuccessful:be}}=X({defaultValues:{habilitado_en_dxt:!0,puede_crear_pedido:!0,puede_editar_pedido:!0,ver_pedidos_cumplidos:!0,ver_sin_precio:!1,mostrar_mensaje_de_advertencia:!1,puede_anular_pedido:!1,borrar_pedido_al_anular:!1,aprobar_pedido_al_crear:!1},resolver:J(l)}),C=Se("puede_anular_pedido");(0,se.useEffect)(()=>{C===!1&&fe("borrar_pedido_al_anular",{defaultValue:!1})},[C]);let r=be||Pe;return(0,e.jsx)("form",{noValidate:!0,onSubmit:ce(async G=>{let{password_repeat:ye,...T}=G;T.email===""&&delete T.email;let ge=T,Ce=await a.api.post(ge,P);await q({toast:R,result:Ce,messages:{success:{title:"Usuario creado"},error:{title:"Ha ocurrido un error"},loading:{title:"Creando usuario"}}}).then(()=>{P.navigate(I)}).catch(Ie=>{ue("root",{message:Ie})})}),children:(0,e.jsxs)(A,{children:[(0,e.jsx)(Q,{errors:_e}),(0,e.jsx)(w,{children:(0,e.jsxs)(v,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"center",gap:4,children:[(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(S,{size:"sm",textTransform:"uppercase",children:"Informaci\xF3n del Cliente"})}),(0,e.jsxs)(o,{colSpan:{md:2},children:[(0,e.jsx)(H,{fieldProps:{name:"tango_id",placeholder:a.tangoRelatedFields?.placeholder,options:me,noOptionsMessage(G){return a.tangoRelatedFields?.empty},isSearchable:!0,selectedOptionStyle:"check",isLoading:g instanceof D},formControlProps:{isDisabled:r||!(g instanceof x)},formControlInnerProps:{label:a.tangoRelatedFields?.label},control:t}),g instanceof F&&(0,e.jsx)(L,{error:g.errorOrNull().error})]}),(0,e.jsx)(o,{children:(0,e.jsx)(f,{fieldProps:{name:"username",id:"username",type:"text"},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Nombre de Usuario"},control:t})}),(0,e.jsx)(o,{children:(0,e.jsx)(f,{fieldProps:{name:"email",id:"email",type:"text",inputMode:"email"},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Correo electr\xF3nico"},control:t})}),(0,e.jsx)(o,{children:(0,e.jsx)(f,{fieldProps:{name:"password",id:"password",type:"password"},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Contrase\xF1a"},control:t})}),(0,e.jsx)(o,{children:(0,e.jsx)(f,{fieldProps:{name:"password_repeat",id:"password_repeat",type:"password"},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Confirmaci\xF3n de Contrase\xF1a"},control:t})}),m!=null&&(0,e.jsxs)(o,{colSpan:{md:2},children:[m.tooShort&&(0,e.jsx)(h,{colorScheme:"red",children:"Contrase\xF1a muy corta"}),m.tooLong&&(0,e.jsx)(h,{colorScheme:"red",children:"Contrase\xF1a muy larga"}),m.invalidCharsPresent&&(0,e.jsx)(h,{colorScheme:"red",children:"Evite caracteres no v\xE1lidos"})]}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(_,{})}),(0,e.jsxs)(o,{colSpan:{md:2},children:[(0,e.jsx)(H,{fieldProps:{name:"perfil_facturacion_id",placeholder:"Seleccione un perfil",options:pe,noOptionsMessage(G){return"No hay perfiles disponibles"},isLoading:b instanceof D,selectedOptionStyle:"check"},formControlProps:{isDisabled:r||!(b instanceof x)},formControlInnerProps:{label:"Perfil de facturaci\xF3n"},control:t}),b instanceof F&&(0,e.jsx)(L,{error:b.errorOrNull().error})]}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(_,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(S,{size:"sm",textTransform:"uppercase",children:"Estado"})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(K,{fieldProps:{name:"habilitado_en_dxt",options:[{value:!0,label:"Establecido en Tango"},{value:!1,label:"Deshabilitado"}]},formControlProps:{isDisabled:r},radioProps:{size:{base:"sm",sm:"md"}},control:t})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(_,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(S,{size:"sm",textTransform:"uppercase",children:"Comunicaci\xF3n"})}),(0,e.jsx)(o,{children:(0,e.jsx)(d,{fieldProps:{name:"mostrar_mensaje_de_advertencia",id:"mostrar_mensaje_de_advertencia"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Mostrar mensaje de advertencia"},control:t})})]})}),(0,e.jsx)(w,{children:(0,e.jsxs)(v,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"center",gap:4,children:[(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(S,{size:"sm",textTransform:"uppercase",children:"Pedidos"})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsxs)(O,{spacing:4,direction:{base:"column"},children:[(0,e.jsx)(p,{spacing:4,children:(0,e.jsx)(d,{fieldProps:{name:"puede_crear_pedido",id:"puede_crear_pedido"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Puede crear pedidos"},control:t})}),(0,e.jsx)(p,{spacing:4,children:(0,e.jsx)(d,{fieldProps:{name:"puede_editar_pedido",id:"puede_editar_pedido"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Puede editar pedidos"},control:t})}),(0,e.jsx)(p,{spacing:4,children:(0,e.jsx)(d,{fieldProps:{name:"puede_anular_pedido",id:"puede_anular_pedido"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Puede anular pedidos"},control:t})}),(0,e.jsx)(p,{spacing:4,children:(0,e.jsx)(d,{fieldProps:{name:"borrar_pedido_al_anular",id:"borrar_pedido_al_anular"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Borrar pedido al anular"},control:t,watch:{isDisabled:C===!1,...C===!1&&{isChecked:!1}}})}),(0,e.jsx)(p,{spacing:4,children:(0,e.jsx)(d,{fieldProps:{name:"aprobar_pedido_al_crear",id:"aprobar_pedido_al_crear"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Los pedidos se aprueban al crearlos"},control:t})}),(0,e.jsx)(p,{spacing:4,children:(0,e.jsx)(d,{fieldProps:{name:"ver_pedidos_cumplidos",id:"ver_pedidos_cumplidos"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Puede ver los pedidos cumplidos"},control:t})}),(0,e.jsx)(p,{spacing:4,children:(0,e.jsx)(d,{fieldProps:{name:"ver_sin_precio",id:"ver_sin_precio"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Puede ver art\xEDculos sin precios"},control:t})})]})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(_,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(f,{fieldProps:{name:"dia_de_entrega",id:"dia_de_entrega",type:"number",inputMode:"tel"},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Tiempo de entrega de pedidos",helperText:"Expresado en d\xEDas"},control:t})}),(0,e.jsx)(o,{})]})}),(0,e.jsx)(w,{children:(0,e.jsx)(W,{buttonActionText:"Guardar",isLoading:r,buttonCancelUrl:a.cancelButtonNavigateTo})})]})})};var de=n(u(),1),ne=i=>{let{typeSettings:a}=i;return(0,de.jsx)(ie,{typeSettings:a})};var c=n(u(),1);function le(){let i=U.customers,a=V();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(z,{title:i.titles.create,actionButton:{label:"Cancelar",buttonProps:{colorScheme:"gray",onClick:()=>{a(I)}}}}),(0,c.jsx)(ne,{typeSettings:i})]})}export{le as default};
