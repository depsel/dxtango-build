import{a as re}from"/build/_shared/chunk-WUJQJI4C.js";import{a as t}from"/build/_shared/chunk-3E6R7P2Z.js";import{a as oe}from"/build/_shared/chunk-6JEONWJD.js";import{a as ae}from"/build/_shared/chunk-HTTKQLCQ.js";import{a as me,b as I,c as pe,d as Se,e as Ie,f as ge}from"/build/_shared/chunk-JDPCYXQW.js";import{a as N}from"/build/_shared/chunk-MVI3E7A7.js";import{a as _e}from"/build/_shared/chunk-XMOVTS3H.js";import{a as A}from"/build/_shared/chunk-A6SZ6ZPD.js";import"/build/_shared/chunk-QUDASFS5.js";import"/build/_shared/chunk-6RHVNQC3.js";import"/build/_shared/chunk-KCUI5YJN.js";import{a as F}from"/build/_shared/chunk-O7SFO4YM.js";import{a as ce}from"/build/_shared/chunk-V3AUB7EB.js";import{a as le}from"/build/_shared/chunk-ESWUXJEN.js";import{e as ne,f as de,h as ue,k as fe}from"/build/_shared/chunk-64TEVNJ7.js";import{a as J,b as ee}from"/build/_shared/chunk-EKCBHF5Q.js";import"/build/_shared/chunk-SSPXWVUV.js";import{b as W}from"/build/_shared/chunk-GK4DXTEP.js";import{b as te}from"/build/_shared/chunk-LYIQ4MX7.js";import{a as H,b as se}from"/build/_shared/chunk-5L4DRFTU.js";import{b as ie}from"/build/_shared/chunk-JH3DW3YR.js";import{a as O,b as V,c as y}from"/build/_shared/chunk-KWCD7EI4.js";import{D as Z,E as $,m as Q,o as Y}from"/build/_shared/chunk-7FZKV7GZ.js";import{Jb as h,Nb as k,Pb as i,Qb as o,Rb as T,Sb as R,Wb as c,Y as q,Ya as K,ha as E,la as v,xa as Ve}from"/build/_shared/chunk-X7PKD636.js";import{d as X,e as j}from"/build/_shared/chunk-DZKJSWIA.js";import{a as z,b as g}from"/build/_shared/chunk-IS2TAHEU.js";import{e as l,h as m}from"/build/_shared/chunk-P3O6KQPX.js";m();m();m();m();var e=l(g(),1),Pe=()=>(0,e.jsx)(R,{width:"full",sx:{mt:8,mb:4},children:(0,e.jsxs)(h,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"center",gap:4,children:[(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(c,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(c,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(c,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsxs)(k,{spacing:4,direction:{base:"column"},children:[(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})}),(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})}),(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})}),(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})}),(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})}),(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})}),(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})}),(0,e.jsx)(i,{spacing:4,children:(0,e.jsx)(t,{})})]})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(c,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(t,{})})]})});m();var U=l(z(),1);m();var be=l(z(),1),Ce=l(Ve(),1);var Ge=()=>{let[u,p]=(0,be.useState)(null),d=fe({password:ue().test("password","Formato de contrase\xF1a no v\xE1lido",f=>{if(f!=null&&f!=""){let _=Ie(f);return Ce.default.isEqual(u,_)||p(_),_e(ge,f)}return p(null),!0})}).required();return{yupValidationSchema:Se.concat(d),passwordStatus:u}};var r=l(g(),1),he=u=>{let{stateData:p,typeSettings:d}=u,a={...p},f=ie(),_=K(),{yupValidationSchema:De,passwordStatus:we}=Ge(),{state:C,result:B}=W({url:J,fieldsMap:{label:"name",value:"id"}}),{state:G,result:M}=d.api.getRelation(),{handleSubmit:Ee,control:n,resetField:L,setError:ve,watch:ke,formState:{errors:Re,isSubmitting:He,isSubmitSuccessful:Fe}}=ne({defaultValues:{username:a.username,email:a.email??"",habilitado_en_dxt:a.habilitado_en_dxt,puede_crear_pedido:a.puede_crear_pedido,puede_editar_pedido:a.puede_anular_pedido,ver_pedidos_cumplidos:a.ver_pedidos_cumplidos,ver_sin_precio:a.ver_sin_precio,mostrar_mensaje_de_advertencia:a.mostrar_mensaje_de_advertencia,puede_anular_pedido:a.puede_anular_pedido,borrar_pedido_al_anular:a.borrar_pedido_al_anular,aprobar_pedido_al_crear:a.aprobar_pedido_al_crear,dia_de_entrega:a.dia_de_entrega},resolver:de(De)}),w=ke("puede_anular_pedido");(0,U.useEffect)(()=>{w===!1&&L("borrar_pedido_al_anular",{defaultValue:!1})},[w]),(0,U.useEffect)(()=>{if(G instanceof y){let b=M.find(S=>S.value===a.tango_id)?.value??void 0;L("tango_id",{defaultValue:b})}if(C instanceof y){let b=B.find(S=>S.value===a.perfil_facturacion_id)?.value??void 0;L("perfil_facturacion_id",{defaultValue:b})}},[G,C]);let s=Fe||He;return(0,r.jsx)("form",{noValidate:!0,onSubmit:Ee(async b=>{let{...S}=b;S.email===""&&delete S.email,S.password===""&&delete S.password;let xe=S,Le=await d.api.patch(a.id,xe,f);await se({toast:_,result:Le,messages:{success:{title:Z},error:{title:q},loading:{title:$}}}).then(()=>{f.navigate(v)}).catch(Oe=>{ve("root",{message:Oe})})}),children:(0,r.jsxs)(R,{children:[(0,r.jsx)(le,{errors:Re}),(0,r.jsx)(H,{children:(0,r.jsxs)(h,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(T,{size:"sm",textTransform:"uppercase",children:"Informaci\xF3n del Cliente"})}),(0,r.jsxs)(o,{colSpan:{md:2},children:[(0,r.jsx)(A,{fieldProps:{name:"tango_id",placeholder:d.tangoRelatedFields?.placeholder,options:M,noOptionsMessage(b){return d.tangoRelatedFields?.empty},isSearchable:!0,selectedOptionStyle:"check",isLoading:G instanceof O,virtualized:!0},formControlProps:{isDisabled:s||!(G instanceof y)},formControlInnerProps:{label:d.tangoRelatedFields?.label},control:n}),G instanceof V&&(0,r.jsx)(N,{error:G.errorOrNull().error})]}),(0,r.jsx)(o,{children:(0,r.jsx)(F,{fieldProps:{name:"username",id:"username",type:"text"},formControlProps:{isDisabled:s},formControlInnerProps:{label:"Nombre de Usuario"},control:n})}),(0,r.jsx)(o,{children:(0,r.jsx)(pe,{passwordStatus:we,disableForm:s,control:n})}),(0,r.jsx)(o,{children:(0,r.jsx)(F,{fieldProps:{name:"email",id:"email",type:"text",inputMode:"email"},formControlProps:{isDisabled:s},formControlInnerProps:{label:"Correo electr\xF3nico"},control:n})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(c,{})}),(0,r.jsxs)(o,{colSpan:{md:2},children:[(0,r.jsx)(A,{fieldProps:{name:"perfil_facturacion_id",placeholder:"Seleccione un perfil",options:B,noOptionsMessage(b){return"No hay perfiles disponibles"},isLoading:C instanceof O,selectedOptionStyle:"check"},formControlProps:{isDisabled:s||!(C instanceof y)},control:n,formControlInnerProps:{label:"Perfil de facturaci\xF3n"}}),C instanceof V&&(0,r.jsx)(N,{error:C.errorOrNull().error})]}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(c,{})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(T,{size:"sm",textTransform:"uppercase",children:"Estado"})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(me,{fieldProps:{name:"habilitado_en_dxt",options:[{value:!0,label:"Establecido en Tango"},{value:!1,label:"Deshabilitado"}]},formControlProps:{isDisabled:s},radioProps:{size:{base:"sm",sm:"md"}},control:n})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(c,{})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(T,{size:"sm",textTransform:"uppercase",children:"Comunicaci\xF3n"})}),(0,r.jsx)(o,{children:(0,r.jsx)(I,{fieldProps:{name:"mostrar_mensaje_de_advertencia",id:"mostrar_mensaje_de_advertencia"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Mostrar mensaje de advertencia"},control:n})})]})}),(0,r.jsx)(H,{children:(0,r.jsxs)(h,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(T,{size:"sm",textTransform:"uppercase",children:"Pedidos"})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsxs)(k,{spacing:4,direction:{base:"column"},children:[(0,r.jsx)(i,{spacing:4,children:(0,r.jsx)(I,{fieldProps:{name:"puede_crear_pedido",id:"puede_crear_pedido"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Puede crear pedidos"},control:n})}),(0,r.jsx)(i,{spacing:4,children:(0,r.jsx)(I,{fieldProps:{name:"puede_editar_pedido",id:"puede_editar_pedido"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Puede editar pedidos"},control:n})}),(0,r.jsx)(i,{spacing:4,children:(0,r.jsx)(I,{fieldProps:{name:"puede_anular_pedido",id:"puede_anular_pedido"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Puede anular pedidos"},control:n})}),(0,r.jsx)(i,{spacing:4,children:(0,r.jsx)(I,{fieldProps:{name:"borrar_pedido_al_anular",id:"borrar_pedido_al_anular"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Borrar pedido al anular"},control:n,watch:{isDisabled:w===!1,...w===!1&&{isChecked:!1}}})}),(0,r.jsx)(i,{spacing:4,children:(0,r.jsx)(I,{fieldProps:{name:"aprobar_pedido_al_crear",id:"aprobar_pedido_al_crear"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Los pedidos se aprueban al crearlos"},control:n})}),(0,r.jsx)(i,{spacing:4,children:(0,r.jsx)(I,{fieldProps:{name:"ver_pedidos_cumplidos",id:"ver_pedidos_cumplidos"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Puede ver los pedidos cumplidos"},control:n})}),(0,r.jsx)(i,{spacing:4,children:(0,r.jsx)(I,{fieldProps:{name:"ver_sin_precio",id:"ver_sin_precio"},formControlProps:{width:"auto",isDisabled:s},formControlInnerProps:{label:"Puede ver art\xEDculos sin precios"},control:n})})]})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(c,{})}),(0,r.jsx)(o,{children:(0,r.jsx)(F,{fieldProps:{name:"dia_de_entrega",id:"dia_de_entrega",type:"number",inputMode:"tel"},formControlProps:{isDisabled:s},formControlInnerProps:{label:"Tiempo de entrega de pedidos",helperText:"Expresado en d\xEDas"},control:n})}),(0,r.jsx)(o,{})]})}),(0,r.jsx)(H,{children:(0,r.jsx)(ce,{buttonActionText:"Actualizar",isLoading:s})})]})})};var x=l(g(),1),Te=u=>{let{typeSettings:p,id:d}=u,{state:a,retry:f}=p.api.getOne(d);return a.map({loading:_=>(0,x.jsx)(Pe,{}),error:({error:_})=>(0,x.jsx)(ae,{error:_,retry:f,cancelAndNavigateTo:E}),success:_=>(0,x.jsx)(he,{stateData:_.data,typeSettings:p})})};var P=l(g(),1);function ye(){let u=X(),{id:p}=j(),d=ee.customers;try{if(re(p))return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(te,{title:d.titles.edit,returnButton:{buttonProps:{onClick:()=>{u(v)}}}}),(0,P.jsx)(Te,{typeSettings:d,id:p})]})}catch{return(0,P.jsx)(oe,{error:Y,buttonProps:{label:Q,colorScheme:"green",onClick:()=>{u(E)}}})}}export{ye as default};
