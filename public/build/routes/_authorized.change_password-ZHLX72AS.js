import{a as I}from"/build/_shared/chunk-DMG3RFNF.js";import{a as l,b as H,c as B}from"/build/_shared/chunk-GSTZNXQ2.js";import{a as q}from"/build/_shared/chunk-XMOVTS3H.js";import"/build/_shared/chunk-3ESF4QSI.js";import{a as E}from"/build/_shared/chunk-ZZ5XYL3D.js";import{a as v}from"/build/_shared/chunk-WRWUGCP4.js";import{e as G,f as T,g as N,i as f,l as O}from"/build/_shared/chunk-R3EIFBBN.js";import{b as x}from"/build/_shared/chunk-ADLT376Z.js";import{a as _}from"/build/_shared/chunk-DVXB4GN2.js";import{b as D}from"/build/_shared/chunk-QDTJ5SNF.js";import{t as F}from"/build/_shared/chunk-XMQ6MK6E.js";import{G as g,Ja as $,Wb as A,bc as d,dc as R,ea as h,fa as y,gc as V,jb as b,na as u}from"/build/_shared/chunk-FXMINOMW.js";import{F as p,a as Z,d as P}from"/build/_shared/chunk-3PZF3L6F.js";import{e,h as t}from"/build/_shared/chunk-P3O6KQPX.js";t();t();t();t();var L=e(Z(),1);var W=e($(),1);var U=()=>{let[r,n]=(0,L.useState)(null);return{yupValidationSchema:O({old_password:f().required("Ingrese su contase\xF1a actual"),new_password:f().required("Ingrese su nueva contrase\xF1a").test("password","Formato de contrase\xF1a no v\xE1lido",s=>{if(s!=""&&s!=null){let i=H(s);return W.default.isEqual(r,i)||n(i),q(B,s)}return!0}),new_password_repeat:f().required("Repita su nueva contrase\xF1a").oneOf([N("new_password")],"Las contrase\xF1as deben coincidir")}).required(),passwordStatus:r}};var o=e(p(),1),X=()=>{let r=D(),n=b(),{yupValidationSchema:C,passwordStatus:s}=U(),{handleSubmit:i,control:c,reset:j,setError:k,formState:{errors:z,isSubmitting:J,isSubmitSuccessful:K}}=G({defaultValues:{old_password:"",new_password:"",new_password_repeat:""},resolver:T(C)}),m=K||J;return(0,o.jsx)("form",{noValidate:!0,onSubmit:i(async Q=>{let{new_password_repeat:ro,...Y}=Q;(await g(Y,r)).map({success:w=>{n({title:h,status:"success"}),r.authDispatch(new I(w.data.user)),r.navigate(u)},error:w=>{n({title:y,status:"error"}),k("root",{message:w.info.error_description})}})}),children:(0,o.jsxs)(R,{children:[(0,o.jsx)(v,{errors:z}),(0,o.jsx)(_,{children:(0,o.jsxs)(A,{templateColumns:"1fr",alignItems:"start",gap:4,children:[(0,o.jsx)(d,{children:(0,o.jsx)(l,{fieldProps:{name:"old_password",id:"old_password"},formControlInnerProps:{label:"Contrase\xF1a Actual"},disableForm:m,control:c})}),(0,o.jsx)(d,{children:(0,o.jsx)(l,{fieldProps:{name:"new_password",id:"new_password"},formControlInnerProps:{label:"Nueva contrase\xF1a"},passwordStatus:s,disableForm:m,control:c})}),(0,o.jsx)(d,{children:(0,o.jsx)(l,{fieldProps:{name:"new_password_repeat",id:"new_password_repeat"},formControlInnerProps:{label:"Confirmar nueva contrase\xF1a"},disableForm:m,control:c})})]})}),(0,o.jsx)(_,{children:(0,o.jsx)(E,{isLoading:m})})]})})};var a=e(p(),1);function M(){let r=P();return(0,a.jsxs)(V,{maxW:"2xl",sx:{my:4},children:[(0,a.jsx)(x,{title:F,returnButton:{buttonProps:{onClick:()=>{r(u)}}}}),(0,a.jsx)(X,{})]})}export{M as default};
