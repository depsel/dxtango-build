import{a as Q,b as d,c as ee,d as oe,e as re}from"/build/_shared/chunk-NFKU4TTD.js";import{a as H}from"/build/_shared/chunk-R6FVO33V.js";import{a as $}from"/build/_shared/chunk-EZL2WUID.js";import{a as L}from"/build/_shared/chunk-LLZR2HLF.js";import{a as f}from"/build/_shared/chunk-KB5W3GB4.js";import{a as Y}from"/build/_shared/chunk-6LFQOQ2J.js";import{a as W}from"/build/_shared/chunk-ZFJAHTR3.js";import{e as J,f as K,h as R,j as Z}from"/build/_shared/chunk-SD3IP6KZ.js";import"/build/_shared/chunk-GITJ6O4B.js";import{a as U}from"/build/_shared/chunk-NJVWKU4O.js";import{a as z}from"/build/_shared/chunk-73RUDRVX.js";import{b as M}from"/build/_shared/chunk-RT3FOPV3.js";import{a as j,b as q,c as X}from"/build/_shared/chunk-BU4ZWQ52.js";import{a as w}from"/build/_shared/chunk-ZYICKRUE.js";import"/build/_shared/chunk-4OZBTOE3.js";import{a as T,b as F,c as V}from"/build/_shared/chunk-CL72YJJR.js";import{Aa as B,C as N,aa as I,ja as we,jb as D,mb as O,ob as p,pb as o,qb as _,rb as A,sb as h,vb as S}from"/build/_shared/chunk-AKWCNMIR.js";import{c as k}from"/build/_shared/chunk-N2MSTKAL.js";import{a as E,b as u}from"/build/_shared/chunk-J7TISYNY.js";import{e as n,h as s}from"/build/_shared/chunk-AXWLPIOK.js";s();s();s();s();var ie=n(E(),1);s();var te=n(E(),1);var ae=n(we(),1);var se=()=>{let[i,a]=(0,te.useState)(null),P=Z({password:R().required("Ingrese una contrase\xF1a").test("password","Formato de contrase\xF1a no v\xE1lido",l=>{if(l!=""&&l!=null){let m=oe(l);return ae.default.isEqual(i,m)||a(m),$(re,l)}return!0}),password_repeat:R().required("Repita la contrase\xF1a").test("passwords-match","Las contrase\xF1as no coinciden",function(l){return this.parent.password===l})}).required();return{yupValidationSchema:ee.concat(P),passwordStatus:i}};var e=n(u(),1),ne=i=>{let{typeSettings:a}=i,P=q(),x=B(),{yupValidationSchema:l,passwordStatus:m}=se(),{state:b,result:me}=M({url:z,fieldsMap:{label:"name",value:"id"}}),{state:g,result:ce}=a.api.getRelation(),{handleSubmit:ue,control:t,setError:fe,resetField:_e,watch:Se,formState:{errors:Pe,isSubmitting:be,isSubmitSuccessful:ge}}=J({defaultValues:{habilitado_en_dxt:!0,puede_crear_pedido:!0,puede_editar_pedido:!0,ver_pedidos_cumplidos:!0,ver_sin_precio:!1,mostrar_mensaje_de_advertencia:!1,puede_anular_pedido:!1,borrar_pedido_al_anular:!1,aprobar_pedido_al_crear:!1},resolver:K(l)}),C=Se("puede_anular_pedido");(0,ie.useEffect)(()=>{C===!1&&_e("borrar_pedido_al_anular",{defaultValue:!1})},[C]);let r=ge||be;return(0,e.jsx)("form",{noValidate:!0,onSubmit:ue(async G=>{let{password_repeat:Ge,...v}=G;v.email===""&&delete v.email;let Ce=v,Ie=await a.api.post(Ce,P);await X({toast:x,result:Ie,messages:{success:{title:"Usuario creado"},error:{title:"Ha ocurrido un error"},loading:{title:"Creando usuario"}}}).then(()=>{P.navigate(I)}).catch(he=>{fe("root",{message:he})})}),children:(0,e.jsxs)(A,{children:[(0,e.jsx)(W,{errors:Pe}),(0,e.jsx)(w,{children:(0,e.jsxs)(D,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"center",gap:4,children:[(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(_,{size:"sm",textTransform:"uppercase",children:"Informaci\xF3n del Vendedor"})}),(0,e.jsxs)(o,{colSpan:{md:2},children:[(0,e.jsx)(L,{fieldProps:{name:"tango_id",placeholder:a.tangoRelatedFields?.placeholder,options:ce,noOptionsMessage(G){return a.tangoRelatedFields?.empty},isSearchable:!0,selectedOptionStyle:"check",isLoading:g instanceof T},formControlProps:{isDisabled:r||!(g instanceof V)},formControlInnerProps:{label:a.tangoRelatedFields?.label},control:t}),g instanceof F&&(0,e.jsx)(H,{error:g.errorOrNull().error})]}),(0,e.jsx)(o,{children:(0,e.jsx)(f,{fieldProps:{name:"username",id:"username",type:"text"},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Nombre de Usuario"},control:t})}),(0,e.jsx)(o,{children:(0,e.jsx)(f,{fieldProps:{name:"email",id:"email",type:"text",inputMode:"email"},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Correo electr\xF3nico"},control:t})}),(0,e.jsx)(o,{children:(0,e.jsx)(f,{fieldProps:{name:"password",id:"password",type:"password"},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Contrase\xF1a"},control:t})}),(0,e.jsx)(o,{children:(0,e.jsx)(f,{fieldProps:{name:"password_repeat",id:"password_repeat",type:"password"},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Confirmaci\xF3n de Contrase\xF1a"},control:t})}),m!=null&&(0,e.jsxs)(o,{colSpan:{md:2},children:[m.tooShort&&(0,e.jsx)(h,{colorScheme:"red",children:"Contrase\xF1a muy corta"}),m.tooLong&&(0,e.jsx)(h,{colorScheme:"red",children:"Contrase\xF1a muy larga"}),m.invalidCharsPresent&&(0,e.jsx)(h,{colorScheme:"red",children:"Evite caracteres no v\xE1lidos"})]}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(S,{})}),(0,e.jsxs)(o,{colSpan:{md:2},children:[(0,e.jsx)(L,{fieldProps:{name:"perfil_facturacion_id",placeholder:"Seleccione un perfil",options:me,noOptionsMessage(G){return"No hay perfiles disponibles"},isLoading:b instanceof T,selectedOptionStyle:"check"},formControlProps:{isDisabled:r||!(b instanceof V)},formControlInnerProps:{label:"Perfil de facturaci\xF3n"},control:t}),b instanceof F&&(0,e.jsx)(H,{error:b.errorOrNull().error})]}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(S,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(_,{size:"sm",textTransform:"uppercase",children:"Estado"})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(Q,{fieldProps:{name:"habilitado_en_dxt",options:[{value:!0,label:"Establecido en Tango"},{value:!1,label:"Deshabilitado"}]},formControlProps:{isDisabled:r},radioProps:{size:{base:"sm",sm:"md"}},control:t})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(S,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(_,{size:"sm",textTransform:"uppercase",children:"Comunicaci\xF3n"})}),(0,e.jsx)(o,{children:(0,e.jsx)(d,{fieldProps:{name:"mostrar_mensaje_de_advertencia",id:"mostrar_mensaje_de_advertencia"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Mostrar mensaje de advertencia"},control:t})})]})}),(0,e.jsx)(w,{children:(0,e.jsxs)(D,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"center",gap:4,children:[(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(_,{size:"sm",textTransform:"uppercase",children:"Pedidos"})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsxs)(O,{spacing:4,direction:{base:"column"},children:[(0,e.jsx)(p,{spacing:4,children:(0,e.jsx)(d,{fieldProps:{name:"puede_crear_pedido",id:"puede_crear_pedido"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Puede crear pedidos"},control:t})}),(0,e.jsx)(p,{spacing:4,children:(0,e.jsx)(d,{fieldProps:{name:"puede_editar_pedido",id:"puede_editar_pedido"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Puede editar pedidos"},control:t})}),(0,e.jsx)(p,{spacing:4,children:(0,e.jsx)(d,{fieldProps:{name:"puede_anular_pedido",id:"puede_anular_pedido"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Puede anular pedidos"},control:t})}),(0,e.jsx)(p,{spacing:4,children:(0,e.jsx)(d,{fieldProps:{name:"borrar_pedido_al_anular",id:"borrar_pedido_al_anular"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Borrar pedido al anular"},control:t,watch:{isDisabled:C===!1,...C===!1&&{isChecked:!1}}})}),(0,e.jsx)(p,{spacing:4,children:(0,e.jsx)(d,{fieldProps:{name:"aprobar_pedido_al_crear",id:"aprobar_pedido_al_crear"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Los pedidos se aprueban al crearlos"},control:t})}),(0,e.jsx)(p,{spacing:4,children:(0,e.jsx)(d,{fieldProps:{name:"ver_pedidos_cumplidos",id:"ver_pedidos_cumplidos"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Puede ver los pedidos cumplidos"},control:t})}),(0,e.jsx)(p,{spacing:4,children:(0,e.jsx)(d,{fieldProps:{name:"ver_sin_precio",id:"ver_sin_precio"},formControlProps:{width:"auto",isDisabled:r},formControlInnerProps:{label:"Puede ver art\xEDculos sin precios"},control:t})})]})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(S,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(f,{fieldProps:{name:"dia_de_entrega",id:"dia_de_entrega",type:"number",inputMode:"tel"},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Tiempo de entrega de pedidos",helperText:"Expresado en d\xEDas"},control:t})}),(0,e.jsx)(o,{})]})}),(0,e.jsx)(w,{children:(0,e.jsx)(Y,{buttonActionText:"Guardar",isLoading:r,buttonCancelUrl:a.cancelButtonNavigateTo})})]})})};var le=n(u(),1),de=i=>{let{typeSettings:a}=i;return(0,le.jsx)(ne,{typeSettings:a})};var c=n(u(),1);function pe(){let i=U.vendors,a=k();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(j,{title:i.titles.create,actionButton:{label:N,buttonProps:{colorScheme:"gray",onClick:()=>{a(I)}}}}),(0,c.jsx)(de,{typeSettings:i})]})}export{pe as default};
