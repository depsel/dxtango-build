import{a as L,c as ie,e as ne}from"/build/_shared/chunk-7SVGYDSH.js";import{a as E}from"/build/_shared/chunk-BR2XK6R6.js";import{a as w}from"/build/_shared/chunk-EZL2WUID.js";import{a as c}from"/build/_shared/chunk-6I6UQKKH.js";import{a as oe}from"/build/_shared/chunk-DFN4Z3JB.js";import{a as re}from"/build/_shared/chunk-TWC63WIN.js";import{d as W,e as Z,f as ee,g as te,h as u,i as A,j as se}from"/build/_shared/chunk-SD3IP6KZ.js";import{a as m,b as F}from"/build/_shared/chunk-CLUXRPU5.js";import{a as J}from"/build/_shared/chunk-Y6HZBLWM.js";import{a as $,b as K,c as Q}from"/build/_shared/chunk-MZS6CHAS.js";import{a as h}from"/build/_shared/chunk-VTMMMSTK.js";import{d as Y}from"/build/_shared/chunk-SWYAOCMN.js";import{Aa as B,Da as z,H as _,Qa as S,Wa as o,Xa as j,Ya as b,a as N,ab as f,bb as X,e as V,la as O,za as U}from"/build/_shared/chunk-GMXXJD7U.js";import"/build/_shared/chunk-MUTVBZ6W.js";import{c as k}from"/build/_shared/chunk-OHSBC2MA.js";import"/build/_shared/chunk-E43VAFT6.js";import{b as p}from"/build/_shared/chunk-J7TISYNY.js";import{e as d,h as s}from"/build/_shared/chunk-AXWLPIOK.js";s();s();s();s();var y=class extends V{validate(l){let i=l;if(typeof i=="string"&&(i=i.trim().toLowerCase(),N(i)))return i;this.throwError(l)}};s();var r=d(p(),1),ae=()=>(0,r.jsx)(b,{width:"full",sx:{mt:8,mb:4},children:(0,r.jsxs)(S,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"center",gap:4,children:[(0,r.jsx)(o,{children:(0,r.jsx)(m,{})}),(0,r.jsx)(o,{children:(0,r.jsx)(m,{})}),(0,r.jsx)(o,{children:(0,r.jsx)(m,{})}),(0,r.jsx)(o,{children:(0,r.jsx)(m,{})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(f,{})}),(0,r.jsx)(o,{children:(0,r.jsx)(m,{})}),(0,r.jsx)(o,{children:(0,r.jsx)(m,{})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(f,{})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(m,{})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(F,{})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(f,{})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(m,{})}),(0,r.jsx)(o,{colSpan:{md:2},children:(0,r.jsx)(F,{})}),(0,r.jsx)(o,{children:(0,r.jsx)(m,{})}),(0,r.jsx)(o,{children:(0,r.jsx)(m,{})})]})});s();s();var C=d(p(),1),me=n=>{let{fieldProps:l,formControlProps:i,formControlInnerProps:T,control:G}=n,{name:a}=l,{text:R,helperText:P,helperAction:D}=T||{},{field:{ref:M,onChange:v,value:t},fieldState:{invalid:q},formState:{errors:H}}=W({name:l.name,control:G});return(0,C.jsxs)(U,{...i,isInvalid:q,ref:M,children:[(0,C.jsxs)(X,{alignItems:"center",children:[(0,C.jsx)(z,{...l,onChange:v,isChecked:t,children:R}),D]}),P!=null&&(0,C.jsx)(B,{children:P})]})};s();var le=se({smtp_host:u().required("Ingrese el host SMTP").test("valid-host","Ingrese un host SMTP v\xE1lido",n=>w(y,n)),smtp_username:u().required("Ingrese el usuario SMTP"),smtp_password:u().required("Ingrese la contrase\xF1a SMTP"),smtp_port:A().required("Ingrese el puerto SMTP").typeError("Ingrese un n\xFAmero de puerto SMTP v\xE1lido").test("is-port","Ingrese un puerto SMTP v\xE1lido",n=>w(L,n)),smtp_use_tls:te().required(),auth_expiration_days:A().min(1,`El tiempo de espera debe ser mayor a ${1}`).max(365,`El tiempo de espera debe ser menor a ${365}`).required("Ingrese el tiempo de espera para logout").typeError("Ingrese el tiempo de espera para logout"),admin_email:u().required("Ingrese el correo electr\xF3nico del Administrador").email("Ingrese un correo electr\xF3nico v\xE1lido"),user_warning_message_title:u().required("Ingrese el t\xEDtulo del mensaje de advertencia"),user_warning_message_content:u().required("Ingrese el contenido del mensaje de advertencia"),user_disabled_message_title:u().required("Ingrese el t\xEDtulo del mensaje de inhabilitaci\xF3n"),user_disabled_message_content:u().required("Ingrese el contenido del mensaje de inhabilitaci\xF3n")}).required();var e=d(p(),1),de=n=>{let{stateData:l}=n,i=K(),T=O(),{handleSubmit:G,control:a,reset:R,setError:P,formState:{errors:D,isSubmitting:M,isSubmitSuccessful:v}}=Z({defaultValues:l,resolver:ee(le)}),t=v||M;return(0,e.jsx)("form",{noValidate:!0,onSubmit:G(async H=>{let ue=await ne(H,i);await Q({toast:T,result:ue,messages:{success:{title:"Configuraciones actualizadas"},error:{title:"Ha ocurrido un error"},loading:{title:"Actualizando configuraciones"}}}).then(()=>{i.navigate(_)}).catch(fe=>{P("root",{message:fe})})}),children:(0,e.jsxs)(b,{children:[(0,e.jsx)(re,{errors:D}),(0,e.jsx)(h,{children:(0,e.jsxs)(S,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"center",gap:4,children:[(0,e.jsx)(o,{children:(0,e.jsx)(c,{fieldProps:{name:"smtp_host",id:"smtp_host",type:"text",isDisabled:t},formControlProps:{isDisabled:t},formControlInnerProps:{label:"Hostname SMTP"},control:a})}),(0,e.jsx)(o,{children:(0,e.jsx)(c,{fieldProps:{name:"smtp_username",id:"smtp_username",type:"text",isDisabled:t},formControlProps:{isDisabled:t},formControlInnerProps:{label:"Usuario SMTP"},control:a})}),(0,e.jsx)(o,{children:(0,e.jsx)(c,{fieldProps:{name:"smtp_password",id:"smtp_password",type:"text",isDisabled:t},formControlProps:{isDisabled:t},formControlInnerProps:{label:"Contrase\xF1a SMTP"},control:a})}),(0,e.jsx)(o,{children:(0,e.jsx)(c,{fieldProps:{name:"smtp_port",id:"smtp_port",type:"number",inputMode:"tel",htmlSize:5,maxLength:5,width:"auto",isDisabled:t},formControlProps:{isDisabled:t},formControlInnerProps:{label:"Puerto SMTP"},control:a})}),(0,e.jsx)(o,{children:(0,e.jsx)(me,{control:a,fieldProps:{id:"smtp_use_tls",name:"smtp_use_tls"},formControlInnerProps:{text:"Usar TLS"}})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(f,{})}),(0,e.jsx)(o,{children:(0,e.jsx)(c,{fieldProps:{name:"auth_expiration_days",id:"auth_expiration_days",type:"number",inputMode:"tel",htmlSize:5,maxLength:5,width:"auto",isDisabled:t},formControlProps:{isDisabled:t},formControlInnerProps:{label:"Tiempo de espera para logout",helperText:"Expresado en d\xEDas"},control:a})}),(0,e.jsx)(o,{children:(0,e.jsx)(c,{fieldProps:{name:"admin_email",id:"admin_email",type:"text",inputMode:"email",htmlSize:30,width:"auto",isDisabled:t},formControlProps:{isDisabled:t},formControlInnerProps:{label:"Correo electr\xF3nico Administrador"},control:a})})]})}),(0,e.jsx)(h,{children:(0,e.jsxs)(S,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"center",gap:4,children:[(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(j,{size:"sm",textTransform:"uppercase",children:"Comunicaci\xF3n"})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(c,{fieldProps:{name:"user_warning_message_title",id:"user_warning_message_title",type:"text",isDisabled:t},formControlProps:{isDisabled:t},formControlInnerProps:{label:"T\xEDtulo del mensaje de advertencia"},control:a})}),(0,e.jsx)(o,{colSpan:{md:2},children:"Contenido del mensaje de advertencia"}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(E,{fieldProps:{name:"user_warning_message_content",id:"user_warning_message_content",isDisabled:t},formControlProps:{isDisabled:t},control:a})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(f,{})}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(c,{fieldProps:{name:"user_disabled_message_title",id:"user_disabled_message_title",type:"text",isDisabled:t},formControlProps:{isDisabled:t},formControlInnerProps:{label:"T\xEDtulo del mensaje de inhabilitaci\xF3n"},control:a})}),(0,e.jsx)(o,{colSpan:{md:2},children:"Contenido del mensaje de inhabilitaci\xF3n"}),(0,e.jsx)(o,{colSpan:{md:2},children:(0,e.jsx)(E,{fieldProps:{name:"user_disabled_message_content",id:"user_disabled_message_content",isDisabled:t},formControlProps:{isDisabled:t},control:a})})]})}),(0,e.jsx)(h,{children:(0,e.jsx)(oe,{isLoading:t})})]})})};var x=d(p(),1),pe=()=>{let{state:n,retry:l}=Y({url:ie,silent:!0});return n.map({loading:i=>(0,x.jsx)(ae,{}),error:({error:i})=>(0,x.jsx)(J,{error:i,retry:l,cancelAndNavigateTo:_}),success:i=>(0,x.jsx)(de,{stateData:i.data})})};var I=d(p(),1);function ce(){let n=k();return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)($,{title:"Correo saliente y sesiones",actionButton:{label:"Cancelar",buttonProps:{colorScheme:"gray",onClick:()=>{n(_)}}}}),(0,I.jsx)(pe,{})]})}export{ce as default};
