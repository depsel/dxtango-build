import{a as Y,b as ee}from"/build/_shared/chunk-A4GO4GD2.js";import{b as Z,c as J,r as K,s as Q}from"/build/_shared/chunk-6CXKIKKN.js";import{$ as P,Ca as X,Eb as x,Gb as F,Ib as M,Jb as G,Kb as W,Sa as T,ba as V,j as D,jc as I,na as B,oa as z,p as U,q as S,qa as $,s as h,t as k,tb as q,wa as j,wb as _,z as H,zb as v}from"/build/_shared/chunk-JQLUC77E.js";import{c as N,d as R}from"/build/_shared/chunk-MJPS7W4Y.js";import{a as g,b as f}from"/build/_shared/chunk-IS2TAHEU.js";import{c as C,e as s,h as i}from"/build/_shared/chunk-P3O6KQPX.js";var ae=C((Ge,ie)=>{"use strict";i();function ve(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var y=ve(g()),Ie=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ee=function(e,r){var t={};for(var o in e)r.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ne=function(r){var t=r.color,o=t===void 0?"currentColor":t,a=r.size,c=a===void 0?24:a,m=r.children,p=Ee(r,["color","size","children"]),u="mdi-icon "+(p.className||"");return y.createElement("svg",Ie({},p,{className:u,width:c,height:c,fill:o,viewBox:"0 0 24 24"}),y.createElement("path",{d:"M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.58L17 17L22 12M4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z"}))},Oe=y.memo?y.memo(ne):ne;ie.exports=Oe});var ue=C((Ze,se)=>{"use strict";i();function ye(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var L=ye(g()),Le=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ae=function(e,r){var t={};for(var o in e)r.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ce=function(r){var t=r.color,o=t===void 0?"currentColor":t,a=r.size,c=a===void 0?24:a,m=r.children,p=Ae(r,["color","size","children"]),u="mdi-icon "+(p.className||"");return L.createElement("svg",Le({},p,{className:u,width:c,height:c,fill:o,viewBox:"0 0 24 24"}),L.createElement("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"}))},Se=L.memo?L.memo(ce):ce;se.exports=Se});i();var te=s(g(),1);i();var E=class extends k{constructor(t,o){super();this.currentUserInfo=t;this.errorCallback=o}async run(t,o,a,c){if(!(t instanceof h))throw new D(899e3,"Must be logged in");let m=U();if(m==null||t.authToken!==m){o(new S);return}(await H(t.authToken,a,!0)).map({error:u=>{let A=u.error;z(A.status)&&o(new S)},success:u=>{let A=t.userInfo,ge=t.authToken,b=u.data.user,w=u.data.auth_token;(ge!==w||A.timestamp_modificacion!==b.timestamp_modificacion)&&o(new h(w,b))}})}};var O=s(f(),1),Pe=e=>{let{children:r}=e,{state:t,dispatch:o}=I(),a=R(),c=N();if((0,te.useEffect)(()=>{t instanceof h?(async()=>{await o(new E(t.userInfo))})().catch(m=>{}):t.isDisconnectedAndNotRedirecting()&&$(a)},[c,t.constructor.name]),t.isLoggedIn())return(0,O.jsx)(O.Fragment,{children:r})};i();i();var oe=s(g(),1);function Re(){return()=>{}}function re(){return(0,oe.useSyncExternalStore)(Re,()=>!0,()=>!1)}var d=s(f(),1);function Xe({children:e,fallback:r=null}){return re()?(0,d.jsx)(d.Fragment,{children:e}):(0,d.jsx)(d.Fragment,{children:r})}i();var de=s(ae(),1),he=s(ue(),1);i();i();var le="Cliente",me="Vendedor",pe="Administrador";function fe(e){switch(e){case 0:return le;case 1:return me;default:return pe}}var n=s(f(),1),lt=()=>{let{state:e,dispatch:r}=I(),t=R(),o=e.userOrNull(),a=o?.role!=null?fe(o?.role):"",c=o?.screen_name.trim()??"",m=e.isAdmin()?c:`${a} ${c}`;return(0,n.jsx)(v,{bg:j("gray.100","gray.900"),sx:{px:4},children:(0,n.jsxs)(x,{h:16,alignItems:"center",justifyContent:"space-between",children:[(0,n.jsxs)(_,{spacing:4,alignItems:"center",children:[(0,n.jsxs)(F,{isLazy:!0,id:"menu",children:[(0,n.jsx)(W,{as:T,"aria-label":Z,icon:(0,n.jsx)(he.default,{}),variant:"outline"}),(0,n.jsxs)(G,{rootProps:{zIndex:2e3},children:[(0,n.jsx)(M,{onClick:()=>{t(P)},children:K}),e.isAdmin()&&(0,n.jsx)(M,{onClick:()=>{t(V)},children:Q})]})]}),(0,n.jsx)(v,{children:(0,n.jsx)(ee,{width:"80px",alt:""})})]}),(0,n.jsx)(x,{alignItems:"center",children:(0,n.jsxs)(_,{spacing:4,children:[(0,n.jsx)(v,{display:{base:"none",md:"block"},children:(0,n.jsx)(q,{children:m})}),(0,n.jsx)(T,{"aria-label":J,onClick:async()=>{await r(new B)},isRound:!0,icon:(0,n.jsx)(X,{as:de.default})}),(0,n.jsx)(Y,{})]})})]})})};export{Pe as a,Xe as b,lt as c};
