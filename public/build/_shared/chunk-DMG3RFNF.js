import{E as l,Ga as d,o as m,u,v as n,x as i,y as f}from"/build/_shared/chunk-FXMINOMW.js";import{h as p}from"/build/_shared/chunk-P3O6KQPX.js";p();var k=class extends f{constructor(o,r){super();this.currentUserInfo=o;this.errorCallback=r}async run(o,r,y,A){if(!(o instanceof i))throw new m(899e3,"Must be logged in");let s=u();if(s==null||o.authToken!==s){r(new n);return}(await l(o.authToken,y,!0)).map({error:e=>{let t=e.info;d(t.status)&&r(new n)},success:e=>{let t=o.userInfo,T=o.authToken,c=e.data.user,a=e.data.auth_token;(T!==a||t.timestamp_modificacion!==c.timestamp_modificacion)&&r(new i(a,c))}})}};export{k as a};
