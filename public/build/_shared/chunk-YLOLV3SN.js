import{C as u,E as n,G as i,H as f,N as l,Ta as d,w as m}from"/build/_shared/chunk-DP2TJOZR.js";import{h as p}from"/build/_shared/chunk-P3O6KQPX.js";p();var k=class extends f{constructor(o,r){super();this.currentUserInfo=o;this.errorCallback=r}async run(o,r,y,A){if(!(o instanceof i))throw new m(899e3,"Must be logged in");let s=u();if(s==null||o.authToken!==s){r(new n);return}(await l(o.authToken,y,!0)).map({error:e=>{let t=e.info;d(t.status)&&r(new n)},success:e=>{let t=o.userInfo,T=o.authToken,c=e.data.user,a=e.data.auth_token;(T!==a||t.timestamp_modificacion!==c.timestamp_modificacion)&&r(new i(a,c))}})}};export{k as a};
