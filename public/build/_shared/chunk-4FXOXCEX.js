import{a as ie,b as ae}from"/build/_shared/chunk-CJRJJTGL.js";import{b as ee,c as te,u as oe,v as re,w as ne,x as se}from"/build/_shared/chunk-7FZKV7GZ.js";import{$b as d,Ea as $,Ic as T,Mb as J,Pb as D,Sb as h,Ua as W,Va as X,Wa as q,Xa as j,Xb as E,Zb as K,ac as Q,bc as Y,ca as H,cc as U,da as P,ea as B,gb as Z,ha as V,j as v,p as L,q as _,s as g,t as N,ta as z,ua as F,wa as G,z as w}from"/build/_shared/chunk-X7PKD636.js";import{c as k,d as S}from"/build/_shared/chunk-DZKJSWIA.js";import{a as M,b as c}from"/build/_shared/chunk-IS2TAHEU.js";import{c as Te,e as i,h as s}from"/build/_shared/chunk-P3O6KQPX.js";var fe=Te((je,pe)=>{"use strict";s();function Oe(o){return o&&typeof o=="object"&&"default"in o?o.default:o}var x=Oe(M()),xe=Object.assign||function(o){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=e[r])}return o},ye=function(o,n){var e={};for(var r in o)n.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);return e},me=function(n){var e=n.color,r=e===void 0?"currentColor":e,a=n.size,l=a===void 0?24:a,p=n.children,A=ye(n,["color","size","children"]),f="mdi-icon "+(A.className||"");return x.createElement("svg",xe({},A,{className:f,width:l,height:l,fill:r,viewBox:"0 0 24 24"}),x.createElement("path",{d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"}))},Me=x.memo?x.memo(me):me;pe.exports=Me});s();var ce=i(M(),1);s();var I=class extends N{constructor(e,r){super();this.currentUserInfo=e;this.errorCallback=r}async run(e,r,a,l){if(!(e instanceof g))throw new v(899e3,"Must be logged in");let p=L();if(p==null||e.authToken!==p){r(new _);return}(await w(e.authToken,a,!0)).map({error:f=>{let y=f.error;F(y.status)&&r(new _)},success:f=>{let y=e.userInfo,Se=e.authToken,C=f.data.user,b=f.data.auth_token;(Se!==b||y.timestamp_modificacion!==C.timestamp_modificacion)&&r(new g(b,C))}})}};var O=i(c(),1),Be=o=>{let{children:n}=o,{state:e,dispatch:r}=T(),a=S(),l=k();if((0,ce.useEffect)(()=>{if(e instanceof g){r(new I(e.userInfo));return}e.isDisconnectedAndNotRedirecting()&&G(a)},[l,e.constructor.name]),e.isLoggedIn())return(0,O.jsx)(O.Fragment,{children:n})};s();s();var ue=i(M(),1);function Ie(){return()=>{}}function le(){return(0,ue.useSyncExternalStore)(Ie,()=>!0,()=>!1)}var R=i(c(),1);function We({children:o,fallback:n=null}){return le()?(0,R.jsx)(R.Fragment,{children:o}):(0,R.jsx)(R.Fragment,{children:n})}s();var Ee=i(fe(),1);s();s();var de="Cliente",Re="Vendedor",Ae="Administrador";function ge(o){switch(o){case 0:return de;case 1:return Re;default:return Ae}}s();var m=i(c(),1),he=o=>{let{type:n,title:e,content:r}=o;return(0,m.jsxs)(j,{status:n,sx:{justifyContent:"center"},children:[(0,m.jsx)(X,{sx:{boxSize:{base:8,md:5}}}),(0,m.jsxs)(E,{flexDirection:{base:"column",md:"row"},children:[(0,m.jsx)(q,{children:e}),(0,m.jsx)(W,{children:r})]})]})};var t=i(c(),1),ft=()=>{let{state:o,dispatch:n}=T(),e=S(),r=o.userOrNull(),a=r?.message,l=r?.role!=null?ge(r?.role):"",p=r?.screen_name.trim()??"",A=o.isAdmin()?p:`${l} ${p}`;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h,{bg:$("gray.100","gray.900"),sx:{px:4},children:(0,t.jsxs)(E,{h:16,alignItems:"center",justifyContent:"space-between",children:[(0,t.jsxs)(D,{spacing:4,alignItems:"center",children:[(0,t.jsxs)(K,{isLazy:!0,id:"menu",children:[(0,t.jsx)(Y,{as:Z,"aria-label":ee,icon:(0,t.jsx)(Ee.default,{}),variant:"outline"}),(0,t.jsxs)(Q,{rootProps:{zIndex:2e3},children:[(0,t.jsx)(d,{onClick:()=>{e(P)},children:oe}),!o.isAdmin()&&(0,t.jsx)(d,{onClick:()=>{e(B)},children:re}),(0,t.jsx)(U,{}),o.isAdmin()&&(0,t.jsx)(d,{onClick:()=>{e(V)},children:ne}),(0,t.jsx)(d,{onClick:()=>{e(H)},children:se}),(0,t.jsx)(U,{}),(0,t.jsx)(d,{onClick:async()=>{await n(new z)},children:te})]})]}),(0,t.jsx)(h,{children:(0,t.jsx)(ae,{height:"20px",alt:""})})]}),(0,t.jsx)(E,{alignItems:"center",children:(0,t.jsxs)(D,{spacing:4,children:[(0,t.jsx)(h,{display:{base:"none",md:"block"},children:(0,t.jsx)(J,{children:A})}),(0,t.jsx)(ie,{})]})})]})}),a!=null&&a!=null&&(0,t.jsx)(he,{...a}),(0,t.jsx)(h,{})]})};export{Be as a,We as b,ft as c};
