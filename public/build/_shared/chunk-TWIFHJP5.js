import{I as A,Ua as m,ed as y,x,y as S,z as d}from"/build/_shared/chunk-DP2TJOZR.js";import{a as R}from"/build/_shared/chunk-3PZF3L6F.js";import{e as F,h as p}from"/build/_shared/chunk-P3O6KQPX.js";p();var b=F(R(),1);p();var h=F(R(),1);var D=class{constructor(t){this.originalRequest=t}mapOrElse(t){let{loading:e,success:r,error:s,orElse:c}=t;return this instanceof n&&e?e(this):this instanceof E&&r?r(this):this instanceof a&&s?s(this):c(this)}map(t){let{loading:e,success:r,error:s}=t;return this.mapOrElse({loading:e,success:r,error:s,orElse:c=>{throw Error("Invalid useAxiosFetch state")}})}isLoading(){return this instanceof n}isSuccess(){return this instanceof E}isError(){return this instanceof a}errorOrNull(){return this instanceof a?this.error:null}callIfLoading(t){return this instanceof n?t(this)??!1:!1}callIfSuccess(t){return this instanceof E?t(this)??!1:!1}callIfError(t){return this instanceof a?t(this)??!1:!1}},n=class extends D{constructor(t){super(t)}},a=class extends D{constructor(e,r){super(r);this.error=e}},E=class extends D{constructor(e,r){super(r);this.data=e}};function g(i,...t){let[e,r]=(0,h.useState)(new n(i)),s=async()=>{r(new n(e.originalRequest)),await l()},c=async()=>{e.isSuccess()||r(new n(e.originalRequest)),await l()},l=async()=>{let u=e.originalRequest;try{let o=await S(u),T=o?.data?.data??o?.data;r(new E(T,u))}catch(o){if(o instanceof x){let T=o,[f]=t,q=f?f(T):T,w=new a(q,u);r(w)}else throw o}};return(0,h.useEffect)(()=>{l()},[]),{state:e,reload:c,retry:s}}function _(i){let t=y(),e=t.retryCallback,r=A(t,i),{state:s,retry:c,reload:l}=g(r,u=>d(u));return(0,b.useEffect)(()=>{(async()=>{if((i?.silent??!1)||!(s instanceof a))return;let o=s.error;await m(t,o.status)||e&&await e({message:o.error_description})&&c()})()},[s]),{state:s,retry:c,reload:l}}export{n as a,a as b,E as c,_ as d};
