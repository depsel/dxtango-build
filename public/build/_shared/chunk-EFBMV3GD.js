import{Ob as m,ba as A,k as R,l as x,m as S,u as d}from"/build/_shared/chunk-DDQFO3X3.js";import{a as F}from"/build/_shared/chunk-J7TISYNY.js";import{e as f,h as D}from"/build/_shared/chunk-AXWLPIOK.js";D();var g=f(F(),1);D();var p=f(F(),1);var l=class{constructor(t){this.originalRequest=t}mapOrElse(t){let{loading:r,success:e,error:s,orElse:i}=t;return this instanceof c&&r?r(this):this instanceof u&&e?e(this):this instanceof a&&s?s(this):i(this)}map(t){let{loading:r,success:e,error:s}=t;return this.mapOrElse({loading:r,success:e,error:s,orElse:i=>{throw Error("Invalid useAxiosFetch state")}})}isLoading(){return this instanceof c}isSuccess(){return this instanceof u}isError(){return this instanceof a}errorOrNull(){return this instanceof a?this.error:null}callIfLoading(t){return this instanceof c?t(this)??!1:!1}callIfSuccess(t){return this instanceof u?t(this)??!1:!1}callIfError(t){return this instanceof a?t(this)??!1:!1}},c=class extends l{constructor(t){super(t)}},a=class extends l{constructor(r,e){super(e);this.error=r}},u=class extends l{constructor(r,e){super(e);this.data=r}};function y(n,...t){let[r,e]=(0,p.useState)(new c(n)),s=async()=>{e(new c(r.originalRequest)),await i()},i=async()=>{let E=r.originalRequest;try{let o=await x(E),T=o?.data?.data??o?.data;e(new u(T,E))}catch(o){if(o instanceof R){let T=o,[h]=t,b=h?h(T):T,q=new a(b,E);e(q)}else throw o}};return(0,p.useEffect)(()=>{i()},[]),{state:r,retry:s}}function _(n){let t=m(),r=t.retryCallback,e=d(t,n),{state:s,retry:i}=y(e,E=>S(E));return(0,g.useEffect)(()=>{(async()=>{if((n?.silent??!1)||!(s instanceof a))return;let o=s.error;await A(t,o.status)||r&&await r({message:o.error})&&i()})()},[s]),{state:s,retry:i}}export{c as a,a as b,u as c,_ as d};
