import{a as co,b as mo,c as po}from"/build/_shared/chunk-E4OBBOOQ.js";import{a as Nt,b as Bt,d as kt,e as Gt,i as Wt,j as Ut,k as X}from"/build/_shared/chunk-POKPBQ7V.js";import{A as oo,B as ro,C as io,D as no,E as so,F as ao,G as lo,a as Vt,b as Ke,c as $t,g as Ye,h as Xt,q as qt,r as Zt,s as Kt,t as Yt,u as Jt,v as Qt,w as jt,y as eo,z as to}from"/build/_shared/chunk-E4E7CG7E.js";import{a as Ht}from"/build/_shared/chunk-TX7UJAHI.js";import{a as Qo,b as Ft,c as oe}from"/build/_shared/chunk-NMUZEQCE.js";import{a as Ce,b as Se}from"/build/_shared/chunk-NWY4V24C.js";import{j as vt,k as Jo}from"/build/_shared/chunk-777ZFYLV.js";import{a as Y,b as J}from"/build/_shared/chunk-XAZLMTM6.js";import{b as Oe}from"/build/_shared/chunk-MJXYRNXN.js";import{d as be}from"/build/_shared/chunk-EMOUVUCW.js";import{a as Ze,b as Ie}from"/build/_shared/chunk-QDTJ5SNF.js";import{b as zt,n as Lt,o as yt,u as Mt,v as wt}from"/build/_shared/chunk-XMQ6MK6E.js";import{$b as Et,Bb as _t,Gc as $e,Ic as Ee,Ja as ut,Jc as Ct,Kc as K,Lb as ne,Lc as Te,Mc as Ae,Na as ft,Nc as te,Oc as St,P as tt,Pc as Xe,Q as ot,Qa as fe,Qc as qe,Rb as Rt,S as rt,Sb as Pt,Ub as Dt,Vb as We,Vc as xt,Wb as k,X as it,Zb as Z,ac as Ue,bc as f,cc as z,dc as x,ec as Tt,fa as nt,fb as U,ga as Ge,gb as V,ia as ue,ib as $,ic as Ve,jb as ht,kc as At,la as st,mc as ee,nc as bt,oa as at,oc as Ot,pa as dt,pc as It,qa as lt,qc as he,ra as ct,rc as ge,sa as mt,ta as pt,tb as gt,vc as _e,wc as Re,xc as Pe,yc as De}from"/build/_shared/chunk-FXMINOMW.js";import{F as R,a as B}from"/build/_shared/chunk-3PZF3L6F.js";import{c as ke,e as a,h as d}from"/build/_shared/chunk-P3O6KQPX.js";var go=ke((_r,ho)=>{"use strict";d();function jo(o){return o&&typeof o=="object"&&"default"in o?o.default:o}var xe=jo(B()),er=Object.assign||function(o){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=e[r])}return o},tr=function(o,t){var e={};for(var r in o)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);return e},fo=function(t){var e=t.color,r=e===void 0?"currentColor":e,n=t.size,l=n===void 0?24:n,g=t.children,h=tr(t,["color","size","children"]),u="mdi-icon "+(h.className||"");return xe.createElement("svg",er({},h,{className:u,width:l,height:l,fill:r,viewBox:"0 0 24 24"}),xe.createElement("path",{d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}))},or=xe.memo?xe.memo(fo):fo;ho.exports=or});var Po=ke((Pr,Ro)=>{"use strict";d();function rr(o){return o&&typeof o=="object"&&"default"in o?o.default:o}var ve=rr(B()),ir=Object.assign||function(o){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=e[r])}return o},nr=function(o,t){var e={};for(var r in o)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);return e},_o=function(t){var e=t.color,r=e===void 0?"currentColor":e,n=t.size,l=n===void 0?24:n,g=t.children,h=nr(t,["color","size","children"]),u="mdi-icon "+(h.className||"");return ve.createElement("svg",ir({},h,{className:u,width:l,height:l,fill:r,viewBox:"0 0 24 24"}),ve.createElement("path",{d:"M18,3H6V7H18M19,12A1,1 0 0,1 18,11A1,1 0 0,1 19,10A1,1 0 0,1 20,11A1,1 0 0,1 19,12M16,19H8V14H16M19,8H5A3,3 0 0,0 2,11V17H6V21H18V17H22V11A3,3 0 0,0 19,8Z"}))},sr=ve.memo?ve.memo(_o):_o;Ro.exports=sr});var Fo=ke((ci,Ho)=>{"use strict";d();function lr(o){return o&&typeof o=="object"&&"default"in o?o.default:o}var we=lr(B()),cr=Object.assign||function(o){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=e[r])}return o},mr=function(o,t){var e={};for(var r in o)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);return e},wo=function(t){var e=t.color,r=e===void 0?"currentColor":e,n=t.size,l=n===void 0?24:n,g=t.children,h=mr(t,["color","size","children"]),u="mdi-icon "+(h.className||"");return we.createElement("svg",cr({},h,{className:u,width:l,height:l,fill:r,viewBox:"0 0 24 24"}),we.createElement("path",{d:"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z"}))},pr=we.memo?we.memo(wo):wo;Ho.exports=pr});d();d();var I=a(R(),1),uo=()=>(0,I.jsx)(x,{width:"full",sx:{mt:8,mb:4},children:(0,I.jsxs)(k,{templateColumns:"1fr",alignItems:"center",gap:4,children:[(0,I.jsx)(f,{children:(0,I.jsx)(Y,{})}),(0,I.jsx)(f,{children:(0,I.jsx)(J,{height:"120px"})}),(0,I.jsx)(f,{children:(0,I.jsx)(J,{height:"120px"})}),(0,I.jsx)(f,{children:(0,I.jsx)(J,{height:"120px"})}),(0,I.jsx)(f,{children:(0,I.jsx)(J,{height:"120px"})}),(0,I.jsx)(f,{children:(0,I.jsx)(J,{height:"120px"})}),(0,I.jsx)(f,{children:(0,I.jsx)(J,{height:"120px"})})]})});d();d();var q=a(B(),1);var xo=a(ut(),1),vo=a(go(),1),zo=a(Po(),1);d();var Ao=a(B(),1);var bo=a(ut(),1),Oo=a(Jo(),1),Io=a(Qo(),1);d();var Le=a(B()),y;typeof window<"u"?y=window:typeof self<"u"?y=self:y=globalThis;var je=null,et=null,Do=20,Je=y.clearTimeout,Eo=y.setTimeout,Qe=y.cancelAnimationFrame||y.mozCancelAnimationFrame||y.webkitCancelAnimationFrame,To=y.requestAnimationFrame||y.mozRequestAnimationFrame||y.webkitRequestAnimationFrame;Qe==null||To==null?(je=Je,et=function(t){return Eo(t,Do)}):(je=function([t,e]){Qe(t),Je(e)},et=function(t){let e=To(function(){Je(r),t()}),r=Eo(function(){Qe(e),t()},Do);return[e,r]});function ar(o){let t,e,r,n,l,g,h,u=typeof document<"u"&&document.attachEvent;if(!u){g=function(p){let m=p.__resizeTriggers__,O=m.firstElementChild,H=m.lastElementChild,W=O.firstElementChild;H.scrollLeft=H.scrollWidth,H.scrollTop=H.scrollHeight,W.style.width=O.offsetWidth+1+"px",W.style.height=O.offsetHeight+1+"px",O.scrollLeft=O.scrollWidth,O.scrollTop=O.scrollHeight},l=function(p){return p.offsetWidth!==p.__resizeLast__.width||p.offsetHeight!==p.__resizeLast__.height},h=function(p){if(p.target.className&&typeof p.target.className.indexOf=="function"&&p.target.className.indexOf("contract-trigger")<0&&p.target.className.indexOf("expand-trigger")<0)return;let m=this;g(this),this.__resizeRAF__&&je(this.__resizeRAF__),this.__resizeRAF__=et(function(){l(m)&&(m.__resizeLast__.width=m.offsetWidth,m.__resizeLast__.height=m.offsetHeight,m.__resizeListeners__.forEach(function(W){W.call(m,p)}))})};let i=!1,_="";r="animationstart";let D="Webkit Moz O ms".split(" "),c="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),S="";{let p=document.createElement("fakeelement");if(p.style.animationName!==void 0&&(i=!0),i===!1){for(let m=0;m<D.length;m++)if(p.style[D[m]+"AnimationName"]!==void 0){S=D[m],_="-"+S.toLowerCase()+"-",r=c[m],i=!0;break}}}e="resizeanim",t="@"+_+"keyframes "+e+" { from { opacity: 0; } to { opacity: 0; } } ",n=_+"animation: 1ms "+e+"; "}let b=function(i){if(!i.getElementById("detectElementResize")){let _=(t||"")+".resize-triggers { "+(n||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',D=i.head||i.getElementsByTagName("head")[0],c=i.createElement("style");c.id="detectElementResize",c.type="text/css",o!=null&&c.setAttribute("nonce",o),c.styleSheet?c.styleSheet.cssText=_:c.appendChild(i.createTextNode(_)),D.appendChild(c)}};return{addResizeListener:function(i,_){if(u)i.attachEvent("onresize",_);else{if(!i.__resizeTriggers__){let D=i.ownerDocument,c=y.getComputedStyle(i);c&&c.position==="static"&&(i.style.position="relative"),b(D),i.__resizeLast__={},i.__resizeListeners__=[],(i.__resizeTriggers__=D.createElement("div")).className="resize-triggers";let S=D.createElement("div");S.className="expand-trigger",S.appendChild(D.createElement("div"));let p=D.createElement("div");p.className="contract-trigger",i.__resizeTriggers__.appendChild(S),i.__resizeTriggers__.appendChild(p),i.appendChild(i.__resizeTriggers__),g(i),i.addEventListener("scroll",h,!0),r&&(i.__resizeTriggers__.__animationListener__=function(O){O.animationName===e&&g(i)},i.__resizeTriggers__.addEventListener(r,i.__resizeTriggers__.__animationListener__))}i.__resizeListeners__.push(_)}},removeResizeListener:function(i,_){if(u)i.detachEvent("onresize",_);else if(i.__resizeListeners__.splice(i.__resizeListeners__.indexOf(_),1),!i.__resizeListeners__.length){i.removeEventListener("scroll",h,!0),i.__resizeTriggers__.__animationListener__&&(i.__resizeTriggers__.removeEventListener(r,i.__resizeTriggers__.__animationListener__),i.__resizeTriggers__.__animationListener__=null);try{i.__resizeTriggers__=!i.removeChild(i.__resizeTriggers__)}catch{}}}}}var ze=class extends Le.Component{constructor(...t){super(...t),this.state={height:this.props.defaultHeight||0,scaledHeight:this.props.defaultHeight||0,scaledWidth:this.props.defaultWidth||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;let{disableHeight:e,disableWidth:r,onResize:n}=this.props;if(this._parentNode){let l=window.getComputedStyle(this._parentNode)||{},g=parseFloat(l.paddingLeft||"0"),h=parseFloat(l.paddingRight||"0"),u=parseFloat(l.paddingTop||"0"),b=parseFloat(l.paddingBottom||"0"),v=this._parentNode.getBoundingClientRect(),C=v.height-u-b,i=v.width-g-h,_=this._parentNode.offsetHeight-u-b,D=this._parentNode.offsetWidth-g-h;(!e&&(this.state.height!==_||this.state.scaledHeight!==C)||!r&&(this.state.width!==D||this.state.scaledWidth!==i))&&(this.setState({height:_,width:D,scaledHeight:C,scaledWidth:i}),typeof n=="function"&&n({height:_,scaledHeight:C,scaledWidth:i,width:D}))}},this._setRef=e=>{this._autoSizer=e}}componentDidMount(){let{nonce:t}=this.props,e=this._autoSizer?this._autoSizer.parentNode:null;if(e!=null&&e.ownerDocument&&e.ownerDocument.defaultView&&e instanceof e.ownerDocument.defaultView.HTMLElement){this._parentNode=e;let r=e.ownerDocument.defaultView.ResizeObserver;r!=null?(this._resizeObserver=new r(()=>{this._timeoutId=setTimeout(this._onResize,0)}),this._resizeObserver.observe(e)):(this._detectElementResize=ar(t),this._detectElementResize.addResizeListener(e,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),this._timeoutId!==null&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){let{children:t,defaultHeight:e,defaultWidth:r,disableHeight:n=!1,disableWidth:l=!1,doNotBailOutOnEmptyChildren:g=!1,nonce:h,onResize:u,style:b={},tagName:v="div",...C}=this.props,{height:i,scaledHeight:_,scaledWidth:D,width:c}=this.state,S={overflow:"visible"},p={},m=!1;return n||(i===0&&(m=!0),S.height=0,p.height=i,p.scaledHeight=_),l||(c===0&&(m=!0),S.width=0,p.width=c,p.scaledWidth=D),g&&(m=!1),(0,Le.createElement)(v,{ref:this._setRef,style:{...S,...b},...C},!m&&t(p))}};var P=a(R(),1),Co=o=>{let{isDraft:t,isOpen:e,onClose:r}=o,n=(0,Ao.useRef)(),{state:l,retry:g}=vt(),h=()=>{let{filteredData:u,handleSearchInputChange:b}=Ce(n.current??[],["screen_name"]),v=30,C=({style:i,index:_,data:D})=>{let c=D?.[_];return c!=null?(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(Dt,{style:i,children:c.habilitado?(0,P.jsx)(Rt,{href:ue(t?ct:at,{client:c.id}),children:(0,P.jsxs)(x,{children:[(0,P.jsx)(We,{as:Io.default,color:"green.400"}),c.screen_name]})}):(0,P.jsxs)(x,{color:"gray.400",sx:{cursor:"not-allowed"},children:[(0,P.jsx)(We,{as:Oo.default,color:"red.400"}),c.screen_name]})},c.id)}):(0,P.jsx)(P.Fragment,{})};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(x,{sx:{pb:4},children:(0,P.jsx)(Se,{handleSearchInputChange:b})}),(0,P.jsx)(ze,{children:({height:i,width:_})=>(0,P.jsx)(Ht,{height:i-60,itemCount:u.length??0,itemSize:v,innerElementType:Pt,width:_,itemData:u,children:C})})]})};return(0,P.jsxs)(he,{isCentered:!0,isOpen:e,onClose:r,scrollBehavior:"inside",size:{base:"full",sm:"md",md:"lg"},children:[(0,P.jsx)(Re,{}),(0,P.jsxs)(ge,{sx:{maxHeight:"auto"},children:[(0,P.jsx)(_e,{children:"Seleccione el cliente"}),(0,P.jsx)(De,{}),(0,P.jsx)(Pe,{minHeight:{base:"auto",sm:"420px !important"},children:l.map({loading:u=>(0,P.jsxs)(Et,{spacing:4,children:[(0,P.jsx)($e,{width:"full",height:"36px",borderRadius:"md"}),(0,P.jsx)($e,{width:"full",height:"250px",borderRadius:"md"})]}),error:({error:u})=>(0,P.jsx)(Oe,{error:u,retry:g,cancelAndNavigateTo:pt}),success:u=>(n.current=bo.default.sortBy(u.data,["screen_name"]),(0,P.jsx)(h,{}))})})]})]})};d();var ye=a(B(),1);var F=a(R(),1),dr=(0,ye.lazy)(()=>import("/build/_shared/PrintModal.client-XEJQ2O3S.js")),So=o=>{let{pedidos:t,renglones:e,isOpen:r,onClose:n}=o;return(0,F.jsxs)(he,{isCentered:!0,isOpen:r,onClose:n,children:[(0,F.jsx)(Re,{}),(0,F.jsxs)(ge,{children:[(0,F.jsx)(_e,{children:"Impresi\xF3n de pedidos"}),(0,F.jsx)(De,{}),(0,F.jsx)(Pe,{children:(0,F.jsx)(ye.Suspense,{fallback:(0,F.jsx)(co,{}),children:(0,F.jsx)(dr,{pedidos:t,renglones:e})})})]})]})};var T=a(R(),1),Lo=({isDraft:o,pedidos:t,stateRenglones:e,handleSearchInputChange:r})=>{let n=Ie(),[l,g]=(0,q.useState)(!1),[h,u]=(0,q.useState)(!1),{isOpen:b,onOpen:v,onClose:C}=ne(),{isOpen:i,onOpen:_,onClose:D}=ne(),[c,S]=(0,q.useState)([]),p=(0,q.useRef)({pedidos:[],renglones:{}});(0,q.useEffect)(()=>{let j=({id:le,checked:Ne})=>{S(Ne?ie=>[...ie,le]:ie=>ie.filter(ce=>ce!==le))};return X.on("setUnsetSelectedPedido",j),()=>{X.removeListener("setUnsetSelectedPedido",j)}},[]);let m=()=>{if(n.authState.isCustomer()){n.navigate(o?mt:dt);return}g(!0),v()},O=()=>{},H=()=>{C(),g(!1)},W=()=>{p.current.pedidos=t.filter(j=>c.includes(j.id)),Array.isArray(p.current.pedidos)&&p.current.pedidos.length>0&&e.isSuccess()&&(p.current.renglones=xo.default.pick(e.data,c)),u(!0),_()},Fe=()=>{D(),u(!1)},de=c.length<=0?void 0:c.length==1?`1 ${Mt}`:`${c.length} ${wt}`;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(x,{bg:fe("white","blue.900"),sx:{px:4,position:"sticky",zIndex:1e3,top:0},children:(0,T.jsxs)(Ve,{h:16,alignItems:"center",justifyContent:"space-between",children:[(0,T.jsxs)(Ue,{spacing:{base:2,sm:3},alignItems:"center",children:[(n.authState.isVendor()||n.authState.isCustomer())&&(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(Ze,{icon:vo.default,text:o?rt:ot,sharedProps:{size:"sm",fontWeight:"400",colorScheme:o?"green":"orange",onClick:()=>{m()}},iconProps:{boxSize:{base:5,md:4}}})}),!o&&(0,T.jsx)(Ze,{icon:zo.default,text:tt,sharedProps:{size:"sm",fontWeight:"400",colorScheme:"blue",onClick:()=>W(),isDisabled:c.length<=0},iconProps:{boxSize:{base:5,md:4}}}),de!=null&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Xe,{display:{base:"none",sm:"inherited"},height:8,borderRadius:40,size:"md",variant:"solid",colorScheme:"blue",children:(0,T.jsx)(qe,{marginX:1,children:de})}),(0,T.jsx)(Xe,{display:{base:"inherited",sm:"none"},height:8,borderRadius:40,size:"md",variant:"solid",colorScheme:"blue",children:(0,T.jsx)(qe,{marginX:1,children:c.length})})]})]}),(0,T.jsx)(Ve,{alignItems:"center",marginLeft:4,children:(0,T.jsx)(Ue,{spacing:{base:2,md:4},children:(0,T.jsx)(x,{children:(0,T.jsx)(Se,{handleSearchInputChange:r})})})})]})}),l&&(0,T.jsx)(Co,{isDraft:o,isOpen:b,onClose:H}),h&&(0,T.jsx)(So,{isOpen:i,onClose:Fe,pedidos:p.current.pedidos,renglones:p.current.renglones})]})};d();d();var G=a(B(),1);d();d();function Me(o,t){let e;switch(o){case 1:e="blue";break;case 2:e="purple";break;case 3:e="green";break;case 4:e="black";break;case 5:e="red";break;default:e="gray"}return t==null?e:`${e}${t}`}var Mo=a(R(),1),yo=({estado:o})=>{let t=mo(o),e=Me(o);return(0,Mo.jsx)(Tt,{fontSize:"1em",variant:"solid",colorScheme:e,lineHeight:"1.5em",children:t})};d();var No=a(Fo(),1);var L=a(R(),1),Bo=({app:o,draft:t,pedido:e,onDelete:r})=>{let n=o.authState.userInfo,l=n.role==2,g=n.puede_anular_pedido,h=t||n.borrar_pedido_al_anular;return(0,L.jsxs)(At,{isLazy:!0,id:"menu",children:[(0,L.jsx)(Ot,{as:gt,size:"sm","aria-label":zt,icon:(0,L.jsx)(No.default,{}),variant:"outline",colorScheme:"white"}),(0,L.jsx)(ft,{children:(0,L.jsxs)(bt,{rootProps:{zIndex:2e3},children:[!l&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(ee,{onClick:()=>{o.navigate(ue(lt,{id:e.id}))},children:qt}),(0,L.jsx)(ee,{onClick:()=>{},children:Yt}),(0,L.jsx)(ee,{onClick:()=>{},children:t?Jt:Qt}),t&&(0,L.jsx)(ee,{onClick:()=>{},children:jt}),g&&(0,L.jsx)(It,{})]}),g&&(0,L.jsx)(ee,{onClick:()=>r(e.id),children:h?Zt:Kt})]})})]})};d();d();var se=a(R(),1),ko=()=>(0,se.jsxs)($,{status:"warning",children:[(0,se.jsx)(V,{}),(0,se.jsx)(U,{children:"El pedido no cuenta con productos."})]});d();var ae=a(R(),1),Go=()=>(0,ae.jsxs)($,{status:"error",children:[(0,ae.jsx)(V,{}),(0,ae.jsx)(U,{children:"Ocurri\xF3 un error al cargar los detalles del pedido."})]});d();var M=a(R(),1),Wo=()=>(0,M.jsx)(x,{width:"full",sx:{mt:8,mb:4},children:(0,M.jsxs)(k,{templateColumns:"1fr",alignItems:"center",gap:2,children:[(0,M.jsx)(f,{children:(0,M.jsx)(Y,{height:"20px"})}),(0,M.jsx)(f,{children:(0,M.jsx)(Y,{height:"20px"})}),(0,M.jsx)(f,{children:(0,M.jsx)(Y,{height:"20px"})}),(0,M.jsx)(f,{children:(0,M.jsx)(Y,{height:"20px"})})]})});d();var E=a(R(),1),Uo=({nro_pedido:o,renglones:t})=>(0,E.jsx)(Te,{sx:{p:0,m:0},children:(0,E.jsxs)(Ee,{variant:"stripedHoverOverCard",colorScheme:"gray",size:"sm",borderWidth:"1px",children:[(0,E.jsx)(Ct,{children:(0,E.jsx)(K,{children:(0,E.jsx)(St,{sx:{py:2},children:(0,E.jsxs)(k,{templateColumns:{base:"1fr 1fr 1fr",md:"4fr 1fr 1fr 1fr"},gap:6,children:[(0,E.jsx)(f,{children:(0,E.jsx)(z,{fontSize:{base:"xs",md:"sm"},children:"Art\xEDculo"})}),(0,E.jsx)(f,{sx:{display:{base:"none",md:"block"}},children:(0,E.jsx)(z,{fontSize:{base:"xs",md:"sm"},textAlign:"center",children:"Precio"})}),(0,E.jsx)(f,{children:(0,E.jsx)(z,{fontSize:{base:"xs",md:"sm"},textAlign:"center",children:"Cantidad"})}),(0,E.jsx)(f,{children:(0,E.jsx)(z,{fontSize:{base:"xs",md:"sm"},textAlign:"center",children:"Subtotal"})})]})})})}),(0,E.jsx)(Ae,{children:t.map(({id_articulo:e,nombre_articulo:r,codigo_articulo:n,descripcion_adicional:l,precio:g,cantidad:h,subtotal:u},b)=>(0,E.jsx)(K,{children:(0,E.jsx)(te,{children:(0,E.jsxs)(k,{templateColumns:{base:"1fr 1fr 1fr",md:"4fr 1fr 1fr 1fr"},gap:6,children:[(0,E.jsx)(f,{children:(0,E.jsx)(oe,{children:Vt(r,e,l)})}),(0,E.jsx)(f,{sx:{display:{base:"none",md:"block"}},children:(0,E.jsx)(Ye,{precio:g,moneda:"$"})}),(0,E.jsx)(f,{children:(0,E.jsx)(Z,{textAlign:"center",children:h})}),(0,E.jsx)(f,{children:(0,E.jsx)(Ye,{precio:u,moneda:"$"})})]})})},`details-${o}-${b}`))})]})});var re=a(R(),1),Vo=({wasOpen:o,pedido:t,stateRenglones:e})=>(0,re.jsx)(x,{sx:{mt:6},children:o&&e.map({loading:r=>(0,re.jsx)(Wo,{}),error:r=>(0,re.jsx)(Go,{}),success:r=>{let{id:n,numero_pedido:l}=t,g=r.data?.[n];return Array.isArray(g)?(0,re.jsx)(Uo,{nro_pedido:l,renglones:g}):(0,re.jsx)(ko,{})}})});d();function $o(o,t){return t.isSuccess()?po(o,t.data[o.id]):o.estado}var s=a(R(),1),Xo=({index:o,app:t,draft:e,pedido:r,stateRenglones:n,onDelete:l,isHidden:g})=>{let[h,u]=(0,G.useState)(!1),[b,v]=(0,G.useState)(!1),C=fe("gray.800","white"),i=(0,G.useRef)(!1),_=$o(r,n),D=(0,G.useMemo)(()=>(0,s.jsx)(Vo,{wasOpen:i.current,pedido:r,stateRenglones:n}),[i.current,n.constructor.name]),c=()=>{let N=!h;N&&(i.current=!0),u(N),X.emit("togglePedidoDetails",{id:r.id})},S=(N,Be)=>{v(!!N),X.emit("setUnsetSelectedPedido",{id:Be,checked:N})};(0,G.useEffect)(()=>{let N=({id:Be})=>{r.id!==Be&&u(!1)};return X.on("togglePedidoDetails",N),()=>{X.removeListener("togglePedidoDetails",N)}},[]);let{id:p,numero_pedido:m,fecha_alta:O,fecha_entrega:H,codigo_cliente:W,codigo_vendedor:Fe,codigo_transporte:de,nombre_cliente:j,nombre_vendedor:le,nombre_transporte:Ne,total:ie,descuento:ce,comentarios:me}=r,pe=_,Yo=!e&&me!=null&&me.length>0;return(0,s.jsx)(K,{sx:{...g&&!b&&{display:"none"}},children:(0,s.jsxs)(te,{sx:{py:6,position:"relative",borderTopWidth:{base:"3px",md:"4px"},borderTopStyle:"solid",borderTopColor:`${e?"blue.500 !important":Me(pe,".500 !important")}`},children:[(0,s.jsxs)(x,{display:"flex",sx:{position:"absolute",right:5,top:5},flexDirection:"column",children:[(0,s.jsx)(Bo,{app:t,draft:e,pedido:r,onDelete:l}),!e&&(0,s.jsx)(_t,{size:"xl",colorScheme:"blue",sx:{mt:2,borderWidth:0,borderColor:C},onChange:N=>{S(N.target.checked,p)}})]}),(0,s.jsxs)(k,{templateColumns:{base:"repeat(2, 1fr)",md:"repeat(4, 1fr)"},gap:6,sx:{cursor:"pointer"},onClick:()=>{c()},children:[e?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(f,{colSpan:{base:2,md:4},children:[(0,s.jsx)(z,{size:"sm",children:"Comentarios"}),(0,s.jsx)(Z,{paddingRight:10,sx:{whiteSpace:"pre-line"},children:me})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(f,{children:[(0,s.jsx)(z,{size:"sm",children:"Pedido"}),(0,s.jsx)(Z,{children:m})]}),(0,s.jsxs)(f,{children:[(0,s.jsx)(z,{size:"sm",children:"Estado"}),(0,s.jsx)(yo,{estado:pe})]}),(0,s.jsxs)(f,{children:[(0,s.jsx)(z,{size:"sm",children:"Emisi\xF3n"}),(0,s.jsx)(Z,{children:Ge(O)})]}),(0,s.jsxs)(f,{children:[(0,s.jsx)(z,{size:"sm",children:"Entrega"}),(0,s.jsx)(Z,{children:Ge(H)})]})]}),(0,s.jsxs)(f,{children:[(0,s.jsx)(z,{size:"sm",children:"Cliente"}),(0,s.jsx)(oe,{children:$t(W,j)})]}),(0,s.jsxs)(f,{children:[(0,s.jsx)(z,{size:"sm",children:"Vendedor"}),(0,s.jsx)(oe,{children:Ke(Fe,le)})]}),(0,s.jsxs)(f,{children:[(0,s.jsx)(z,{size:"sm",children:"Transporte"}),(0,s.jsx)(oe,{children:Ke(de,Ne)})]}),(0,s.jsxs)(f,{children:[(0,s.jsxs)(z,{size:"md",sx:{textTransform:"uppercase",color:pe===2&&"green.400"},children:["Total",ce!=null&&(0,s.jsxs)(s.Fragment,{children:[" ",`-${ce}%`]})]}),(0,s.jsx)(z,{size:"md",sx:{fontWeight:"bolder",color:pe===2&&"green.400"},children:(0,s.jsx)(Xt,{precio:ie,moneda:"$"})})]}),Yo&&(0,s.jsx)(f,{colSpan:{base:2,md:4},children:(0,s.jsxs)($,{status:"info",children:[(0,s.jsx)(V,{}),(0,s.jsx)(U,{children:me})]})})]}),(0,s.jsx)(x,{children:(0,s.jsx)(x,{sx:{display:h?"block":"none"},children:D})},`pedido-details-${o}`)]})})};var qo=a(B(),1);var w=a(R(),1);function Zo(o){let t=Ie(),r=t.authState.userInfo.borrar_pedido_al_anular.valueOf(),{draft:n,unfilteredPedidos:l,filteredPedidos:g,isFiltering:h,stateRenglones:u,reloadData:b}=o,v=ht(),C=ne(),{isOpen:i,onOpen:_,onClose:D}=C,c=(0,qo.useRef)(null),S=m=>{c.current=m,_()},p=async()=>{let m=c.current;if(m!=null){let O=n?await Ut(m,t):await Wt(m,t);O.map({success:H=>{v({title:n?lo:r?no:oo,status:"success"})},error:H=>{v({title:nt,status:"error"})}}),O.isSuccess()&&await b(),D()}};return(0,w.jsxs)(Te,{sx:{p:0,m:0},children:[(0,w.jsx)(Ee,{variant:"stripedOverCard",colorScheme:"gray",size:"md",sx:{borderCollapse:"separate",borderSpacing:"0 1rem"},children:(0,w.jsxs)(Ae,{children:[l.map((m,O)=>(0,w.jsx)(Xo,{index:O,draft:n,app:t,pedido:m,stateRenglones:u,onDelete:S,isHidden:h&&!g.includes(m)},`pedido-${m.id}`)),!g.length&&(0,w.jsx)(K,{children:(0,w.jsx)(te,{children:(0,w.jsxs)($,{status:"info",children:[(0,w.jsx)(V,{}),(0,w.jsx)(U,{children:h?it:n?yt:Lt})]})})})]})}),(0,w.jsx)(Ft,{isOpen:i,onClose:D,handleDeletion:p,message:{title:n?so:r?ro:eo,body:n?ao:r?io:to}})]})}var Q=a(R(),1),Ko=o=>{let{showDrafts:t,pedidos:e,reloadData:r}=o,n=xt().state.userOrThrow(),l=n.role==2,g=n.role==1,h=n.role==0;console.log(e.length);let{filteredData:u,handleSearchInputChange:b,isFiltering:v}=Ce(e,["comentario",...t?[]:["numero_pedido"],...h?[]:["codigo_cliente","nombre_cliente"],...l?["codigo_vendedor","nombre_vendedor"]:[]]),{state:C}=be({...t?Gt:Bt,silent:!0,transformResponse:i=>(Object.values(i).forEach(_=>{Array.isArray(_)&&_.sort((D,c)=>D.renglon-c.renglon)}),i)});return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(Lo,{isDraft:t,pedidos:e,stateRenglones:C,handleSearchInputChange:b}),(0,Q.jsx)(Zo,{draft:t,stateRenglones:C,unfilteredPedidos:e,filteredPedidos:u,isFiltering:v,reloadData:r})]})};var He=a(R(),1),vn=o=>{let t=o.showDrafts===!0,{state:e,retry:r,reload:n}=be({...t?kt:Nt,silent:!0});return e.map({loading:l=>(0,He.jsx)(uo,{}),error:({error:l})=>(0,He.jsx)(Oe,{error:l,retry:r,cancelAndNavigateTo:st}),success:l=>(0,He.jsx)(Ko,{showDrafts:t,pedidos:l.data,reloadData:n})})};export{vn as a};
