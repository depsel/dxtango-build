import{r as j,j as r}from"./emotion-element-43c6fea0.browser.esm-CqNy1Myq.js";import{k as C}from"./app-B1a_okyL.js";import{N as P}from"./Navbar-CrgycxSA.js";import{S as g}from"./SettingsFormHeading-BHfSW-Kb.js";import{c as A,a as m,b as R,d as b,o as V}from"./index.esm-DRWPArKk.js";import{_ as E,T as F,W as I,X as y,Y as N}from"./auth_context-BcmIMa0H.js";import{u as O}from"./app_resources-DBlOodC1.js";import{A as q}from"./refresh_all-C2LnWT5A.js";import{C as l}from"./CommonCard-CeRdMR-s.js";import{F as D}from"./FormErrors-Cq6m-7WG.js";import{d as v,V as G,P as p}from"./vo_dxt_password-CxymUS6f.js";import{S as T}from"./SettingsFormButtons-BvgAhPGk.js";import{y as W}from"./utils-DihYaFf6.js";import{u as B}from"./chunk-6RSEZNRH-HBxAY87Z.js";import{B as H}from"./chunk-PULVB27S-DFGZ_FhU.js";import{G as L,a as d}from"./chunk-ZPFGWTBB-D1BdsecE.js";import{C as $}from"./ColorModeSelector-C-acBnCm.js";import"./chunk-QURMB2UJ-Cc-vvoFz.js";import"./chunk-3KCBMPN5-COSGWH1j.js";import"./chunk-KRPLQIP4-22zt2_dG.js";import"./chunk-HB6KBUMZ-25NI-665.js";import"./index-CAKzuJDV.js";import"./chunk-3ASUQ6PA-C9U3rhNA.js";import"./chunk-6QYXN73V-CZbxpQYs.js";import"./chunk-2OOHT3W5-Ci3F40nI.js";import"./chunk-BL2ZZSHG-XVL5PYnd.js";import"./ResponsiveIconButton-Dzqr81nH.js";import"./chunk-VMD3UMGK-CjQf0NqH.js";import"./chunk-7OLJDQMT-mUIp5tuF.js";import"./chunk-YQO7BFFX-4WIx2Mcr.js";import"./chunk-MFVQSVQB-3P8bbuxX.js";import"./chunk-46CXQZ4E-CX4juB_f.js";import"./ControlledInput-CDCrsGF4.js";import"./chunk-56K2BSAJ-C8tXkxw9.js";import"./chunk-H46NUPBZ-DZttvycU.js";import"./chunk-6CVSDS6C-CZaR6dev.js";import"./chunk-2ZHRCML3-CgIq3YrP.js";import"./chunk-Z6RXEUPO-CLnUS3YW.js";import"./chunk-3Y4YXCR2-D9PuIzMR.js";const U=()=>{const[s,t]=j.useState(null);return{yupValidationSchema:A({old_password:m().required("Ingrese su contaseña actual"),new_password:m().required("Ingrese su nueva contraseña").test("password","Formato de contraseña no válido",o=>{if(o!=""&&o!=null){let a=v(o);return E.isEqual(s,a)||t(a),W(G,o)}return!0}),new_password_repeat:m().required("Repita su nueva contraseña").oneOf([R("new_password")],"Las contraseñas deben coincidir")}).required(),passwordStatus:s}},X=()=>{const s=O(),t=B(),{yupValidationSchema:u,passwordStatus:o}=U(),{handleSubmit:a,control:i,reset:k,setError:c,formState:{errors:w,isSubmitting:f,isSubmitSuccessful:_}}=b({defaultValues:{old_password:"",new_password:"",new_password_repeat:""},resolver:V(u)}),e=_||f,x=async S=>{const{new_password_repeat:M,...h}=S;(await F(h,s)).map({success:n=>{t({title:I,status:"success"}),s.authDispatch(new q(n.data.user)),s.navigate(y)},error:n=>{t({title:N,status:"error"}),c("root",{message:n.info.error_description})}})};return r.jsx("form",{noValidate:!0,onSubmit:a(x),children:r.jsxs(H,{children:[r.jsx(D,{errors:w}),r.jsx(l,{children:r.jsxs(L,{templateColumns:"1fr",alignItems:"start",gap:4,children:[r.jsx(d,{children:r.jsx(p,{fieldProps:{name:"old_password",id:"old_password"},formControlInnerProps:{label:"Contraseña Actual"},disableForm:e,control:i})}),r.jsx(d,{children:r.jsx(p,{fieldProps:{name:"new_password",id:"new_password"},formControlInnerProps:{label:"Nueva contraseña"},passwordStatus:o,disableForm:e,control:i})}),r.jsx(d,{children:r.jsx(p,{fieldProps:{name:"new_password_repeat",id:"new_password_repeat"},formControlInnerProps:{label:"Confirmar nueva contraseña"},disableForm:e,control:i})})]})}),r.jsx(l,{children:r.jsx(T,{isLoading:e,hideCancelButton:!0})})]})})};function Dr(){return r.jsxs(r.Fragment,{children:[r.jsx(P,{}),r.jsxs($,{maxW:"2xl",sx:{my:4},children:[r.jsx(g,{title:C}),r.jsx(X,{})]})]})}export{Dr as default};
