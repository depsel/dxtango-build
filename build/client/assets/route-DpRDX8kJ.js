import{j as a,g as _,r as b}from"./emotion-element-43c6fea0.browser.esm-CqNy1Myq.js";import{q as H,aP as M,aQ as U,A as B,s as V,f as g,c as f,d as R,g as q,ac as T,I as w,B as W}from"./auth_context-BPNKm5C_.js";import{c as Z,a as A,d as Q,o as X}from"./index.esm-DRWPArKk.js";import{y as Y}from"./utils-DihYaFf6.js";import{V as G}from"./vo_user_name-Bhswf9ko.js";import{u as J,s as K,a as ee,C as re}from"./ColorModeSelector-b4kcU4V6.js";import{C as k}from"./ControlledInput-B1wc2r1g.js";import{u as te,M as oe}from"./MessageToUserDialog-AsL_hNa0.js";import{o as ae}from"./components-F5Cv7EYO.js";import{u as se,C as ne,a as ie}from"./chunk-YQO7BFFX-CkL1T7LL.js";import{U as ce,L as O}from"./chunk-46CXQZ4E-B49QqCoR.js";import{V as le}from"./chunk-NTCQBYKE-fAVIJNuR.js";import{H as me}from"./chunk-7OLJDQMT-Dt4RFKr6.js";import{B as x}from"./chunk-PULVB27S-CjXp21rs.js";import{A as ue}from"./chunk-3KCBMPN5-BlEVF58j.js";import{I as S}from"./chunk-2ZHRCML3-BuCwWj08.js";import"./app-CX69rDqm.js";import"./chunk-6QYXN73V-QyLCLJ50.js";import"./chunk-56K2BSAJ-GUqegmVg.js";import"./chunk-H46NUPBZ-CEXsk7m2.js";import"./chunk-6CVSDS6C-CBdC6jDV.js";import"./chunk-2OOHT3W5-U8fop6km.js";import"./chunk-MFVQSVQB-DR_sqUop.js";class de extends H{constructor(e,t){super(),this.params=e,this.errorCallback=t}async run(e,t,o,s){t(new M),(await U(this.params,o)).map({success:async n=>{const{user:c,auth_token:m}=n.data;t(new B(m,c))},error:async n=>{const c=n.info;t(new V(c)),this.errorCallback&&this.errorCallback(c)}})}}var j=g(function(e,t){const{htmlWidth:o,htmlHeight:s,alt:i,...n}=e;return a.jsx("img",{width:o,height:s,ref:t,alt:i,...n})});j.displayName="NativeImage";function fe(r,e=[]){const t=Object.assign({},r);for(const o of e)o in t&&delete t[o];return t}var P=g(function(e,t){const{fallbackSrc:o,fallback:s,src:i,srcSet:n,align:c,fit:m,loading:u,ignoreFallback:v,crossOrigin:l,fallbackStrategy:d="beforeLoadOrError",referrerPolicy:$,...C}=e,z=o!==void 0||s!==void 0,I=u!=null||v||!z,D=J({...e,crossOrigin:l,ignoreFallback:I}),F=K(D,d),y={ref:t,objectFit:m,objectPosition:c,...I?C:fe(C,["onError","onLoad"])};return F?s||a.jsx(f.img,{as:j,className:"chakra-image__placeholder",src:o,...y}):a.jsx(f.img,{as:j,src:i,srcSet:n,crossOrigin:l,loading:u,referrerPolicy:$,className:"chakra-image",...y})});P.displayName="Image";var pe=g(function(e,t){const{className:o,...s}=e,i=se();return a.jsx(f.div,{ref:t,className:R("chakra-card__header",o),__css:i.header,...s})}),E=f("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});E.displayName="Center";var he={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};g(function(e,t){const{axis:o="both",...s}=e;return a.jsx(f.div,{ref:t,__css:he[o],...s,position:"absolute"})});function ge(r){return r&&typeof r=="object"&&"default"in r?r.default:r}var p=ge(b),ve=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},xe=function(r,e){var t={};for(var o in r)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t},N=function(e){var t=e.color,o=t===void 0?"currentColor":t,s=e.size,i=s===void 0?24:s;e.children;var n=xe(e,["color","size","children"]),c="mdi-icon "+(n.className||"");return p.createElement("svg",ve({},n,{className:c,width:i,height:i,fill:o,viewBox:"0 0 24 24"}),p.createElement("path",{d:"M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"}))},je=p.memo?p.memo(N):N,be=je;const Ce=_(be);function Ie(r){return r&&typeof r=="object"&&"default"in r?r.default:r}var h=Ie(b),ye=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},we=function(r,e){var t={};for(var o in r)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t},L=function(e){var t=e.color,o=t===void 0?"currentColor":t,s=e.size,i=s===void 0?24:s;e.children;var n=we(e,["color","size","children"]),c="mdi-icon "+(n.className||"");return h.createElement("svg",ye({},n,{className:c,width:i,height:i,fill:o,viewBox:"0 0 24 24"}),h.createElement("path",{d:"M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"}))},Ae=h.memo?h.memo(L):L,ke=Ae;const Oe=_(ke),Se=r=>{const e=q("/welcome/logo-light.svg","/welcome/logo-dark.svg");return a.jsx(P,{src:e,...r})},Ne=Z({username:A().required("Ingrese su nombre de usuario").test("test","Usuario no valido",r=>Y(G,r)),password:A().required("Ingrese su contraseña")}).required();function Ke(){const r=ae(),{state:e,dispatch:t}=T(),o=te(),{welcome_message:s}=r,{handleSubmit:i,control:n,reset:c,formState:{errors:m,isSubmitting:u}}=Q({defaultValues:{username:"",password:""},resolver:X(Ne)}),v=async l=>{const d={username:l.username,password:l.password};await t(new de(d))};return b.useEffect(()=>{if(e instanceof V){const l=e.errorOrNull()?.message_to_user;l!=null&&o({message:a.jsx(oe,{...l})})}},[e]),a.jsxs(a.Fragment,{children:[a.jsx(x,{sx:{position:"absolute",top:3,right:4},children:a.jsx(ee,{})}),a.jsx(x,{sx:{display:"flex",height:"100vh",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:a.jsx(re,{maxWidth:"sm",sx:{alignSelf:"center"},children:a.jsxs(ne,{children:[a.jsx(pe,{children:a.jsx(E,{children:a.jsx(Se,{width:"160px",alt:""})})}),a.jsx(ie,{children:a.jsx("form",{noValidate:!0,onSubmit:i(v),children:a.jsxs(le,{spacing:4,children:[a.jsx(me,{size:"sm",sx:{textAlign:"center",pb:2},children:s}),(Object.keys(m).length||e.errorOrNull())&&a.jsx(x,{width:"full",children:a.jsx(ue,{status:"error",children:a.jsxs(ce,{fontSize:"sm",styleType:"none",sx:{m:0},children:[Object.keys(m).length&&Object.values(m).map((l,d)=>a.jsx(O,{children:l.message},d)),e.errorOrNull()&&a.jsx(O,{children:e.errorOrNull()?.error_description},"api_error")]})})}),a.jsx(k,{formControlInnerProps:{icon:a.jsx(S,{pointerEvents:"none",children:a.jsx(w,{as:Ce})})},fieldProps:{name:"username",id:"username",type:"text",placeholder:"Usuario",autoCapitalize:"off",autoComplete:"username"},formControlProps:{isDisabled:u},control:n}),a.jsx(k,{formControlInnerProps:{icon:a.jsx(S,{pointerEvents:"none",children:a.jsx(w,{as:Oe})})},fieldProps:{name:"password",id:"password",type:"password",placeholder:"Contraseña",autoComplete:"current-password"},formControlProps:{isDisabled:u},control:n}),a.jsx(W,{type:"submit",width:"full",colorScheme:"blue",isLoading:u,children:"Ingresar"})]})})})]})})})]})}export{Ke as default};
