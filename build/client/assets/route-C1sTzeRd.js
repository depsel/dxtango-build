import{j as e,a as F}from"./emotion-element-43c6fea0.browser.esm-V7CwUVk-.js";import{P as w,ax as q,e as g,X as R}from"./auth_context-BBDV2-qW.js";import{B as y,V,r as H}from"./app-BMvraJRd.js";import{S as N}from"./SettingsFormHeading-BZPNDeWv.js";import{u as O}from"./useDXTApiFetch-cUHsby58.js";import{b as C,c as I,V as U,d as G,e as L}from"./index-MM-BEfVR.js";import{A as k}from"./ApiErrors-P5QuqGMt.js";import{F as n,a as T}from"./FormSkeletons-xJlZdIll.js";import{G as S,a as s}from"./chunk-ZPFGWTBB-BQOfC-td.js";import{D as m}from"./chunk-W7WUSNWJ-BEqd18B9.js";import{a as $,b as z}from"./app_resources-CxShxcx8.js";import{u as X,c as B,a as l,e as D,f as Y,d as J,o as K}from"./index.esm-SP9Jm6Nz.js";import{C as f}from"./CommonCard-CrzQbbIu.js";import{F as Q,a as W}from"./chunk-56K2BSAJ-ByH33m4W.js";import{F as Z}from"./chunk-KRPLQIP4-NJec_PE4.js";import{C as ee}from"./chunk-CWVAJCXJ-BPBC_Cg6.js";import{C as d}from"./ControlledInput-Bw-P79we.js";import{C as v}from"./ControlledTextarea-CyvEM0pX.js";import{F as se}from"./FormErrors-5HYi3DVI.js";import{S as re}from"./SettingsFormButtons-BuGsXUqX.js";import{y as A}from"./utils-DihYaFf6.js";import{H as M}from"./chunk-7OLJDQMT-3EhHOSPR.js";import"./chunk-6QYXN73V-BKD6YrO0.js";import"./chunk-3ASUQ6PA-CvzJqsz3.js";import"./chunk-2OOHT3W5-DslbJMnr.js";import"./chunk-GOJLRND4-C6AoJZLh.js";import"./chunk-3Y4YXCR2-DS9dcu0f.js";import"./chunk-QURMB2UJ-8Wtwm6sR.js";import"./chunk-3KCBMPN5-70uOg14b.js";import"./chunk-YQO7BFFX-B4KLri48.js";import"./chunk-MFVQSVQB-BInMUJ5Q.js";import"./chunk-7D6N5TE5-CYpHZTLA.js";import"./chunk-6CVSDS6C-EjyqZFPp.js";import"./chunk-46CXQZ4E-Cu23NgCw.js";class oe extends w{validate(a){let o=a;if(typeof o=="string"&&(o=o.trim().toLowerCase(),q(o)))return o;this.throwError(a)}}const te=()=>e.jsx(y,{width:"full",sx:{mt:8,mb:4},children:e.jsxs(S,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"center",gap:4,children:[e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(m,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(m,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(n,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(T,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(m,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(n,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(T,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})})]})}),ie=i=>{const{fieldProps:a,formControlProps:o,formControlInnerProps:p,control:c}=i,{text:t,helperText:x,helperAction:u}=p||{},{field:{ref:j,onChange:h,value:_},fieldState:{invalid:r},formState:{errors:b}}=X({name:a.name,control:c});return e.jsxs(Q,{...o,isInvalid:r,ref:j,children:[e.jsxs(Z,{alignItems:"center",children:[e.jsx(ee,{...a,onChange:h,isChecked:_,children:t}),u]}),x!=null&&e.jsx(W,{children:x})]})},ne=B({smtp_host:l().required("Ingrese el host SMTP").test("valid-host","Ingrese un host SMTP válido",i=>A(oe,i)),smtp_username:l().required("Ingrese el usuario SMTP"),smtp_password:l().required("Ingrese la contraseña SMTP"),smtp_port:D().required("Ingrese el puerto SMTP").typeError("Ingrese un número de puerto SMTP válido").test("is-port","Ingrese un puerto SMTP válido",i=>A(U,i)),smtp_use_tls:Y().required(),auth_expiration_days:D().min(C,`El tiempo de espera debe ser mayor a ${C}`).max(I,`El tiempo de espera debe ser menor a ${I}`).required("Ingrese el tiempo de espera para logout").typeError("Ingrese el tiempo de espera para logout"),admin_email:l().required("Ingrese el correo electrónico del Administrador").email("Ingrese un correo electrónico válido"),user_warning_message_title:l().required("Ingrese el título del mensaje de advertencia"),user_warning_message_content:l().required("Ingrese el contenido del mensaje de advertencia"),user_disabled_message_title:l().required("Ingrese el título del mensaje de inhabilitación"),user_disabled_message_content:l().required("Ingrese el contenido del mensaje de inhabilitación")}).required(),ae=i=>{const{stateData:a}=i,o=$(),p=z(),{handleSubmit:c,control:t,reset:x,setError:u,formState:{errors:j,isSubmitting:h,isSubmitSuccessful:_}}=J({defaultValues:a,resolver:K(ne)}),r=_||h,b=async E=>{(await G(E,o)).map({success:P=>{p({title:V,status:"success"}),o.navigate(g)},error:P=>{p({title:R}),u("root",{message:P.info.error_description})}})};return e.jsx("form",{noValidate:!0,onSubmit:c(b),children:e.jsxs(y,{children:[e.jsx(se,{errors:j}),e.jsx(f,{children:e.jsxs(S,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[e.jsx(s,{colSpan:{md:2},children:e.jsx(M,{size:"sm",textTransform:"uppercase",children:"Servidor de Correos"})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"smtp_host",id:"smtp_host",type:"text",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Hostname SMTP"},control:t})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"smtp_username",id:"smtp_username",type:"text",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Usuario SMTP"},control:t})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"smtp_password",id:"smtp_password",type:"text",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Contraseña SMTP"},control:t})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"smtp_port",id:"smtp_port",type:"number",inputMode:"tel",htmlSize:5,maxLength:5,width:"auto",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Puerto SMTP"},control:t})}),e.jsx(s,{children:e.jsx(ie,{control:t,fieldProps:{id:"smtp_use_tls",name:"smtp_use_tls"},formControlInnerProps:{text:"Usar TLS"}})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(m,{})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"auth_expiration_days",id:"auth_expiration_days",type:"number",inputMode:"tel",htmlSize:5,maxLength:5,width:"auto",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Tiempo de espera para logout",helperText:"Expresado en días"},control:t})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"admin_email",id:"admin_email",type:"text",inputMode:"email",htmlSize:30,width:"auto",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Correo electrónico Administrador"},control:t})})]})}),e.jsx(f,{children:e.jsxs(S,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[e.jsx(s,{colSpan:{md:2},children:e.jsx(M,{size:"sm",textTransform:"uppercase",children:"Mensajes"})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(d,{fieldProps:{name:"user_warning_message_title",id:"user_warning_message_title",type:"text",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Título del mensaje de advertencia"},control:t})}),e.jsx(s,{colSpan:{md:2},children:"Contenido del mensaje de advertencia"}),e.jsx(s,{colSpan:{md:2},children:e.jsx(v,{fieldProps:{name:"user_warning_message_content",id:"user_warning_message_content",isDisabled:r},formControlProps:{isDisabled:r},control:t})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(m,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(d,{fieldProps:{name:"user_disabled_message_title",id:"user_disabled_message_title",type:"text",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Título del mensaje de inhabilitación"},control:t})}),e.jsx(s,{colSpan:{md:2},children:"Contenido del mensaje de inhabilitación"}),e.jsx(s,{colSpan:{md:2},children:e.jsx(v,{fieldProps:{name:"user_disabled_message_content",id:"user_disabled_message_content",isDisabled:r},formControlProps:{isDisabled:r},control:t})})]})}),e.jsx(f,{children:e.jsx(re,{isLoading:r})})]})})},le=()=>{const{state:i,retry:a}=O({...L,silent:!0});return i.map({loading:o=>e.jsx(te,{}),error:({error:o})=>e.jsx(k,{error:o,retry:a,cancelAndNavigateTo:g}),success:o=>e.jsx(ae,{stateData:o.data})})};function ze(){const i=F();return e.jsxs(e.Fragment,{children:[e.jsx(N,{title:H,returnButton:{buttonProps:{onClick:()=>{i(g)}}}}),e.jsx(le,{})]})}export{ze as default};
