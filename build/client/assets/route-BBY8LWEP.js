import{j as e,a as D}from"./emotion-element-43c6fea0.browser.esm-V7CwUVk-.js";import{P as E,e as l,X as y}from"./auth_context-BBDV2-qW.js";import{B as _,T as O,q as A}from"./app-BMvraJRd.js";import{S as q}from"./SettingsFormHeading-BZPNDeWv.js";import{u as F}from"./useDXTApiFetch-cUHsby58.js";import{D as u,a as f,V as B,s as M,A as R}from"./index-MM-BEfVR.js";import{A as G}from"./ApiErrors-P5QuqGMt.js";import{F as n}from"./FormSkeletons-xJlZdIll.js";import{G as g,a as s}from"./chunk-ZPFGWTBB-BQOfC-td.js";import{a as U,b as w}from"./app_resources-CxShxcx8.js";import{c as L,a as m,e as x,d as V,o as $}from"./index.esm-SP9Jm6Nz.js";import{C as b}from"./CommonCard-CrzQbbIu.js";import{C as d}from"./ControlledInput-Bw-P79we.js";import{F as v}from"./FormErrors-5HYi3DVI.js";import{S as z}from"./SettingsFormButtons-BuGsXUqX.js";import{y as j}from"./utils-DihYaFf6.js";import"./chunk-KRPLQIP4-NJec_PE4.js";import"./chunk-7OLJDQMT-3EhHOSPR.js";import"./chunk-6QYXN73V-BKD6YrO0.js";import"./chunk-3ASUQ6PA-CvzJqsz3.js";import"./chunk-2OOHT3W5-DslbJMnr.js";import"./chunk-GOJLRND4-C6AoJZLh.js";import"./chunk-3Y4YXCR2-DS9dcu0f.js";import"./chunk-QURMB2UJ-8Wtwm6sR.js";import"./chunk-3KCBMPN5-70uOg14b.js";import"./chunk-56K2BSAJ-ByH33m4W.js";import"./chunk-YQO7BFFX-B4KLri48.js";import"./chunk-MFVQSVQB-BInMUJ5Q.js";import"./chunk-6CVSDS6C-EjyqZFPp.js";import"./chunk-46CXQZ4E-Cu23NgCw.js";const H=()=>e.jsx(_,{width:"full",sx:{mt:8,mb:4},children:e.jsxs(g,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"center",gap:4,children:[e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})})]})});function X(r){if(typeof r!="string"||r.length<1)return!1;const o=r[0];return o>="0"&&o<="9"?!1:/^[A-Za-z0-9_]*$/.test(r)}function k(r){return X(r)?typeof r=="string"&&r[0]!=="_":!1}class Q extends E{validate(o){if(typeof o=="string"){const t=o.trim();if(k(o))return t}this.throwError(o)}}const Z=L({db_host:m().required("Ingrese el host de la base de datos"),db_port:x().required("Ingrese un puerto").typeError("Ingrese un número de puerto válido").test("is-port","Ingrese un puerto válido",r=>j(B,r)),db_user:m().required("Ingrese el usuario de la base de datos"),db_password:m().required("Ingrese la contraseña de la base de datos"),tango_dictionary:m().required("Ingrese el diccionario base de Tango").test("mssql-db-name","Ingrese un nombre de Diccionario base válido",r=>j(Q,r)),db_connection_timeout_seconds:x().min(u,`El tiempo de espera debe ser mayor a ${u} segundos`).max(f,`El tiempo de espera debe ser menor a ${f} segundos`).required("Ingrese el tiempo de espera de la conexión a la base de datos").typeError("Ingrese el tiempo de espera de la conexión a la base de datos")}).required(),J=r=>{const{stateData:o}=r,t=U(),p=w(),{handleSubmit:h,control:a,reset:W,setError:C,formState:{errors:S,isSubmitting:I,isSubmitSuccessful:P}}=V({defaultValues:o,resolver:$(Z)}),i=P||I,N=async T=>{(await M(T,t)).map({success:c=>{p({title:O,status:"success"}),t.navigate(l)},error:c=>{p({title:y,status:"error"}),C("root",{message:c.info.error_description})}})};return e.jsx("form",{noValidate:!0,onSubmit:h(N),children:e.jsxs(_,{children:[e.jsx(v,{errors:S}),e.jsx(b,{children:e.jsxs(g,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"db_host",id:"db_host",type:"text"},formControlProps:{isDisabled:i},formControlInnerProps:{label:"Host"},control:a})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"db_port",id:"db_port",type:"number",inputMode:"tel",htmlSize:5,width:"auto"},formControlProps:{isDisabled:i},formControlInnerProps:{label:"Puerto"},control:a})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"db_user",id:"db_user",type:"text"},formControlProps:{isDisabled:i},formControlInnerProps:{label:"Usuario SQL"},control:a})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"db_password",id:"db_password",type:"password"},formControlProps:{isDisabled:i},formControlInnerProps:{label:"Contraseña SQL"},control:a})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"tango_dictionary",id:"tango_dictionary",type:"text"},formControlProps:{isDisabled:i},formControlInnerProps:{label:"Diccionario base"},control:a})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"db_connection_timeout_seconds",id:"db_connection_timeout_seconds",type:"number",inputMode:"tel",htmlSize:5,maxLength:5,width:"auto"},formControlProps:{isDisabled:i},formControlInnerProps:{label:"Tiempo de espera (segundos)"},control:a})})]})}),e.jsx(b,{children:e.jsx(z,{isLoading:i})})]})})},K=()=>{const{state:r,retry:o}=F({...R,silent:!0});return r.map({loading:t=>e.jsx(H,{}),error:({error:t})=>e.jsx(G,{error:t,retry:o,cancelAndNavigateTo:l}),success:t=>e.jsx(J,{stateData:t.data})})};function Ae(){const r=D();return e.jsxs(e.Fragment,{children:[e.jsx(q,{title:A,returnButton:{buttonProps:{onClick:()=>{r(l)}}}}),e.jsx(K,{})]})}export{Ae as default};
