import{u as j}from"./useDXTApiFetch-BjHmfZbr.js";import{j as d,r as S}from"./emotion-element-43c6fea0.browser.esm-Bukkp3pI.js";import{u as P,F as O}from"./yup-BdZyDz3M.js";import{F as y}from"./index.esm-DZ5Rht_2.js";import{i as C,X as E}from"./auth_context-D8ug2Qcd.js";import{a as F}from"./app-B420985G.js";import{b as L}from"./app_resources-CEgZe0CK.js";import{S as I,c as R,a as B}from"./select-rNofBLKa.js";import{F as T,a as k}from"./chunk-56K2BSAJ-8vSmiqh4.js";const A=n=>{const{data:t,fieldsMap:e,disabledIcon:r}=n,s=[];return t.length&&t.forEach(o=>{const a=Array.isArray(e==null?void 0:e.label)?e.label.map(u=>o[u]).join(" - "):o[(e==null?void 0:e.label)??"name"];s.push({label:a,value:o[(e==null?void 0:e.value)??"id"],...(e==null?void 0:e.selected)!=null&&{selected:o[e.selected]},...(e==null?void 0:e.isEnabled)!=null&&{isDisabled:!o[e.isEnabled]},...(e==null?void 0:e.isEnabled)!=null&&r!=null&&!o[e==null?void 0:e.isEnabled]&&{icon:r}})}),s};function Y(n){const{endpoint:t,params:e,fieldsMap:r,disabledIcon:s}=n,{state:o,retry:a}=j({...t,silent:!0,params:e}),u=o.mapOrElse({success:i=>{const f=i.data;return A({data:f,fieldsMap:r,disabledIcon:s})},orElse:()=>[]});return{state:o,result:u}}const H=n=>typeof n=="string"&&["sm","md","lg"].includes(n),D=n=>H(n)?n:n==="xs"?"sm":n==="xl"?"lg":"md",V=n=>{const t=E(),e=D(t.components.Input.defaultProps.size),r=n??e;return L(typeof r=="string"?[r]:r,{fallback:"md"})||e},N=n=>{var v;const{className:t,cx:e,innerRef:r,children:s,maxHeight:o,isMulti:a,innerProps:u,selectProps:{chakraStyles:i,size:f,variant:h,focusBorderColor:b,errorBorderColor:p}}=n,x=C("Menu"),l=V(f),m=C("Input",{size:l,variant:h,focusBorderColor:b,errorBorderColor:p}).field,g={...x.list,minW:"100%","--input-border-radius":m==null?void 0:m["--input-border-radius"],borderRadius:(m==null?void 0:m.borderRadius)||((v=x.list)==null?void 0:v.borderRadius),position:"relative"},z=i!=null&&i.menuList?i.menuList(g,n):g;return d.jsx(F,{role:"listbox",...u,className:e({"menu-list":!0,"menu-list--is-multi":a},t),sx:z,children:s})},X=S.memo(function(n){const{children:t,...e}=n,r=35,{options:s,maxHeight:o,getValue:a}=n,[u]=a(),i=s.indexOf(u),f=Math.floor(o/r),h=i>f?i*r:0,b=Math.min(s.length*r,o);return d.jsx(N,{...n,children:d.jsx(y,{height:b+2,itemCount:S.Children.count(t),itemSize:r,initialScrollOffset:h,width:"100%",outerRef:n.innerRef,overscanCount:20,children:({index:p,style:x})=>d.jsx("div",{style:x,children:S.Children.toArray(t)[p]})})})}),Z=n=>{const{fieldProps:t,formControlProps:e,formControlInnerProps:r,control:s,shouldSort:o}=n,{helperText:a,label:u}=r||{};function i(l,c){return l.label.localeCompare(c.label)}(o??!1)&&t.options.sort(i);const{field:{ref:f,onChange:h,value:b},fieldState:{invalid:p},formState:{errors:x}}=P({name:t.name,control:s});return d.jsxs(T,{...e,isInvalid:p,children:[d.jsx(O,{sx:t.variant==="flushed"?{fontSize:"sm",mb:0}:{},children:u}),d.jsx(I,{...t,ref:f,value:t.options.find(l=>l.value===b),filterOption:R({ignoreAccents:!1}),onChange:(l,c)=>h(l.value),useBasicStyles:!0,isSearchable:t.options.length>10?t.isSearchable:!1,instanceId:t.name,chakraStyles:{option:(l,c)=>({...l,...t.virtualized===!0&&{fontSize:{base:"xs",sm:"sm",md:"md"}}})},components:{...t.virtualized===!0&&{MenuList:X},Option:({children:l,...c})=>{t.virtualized===!0&&(delete c.innerProps.onMouseMove,delete c.innerProps.onMouseOver);const m=c.data;return d.jsxs(B.Option,{...c,children:[l," ",m.icon!=null&&m.icon]})}}}),a!=null&&d.jsx(k,{children:a})]})};export{Z as C,A as b,Y as u};
