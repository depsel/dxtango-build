var fr=Object.defineProperty;var hr=(t,n,e)=>n in t?fr(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var g=(t,n,e)=>(hr(t,typeof n!="symbol"?n+"":n,e),e);import{j as s,r as v,p as ze,u as on,o as sn}from"./emotion-element-43c6fea0.browser.esm-Cuif_eEn.js";import{j as Qe,f as pe,c as Pe,d as ge,O as Ne,R as X,bQ as Ge,I as mr,aw as pr,at as cn,bR as Yt,bS as Ze,i as ln,o as dn,am as un,bT as gr,au as yr,ad as br,bU as wr,bV as xr,bW as vr,bX as Dr,bY as Pr,bZ as Or,b_ as Tr,a7 as kr,g as fe,a8 as _r,ar as Mr,B as ve,ax as jr,b$ as Cr,_ as oe,b0 as Er,c0 as ke,ag as tt,a1 as Je,b2 as nt,b8 as Nr,l as Ir,c1 as Ar}from"./auth_context-B-Tcig0k.js";import{a as Sr,b as Rr,c as Fr,d as Wr,e as Lr,f as Hr,g as Br,h as Yr}from"./order.api_hooks-CSsqO2_h.js";import{g as Fe,c as qt,h as $t,b as qr,e as de,i as $r,a as pt,u as Vr,j as Ie,d as zr,o as Qr,F as Gr}from"./index.esm-DXKbKlYo.js";import{u as fn,e as xt,O as hn,c as Ur,b as Xr,f as Kr,g as Zr}from"./events-l6No6g-S.js";import{u as Mt,a as Jr}from"./app_resources-CDkSSx5t.js";import{S as ea,u as ta}from"./SearchField-Ciu5eLKz.js";import{a as De,Q as na,R as ra,X as aa,Y as oa,Z as sa,_ as ia,$ as ca,a0 as la,a1 as da,a2 as ua,a3 as fa,a4 as et,a5 as ha,a6 as ma}from"./app-BdYyDs5S.js";import{T as mn,l as he,O as pn,a4 as jt,a5 as gn,a6 as pa,a7 as ga,a8 as ya,a9 as ba,aa as wa,ab as xa,ac as va,ad as Da}from"./TextPrice-BKP0caI3.js";import{F as Pa}from"./FormErrors-DgI5zxIH.js";import{N as yn}from"./Navbar-BPoDUv4m.js";import{R as He}from"./ResponsiveIconButton-Ccujq6NG.js";import{F as vt}from"./chunk-KRPLQIP4-DRGOXS8W.js";import{H as bn}from"./chunk-3ASUQ6PA-ByZtqmzd.js";import{u as Oa,M as Ta}from"./MessageToUserDialog-CBQLHKHO.js";import{T as wn,a as xn,b as vn,c as Dn}from"./chunk-T2WCTPDH-0Qni0mTa.js";import{T as ka}from"./chunk-2OOHT3W5-y4h3Shmy.js";import{b as _e,C as Me}from"./ControlledSelect-CjhzTTii.js";import{C as Dt}from"./CommonCard-BQfjnTT7.js";import{G as $e,a as W}from"./chunk-ZPFGWTBB-CfuIyNTX.js";import{m as Pn,S as _a}from"./chunk-ZHMYA64R-Cq5LpG9O.js";import{V as Ma}from"./chunk-NTCQBYKE-BJvKyHSx.js";import{H as se}from"./chunk-7OLJDQMT-DB_eYbVs.js";import{D as ja}from"./chunk-W7WUSNWJ-CDK2m9PS.js";import{g as Ca,h as Ea,i as Na,j as Ia,k as Aa,l as Sa,m as Ra,n as Fa,o as gt}from"./chunk-HB6KBUMZ-CJPGLeRv.js";import{a as Wa}from"./chunk-6CVSDS6C-B4Ua9FB8.js";import{F as La,a as Ha}from"./chunk-56K2BSAJ-r8NF7IGV.js";import{F as Ba}from"./chunk-H46NUPBZ-Cf5o4NPi.js";import{C as Vt}from"./ControlledInput-DsnpheB0.js";import{C as Ya}from"./ControlledTextarea-acTj6uTp.js";import{A as qa}from"./index-DtHspM0R.js";import{u as yt,A as $a}from"./chunk-ALC6QPCI-C2jRzl9i.js";import{A as Va}from"./chunk-3KCBMPN5-CdY7cck7.js";import{B as za}from"./chunk-Z6RXEUPO-DTekSvPj.js";import{A as Qa}from"./ApiErrors-GUSgL-Xy.js";import{F as Ga,a as je}from"./FormSkeletons-CoMZNYRx.js";import{C as Ua}from"./CommonErrors-Cf1BB0Pn.js";var[Xa,dt]=Qe({name:"AccordionStylesContext",hookName:"useAccordionStyles",providerName:"<Accordion />"}),[Ka,Ct]=Qe({name:"AccordionItemContext",hookName:"useAccordionItemContext",providerName:"<AccordionItem />"}),[Za,El,Ja,eo]=Ca(),On=pe(function(n,e){const{getButtonProps:r}=Ct(),a=r(n,e),i={display:"flex",alignItems:"center",width:"100%",outline:0,...dt().button};return s.jsx(Pe.button,{...a,className:ge("chakra-accordion__button",n.className),__css:i})});On.displayName="AccordionButton";function to(t){const{value:n,defaultValue:e,onChange:r,shouldUpdate:a=(b,p)=>b!==p}=t,o=yt(r),i=yt(a),[c,l]=v.useState(e),d=n!==void 0,u=d?n:c,f=yt(b=>{const h=typeof b=="function"?b(u):b;i(u,h)&&(d||l(h),o(h))},[d,o,u,i]);return[u,f]}function no(t){const{onChange:n,defaultIndex:e,index:r,allowMultiple:a,allowToggle:o,...i}=t;oo(t),so(t);const c=Ja(),[l,d]=v.useState(-1);v.useEffect(()=>()=>{d(-1)},[]);const[u,f]=to({value:r,defaultValue(){return a?e??[]:e??-1},onChange:n});return{index:u,setIndex:f,htmlProps:i,getAccordionItemProps:p=>{let h=!1;return p!==null&&(h=Array.isArray(u)?u.includes(p):u===p),{isOpen:h,onChange:m=>{if(p!==null)if(a&&Array.isArray(u)){const D=m?u.concat(p):u.filter(O=>O!==p);f(D)}else m?f(p):o&&f(-1)}}},focusedIndex:l,setFocusedIndex:d,descendants:c}}var[ro,Et]=Qe({name:"AccordionContext",hookName:"useAccordionContext",providerName:"Accordion"});function ao(t){const{isDisabled:n,isFocusable:e,id:r,...a}=t,{getAccordionItemProps:o,setFocusedIndex:i}=Et(),c=v.useRef(null),l=v.useId(),d=r??l,u=`accordion-button-${d}`,f=`accordion-panel-${d}`;io(t);const{register:b,index:p,descendants:h}=eo({disabled:n&&!e}),{isOpen:y,onChange:m}=o(p===-1?null:p);co({isOpen:y,isDisabled:n});const D=()=>{m==null||m(!0)},O=()=>{m==null||m(!1)},w=v.useCallback(()=>{m==null||m(!y),i(p)},[p,i,y,m]),x=v.useCallback(I=>{const P={ArrowDown:()=>{const N=h.nextEnabled(p);N==null||N.node.focus()},ArrowUp:()=>{const N=h.prevEnabled(p);N==null||N.node.focus()},Home:()=>{const N=h.firstEnabled();N==null||N.node.focus()},End:()=>{const N=h.lastEnabled();N==null||N.node.focus()}}[I.key];P&&(I.preventDefault(),P(I))},[h,p]),T=v.useCallback(()=>{i(p)},[i,p]),j=v.useCallback(function(E={},P=null){return{...E,type:"button",ref:Ne(b,c,P),id:u,disabled:!!n,"aria-expanded":!!y,"aria-controls":f,onClick:X(E.onClick,w),onFocus:X(E.onFocus,T),onKeyDown:X(E.onKeyDown,x)}},[u,n,y,w,T,x,f,b]),R=v.useCallback(function(E={},P=null){return{...E,ref:P,role:"region",id:f,"aria-labelledby":u,hidden:!y}},[u,y,f]);return{isOpen:y,isDisabled:n,isFocusable:e,onOpen:D,onClose:O,getButtonProps:j,getPanelProps:R,htmlProps:a}}function oo(t){const n=t.index||t.defaultIndex,e=n!=null&&!Array.isArray(n)&&t.allowMultiple;Ge({condition:!!e,message:`If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: ${typeof n},`})}function so(t){Ge({condition:!!(t.allowMultiple&&t.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}function io(t){Ge({condition:!!(t.isFocusable&&!t.isDisabled),message:`Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.
    `})}function co(t){Ge({condition:t.isOpen&&!!t.isDisabled,message:"Cannot open a disabled accordion item"})}function Tn(t){const{isOpen:n,isDisabled:e}=Ct(),{reduceMotion:r}=Et(),a=ge("chakra-accordion__icon",t.className),o=dt(),i={opacity:e?.4:1,transform:n?"rotate(-180deg)":void 0,transition:r?void 0:"transform 0.2s",transformOrigin:"center",...o.icon};return s.jsx(mr,{viewBox:"0 0 24 24","aria-hidden":!0,className:a,__css:i,...t,children:s.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})})}Tn.displayName="AccordionIcon";var kn=pe(function(n,e){const{children:r,className:a}=n,{htmlProps:o,...i}=ao(n),l={...dt().container,overflowAnchor:"none"},d=v.useMemo(()=>i,[i]);return s.jsx(Ka,{value:d,children:s.jsx(Pe.div,{ref:e,...o,className:ge("chakra-accordion__item",a),__css:l,children:typeof r=="function"?r({isExpanded:!!i.isOpen,isDisabled:!!i.isDisabled}):r})})});kn.displayName="AccordionItem";var lo=t=>t!=null&&parseInt(t.toString(),10)>0,zt={exit:{height:{duration:.2,ease:Ze.ease},opacity:{duration:.3,ease:Ze.ease}},enter:{height:{duration:.3,ease:Ze.ease},opacity:{duration:.4,ease:Ze.ease}}},uo={exit:({animateOpacity:t,startingHeight:n,transition:e,transitionEnd:r,delay:a})=>{var o;return{...t&&{opacity:lo(n)?1:0},height:n,transitionEnd:r==null?void 0:r.exit,transition:(o=e==null?void 0:e.exit)!=null?o:Yt.exit(zt.exit,a)}},enter:({animateOpacity:t,endingHeight:n,transition:e,transitionEnd:r,delay:a})=>{var o;return{...t&&{opacity:1},height:n,transitionEnd:r==null?void 0:r.enter,transition:(o=e==null?void 0:e.enter)!=null?o:Yt.enter(zt.enter,a)}}},Nt=v.forwardRef((t,n)=>{const{in:e,unmountOnExit:r,animateOpacity:a=!0,startingHeight:o=0,endingHeight:i="auto",style:c,className:l,transition:d,transitionEnd:u,...f}=t,[b,p]=v.useState(!1);v.useEffect(()=>{const O=setTimeout(()=>{p(!0)});return()=>clearTimeout(O)},[]),Ge({condition:Number(o)>0&&!!r,message:"startingHeight and unmountOnExit are mutually exclusive. You can't use them together"});const h=parseFloat(o.toString())>0,y={startingHeight:o,endingHeight:i,animateOpacity:a,transition:b?d:{enter:{duration:0}},transitionEnd:{enter:u==null?void 0:u.enter,exit:r?u==null?void 0:u.exit:{...u==null?void 0:u.exit,display:h?"block":"none"}}},m=r?e:!0,D=e||r?"enter":"exit";return s.jsx(pr,{initial:!1,custom:y,children:m&&s.jsx(cn.div,{ref:n,...f,className:ge("chakra-collapse",l),style:{overflow:"hidden",display:"block",...c},custom:y,variants:uo,initial:r?"exit":!1,animate:D,exit:"exit"})})});Nt.displayName="Collapse";var _n=pe(function(n,e){const{className:r,motionProps:a,...o}=n,{reduceMotion:i}=Et(),{getPanelProps:c,isOpen:l}=Ct(),d=c(o,e),u=ge("chakra-accordion__panel",r),f=dt();i||delete d.hidden;const b=s.jsx(Pe.div,{...d,__css:f.panel,className:u});return i?b:s.jsx(Nt,{in:l,...a,children:b})});_n.displayName="AccordionPanel";var Mn=pe(function({children:n,reduceMotion:e,...r},a){const o=ln("Accordion",r),i=dn(r),{htmlProps:c,descendants:l,...d}=no(i),u=v.useMemo(()=>({...d,reduceMotion:!!e}),[d,e]);return s.jsx(Za,{value:l,children:s.jsx(ro,{value:u,children:s.jsx(Xa,{value:o,children:s.jsx(Pe.div,{ref:a,...c,className:ge("chakra-accordion",r.className),__css:o.root,children:n})})})})});Mn.displayName="Accordion";function fo(t){return"current"in t}var jn=()=>typeof window<"u";function ho(){var t;const n=navigator.userAgentData;return(t=n==null?void 0:n.platform)!=null?t:navigator.platform}var mo=t=>jn()&&t.test(navigator.vendor),po=t=>jn()&&t.test(ho()),go=()=>po(/mac|iphone|ipad|ipod/i),yo=()=>go()&&mo(/apple/i);function bo(t){const{ref:n,elements:e,enabled:r}=t,a=()=>{var o,i;return(i=(o=n.current)==null?void 0:o.ownerDocument)!=null?i:document};Ea(a,"pointerdown",o=>{if(!yo()||!r)return;const i=o.target,l=(e??[n]).some(d=>{const u=fo(d)?d.current:d;return(u==null?void 0:u.contains(i))||u===i});a().activeElement!==i&&l&&(o.preventDefault(),i.focus())})}var Cn={exports:{}},wo="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",xo=wo,vo=xo;function En(){}function Nn(){}Nn.resetWarningCache=En;var Do=function(){function t(r,a,o,i,c,l){if(l!==vo){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function n(){return t}var e={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:n,element:t,elementType:t,instanceOf:n,node:t,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:Nn,resetWarningCache:En};return e.PropTypes=e,e};Cn.exports=Do();var Po=Cn.exports;const G=ze(Po);var In=pe(function(n,e){const{columns:r,spacingX:a,spacingY:o,spacing:i,minChildWidth:c,...l}=n,d=un(),u=c?To(c,d):ko(r);return s.jsx($e,{ref:e,gap:i,columnGap:a,rowGap:o,templateColumns:u,...l})});In.displayName="SimpleGrid";function Oo(t){return typeof t=="number"?`${t}px`:t}function To(t,n){return Pn(t,e=>{const r=gr("sizes",e,Oo(e))(n);return e===null?null:`repeat(auto-fit, minmax(${r}, 1fr))`})}function ko(t){return Pn(t,n=>n===null?null:`repeat(${n}, minmax(0, 1fr))`)}var[_o,Ue]=Qe({name:"PopoverContext",errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"}),[Mo,An]=Qe({name:"PopoverStylesContext",errorMessage:`usePopoverStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Popover />" `});function Pt(t){const n=v.Children.only(t.children),{getTriggerProps:e}=Ue();return v.cloneElement(n,e(n.props,n.ref))}Pt.displayName="PopoverTrigger";var Ce={click:"click",hover:"hover"};function jo(t={}){const{closeOnBlur:n=!0,closeOnEsc:e=!0,initialFocusRef:r,id:a,returnFocusOnClose:o=!0,autoFocus:i=!0,arrowSize:c,arrowShadowColor:l,trigger:d=Ce.click,openDelay:u=200,closeDelay:f=200,isLazy:b,lazyBehavior:p="unmount",computePositionOnMount:h,...y}=t,{isOpen:m,onClose:D,onOpen:O,onToggle:w}=Na(t),x=v.useRef(null),T=v.useRef(null),j=v.useRef(null),R=v.useRef(!1),I=v.useRef(!1);m&&(I.current=!0);const[E,P]=v.useState(!1),[N,K]=v.useState(!1),Le=v.useId(),Oe=a??Le,[Te,ie,ce,le]=["popover-trigger","popover-content","popover-header","popover-body"].map(C=>`${C}-${Oe}`),{referenceRef:te,getArrowProps:A,getPopperProps:_,getArrowInnerProps:F,forceUpdate:z}=Ia({...y,enabled:m||!!h}),V=Aa({isOpen:m,ref:j});bo({enabled:m,ref:T}),Sa(j,{focusRef:T,visible:m,shouldFocus:o&&d===Ce.click}),Ra(j,{focusRef:r,visible:m,shouldFocus:i&&d===Ce.click});const U=Fa({wasSelected:I.current,enabled:b,mode:p,isSelected:V.present}),ne=v.useCallback((C={},Z=null)=>{const $={...C,style:{...C.style,transformOrigin:gt.transformOrigin.varRef,[gt.arrowSize.var]:c?`${c}px`:void 0,[gt.arrowShadowColor.var]:l},ref:Ne(j,Z),children:U?C.children:null,id:ie,tabIndex:-1,role:"dialog",onKeyDown:X(C.onKeyDown,ae=>{e&&ae.key==="Escape"&&D()}),onBlur:X(C.onBlur,ae=>{const Ke=Qt(ae),mt=bt(j.current,Ke),ur=bt(T.current,Ke);m&&n&&(!mt&&!ur)&&D()}),"aria-labelledby":E?ce:void 0,"aria-describedby":N?le:void 0};return d===Ce.hover&&($.role="tooltip",$.onMouseEnter=X(C.onMouseEnter,()=>{R.current=!0}),$.onMouseLeave=X(C.onMouseLeave,ae=>{ae.nativeEvent.relatedTarget!==null&&(R.current=!1,setTimeout(()=>D(),f))})),$},[U,ie,E,ce,N,le,d,e,D,m,n,f,l,c]),Q=v.useCallback((C={},Z=null)=>_({...C,style:{visibility:m?"visible":"hidden",...C.style}},Z),[m,_]),re=v.useCallback((C,Z=null)=>({...C,ref:Ne(Z,x,te)}),[x,te]),ye=v.useRef(),ht=v.useRef(),Bt=v.useCallback(C=>{x.current==null&&te(C)},[te]),cr=v.useCallback((C={},Z=null)=>{const $={...C,ref:Ne(T,Z,Bt),id:Te,"aria-haspopup":"dialog","aria-expanded":m,"aria-controls":ie};return d===Ce.click&&($.onClick=X(C.onClick,w)),d===Ce.hover&&($.onFocus=X(C.onFocus,()=>{ye.current===void 0&&O()}),$.onBlur=X(C.onBlur,ae=>{const Ke=Qt(ae),mt=!bt(j.current,Ke);m&&n&&mt&&D()}),$.onKeyDown=X(C.onKeyDown,ae=>{ae.key==="Escape"&&D()}),$.onMouseEnter=X(C.onMouseEnter,()=>{R.current=!0,ye.current=window.setTimeout(()=>O(),u)}),$.onMouseLeave=X(C.onMouseLeave,()=>{R.current=!1,ye.current&&(clearTimeout(ye.current),ye.current=void 0),ht.current=window.setTimeout(()=>{R.current===!1&&D()},f)})),$},[Te,m,ie,d,Bt,w,O,n,D,u,f]);v.useEffect(()=>()=>{ye.current&&clearTimeout(ye.current),ht.current&&clearTimeout(ht.current)},[]);const lr=v.useCallback((C={},Z=null)=>({...C,id:ce,ref:Ne(Z,$=>{P(!!$)})}),[ce]),dr=v.useCallback((C={},Z=null)=>({...C,id:le,ref:Ne(Z,$=>{K(!!$)})}),[le]);return{forceUpdate:z,isOpen:m,onAnimationComplete:V.onComplete,onClose:D,getAnchorProps:re,getArrowProps:A,getArrowInnerProps:F,getPopoverPositionerProps:Q,getPopoverProps:ne,getTriggerProps:cr,getHeaderProps:lr,getBodyProps:dr}}function bt(t,n){return t===n||(t==null?void 0:t.contains(n))}function Qt(t){var n;const e=t.currentTarget.ownerDocument.activeElement;return(n=t.relatedTarget)!=null?n:e}function Sn(t){const n=ln("Popover",t),{children:e,...r}=dn(t),a=un(),o=jo({...r,direction:a.direction});return s.jsx(_o,{value:o,children:s.jsx(Mo,{value:n,children:yr(e,{isOpen:o.isOpen,onClose:o.onClose,forceUpdate:o.forceUpdate})})})}Sn.displayName="Popover";function Rn(t){const n=v.Children.only(t.children),{getAnchorProps:e}=Ue();return v.cloneElement(n,e(n.props,n.ref))}Rn.displayName="PopoverAnchor";var Fn=pe(function(n,e){const{getBodyProps:r}=Ue(),a=An();return s.jsx(Pe.div,{...r(n,e),className:ge("chakra-popover__body",n.className),__css:a.body})});Fn.displayName="PopoverBody";function Co(t){if(t)return{enter:{...t.enter,visibility:"visible"},exit:{...t.exit,transitionEnd:{visibility:"hidden"}}}}var Eo={exit:{opacity:0,scale:.95,transition:{duration:.1,ease:[.4,0,1,1]}},enter:{scale:1,opacity:1,transition:{duration:.15,ease:[0,0,.2,1]}}},No=Pe(cn.section),Wn=pe(function(n,e){const{variants:r=Eo,...a}=n,{isOpen:o}=Ue();return s.jsx(No,{ref:e,variants:Co(r),initial:!1,animate:o?"enter":"exit",...a})});Wn.displayName="PopoverTransition";var Ln=pe(function(n,e){const{rootProps:r,motionProps:a,...o}=n,{getPopoverProps:i,getPopoverPositionerProps:c,onAnimationComplete:l}=Ue(),d=An(),u={position:"relative",display:"flex",flexDirection:"column",...d.content};return s.jsx(Pe.div,{...c(r),__css:d.popper,className:"chakra-popover__popper",children:s.jsx(Wn,{...a,...i(o,e),onAnimationComplete:br(l,o.onAnimationComplete),className:ge("chakra-popover__content",n.className),__css:u})})});Ln.displayName="PopoverContent";const Io=t=>Sr(t,!0),Ao=t=>Rr(t,!0),So=t=>Fr(t,!0),Ro=t=>Wr(t,!0);function q(t){const n=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&n==="[object Date]"?new t.constructor(+t):typeof t=="number"||n==="[object Number]"||typeof t=="string"||n==="[object String]"?new Date(t):new Date(NaN)}function L(t,n){return t instanceof Date?new t.constructor(n):new Date(n)}function Hn(t,n){const e=q(t);return isNaN(n)?L(t,NaN):(n&&e.setDate(e.getDate()+n),e)}const Bn=6048e5,Fo=864e5,Wo=6e4,Lo=36e5,Ho=1e3;let Bo={};function We(){return Bo}function me(t,n){var c,l,d,u;const e=We(),r=(n==null?void 0:n.weekStartsOn)??((l=(c=n==null?void 0:n.locale)==null?void 0:c.options)==null?void 0:l.weekStartsOn)??e.weekStartsOn??((u=(d=e.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=q(t),o=a.getDay(),i=(o<r?7:0)+o-r;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function Ae(t){return me(t,{weekStartsOn:1})}function Yn(t){const n=q(t),e=n.getFullYear(),r=L(t,0);r.setFullYear(e+1,0,4),r.setHours(0,0,0,0);const a=Ae(r),o=L(t,0);o.setFullYear(e,0,4),o.setHours(0,0,0,0);const i=Ae(o);return n.getTime()>=a.getTime()?e+1:n.getTime()>=i.getTime()?e:e-1}function Ot(t){const n=q(t);return n.setHours(0,0,0,0),n}function rt(t){const n=q(t),e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),+t-+e}function Yo(t,n){const e=Ot(t),r=Ot(n),a=+e-rt(e),o=+r-rt(r);return Math.round((a-o)/Fo)}function qo(t){const n=Yn(t),e=L(t,0);return e.setFullYear(n,0,4),e.setHours(0,0,0,0),Ae(e)}function qn(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function $o(t){if(!qn(t)&&typeof t!="number")return!1;const n=q(t);return!isNaN(Number(n))}function Vo(t){const n=q(t),e=L(t,0);return e.setFullYear(n.getFullYear(),0,1),e.setHours(0,0,0,0),e}const zo={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Qo=(t,n,e)=>{let r;const a=zo[t];return typeof a=="string"?r=a:n===1?r=a.one:r=a.other.replace("{{count}}",n.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+r:r+" ago":r};function wt(t){return(n={})=>{const e=n.width?String(n.width):t.defaultWidth;return t.formats[e]||t.formats[t.defaultWidth]}}const Go={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Uo={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Xo={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ko={date:wt({formats:Go,defaultWidth:"full"}),time:wt({formats:Uo,defaultWidth:"full"}),dateTime:wt({formats:Xo,defaultWidth:"full"})},Zo={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Jo=(t,n,e,r)=>Zo[t];function Be(t){return(n,e)=>{const r=e!=null&&e.context?String(e.context):"standalone";let a;if(r==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,c=e!=null&&e.width?String(e.width):i;a=t.formattingValues[c]||t.formattingValues[i]}else{const i=t.defaultWidth,c=e!=null&&e.width?String(e.width):t.defaultWidth;a=t.values[c]||t.values[i]}const o=t.argumentCallback?t.argumentCallback(n):n;return a[o]}}const es={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ts={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ns={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},rs={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},as={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},os={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ss=(t,n)=>{const e=Number(t),r=e%100;if(r>20||r<10)switch(r%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},is={ordinalNumber:ss,era:Be({values:es,defaultWidth:"wide"}),quarter:Be({values:ts,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Be({values:ns,defaultWidth:"wide"}),day:Be({values:rs,defaultWidth:"wide"}),dayPeriod:Be({values:as,defaultWidth:"wide",formattingValues:os,defaultFormattingWidth:"wide"})};function Ye(t){return(n,e={})=>{const r=e.width,a=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=n.match(a);if(!o)return null;const i=o[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(c)?ls(c,f=>f.test(i)):cs(c,f=>f.test(i));let d;d=t.valueCallback?t.valueCallback(l):l,d=e.valueCallback?e.valueCallback(d):d;const u=n.slice(i.length);return{value:d,rest:u}}}function cs(t,n){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&n(t[e]))return e}function ls(t,n){for(let e=0;e<t.length;e++)if(n(t[e]))return e}function ds(t){return(n,e={})=>{const r=n.match(t.matchPattern);if(!r)return null;const a=r[0],o=n.match(t.parsePattern);if(!o)return null;let i=t.valueCallback?t.valueCallback(o[0]):o[0];i=e.valueCallback?e.valueCallback(i):i;const c=n.slice(a.length);return{value:i,rest:c}}}const us=/^(\d+)(th|st|nd|rd)?/i,fs=/\d+/i,hs={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ms={any:[/^b/i,/^(a|c)/i]},ps={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},gs={any:[/1/i,/2/i,/3/i,/4/i]},ys={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},bs={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ws={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xs={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},vs={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ds={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ps={ordinalNumber:ds({matchPattern:us,parsePattern:fs,valueCallback:t=>parseInt(t,10)}),era:Ye({matchPatterns:hs,defaultMatchWidth:"wide",parsePatterns:ms,defaultParseWidth:"any"}),quarter:Ye({matchPatterns:ps,defaultMatchWidth:"wide",parsePatterns:gs,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ye({matchPatterns:ys,defaultMatchWidth:"wide",parsePatterns:bs,defaultParseWidth:"any"}),day:Ye({matchPatterns:ws,defaultMatchWidth:"wide",parsePatterns:xs,defaultParseWidth:"any"}),dayPeriod:Ye({matchPatterns:vs,defaultMatchWidth:"any",parsePatterns:Ds,defaultParseWidth:"any"})},$n={code:"en-US",formatDistance:Qo,formatLong:Ko,formatRelative:Jo,localize:is,match:Ps,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Os(t){const n=q(t);return Yo(n,Vo(n))+1}function Vn(t){const n=q(t),e=+Ae(n)-+qo(n);return Math.round(e/Bn)+1}function It(t,n){var u,f,b,p;const e=q(t),r=e.getFullYear(),a=We(),o=(n==null?void 0:n.firstWeekContainsDate)??((f=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(b=a.locale)==null?void 0:b.options)==null?void 0:p.firstWeekContainsDate)??1,i=L(t,0);i.setFullYear(r+1,0,o),i.setHours(0,0,0,0);const c=me(i,n),l=L(t,0);l.setFullYear(r,0,o),l.setHours(0,0,0,0);const d=me(l,n);return e.getTime()>=c.getTime()?r+1:e.getTime()>=d.getTime()?r:r-1}function Ts(t,n){var c,l,d,u;const e=We(),r=(n==null?void 0:n.firstWeekContainsDate)??((l=(c=n==null?void 0:n.locale)==null?void 0:c.options)==null?void 0:l.firstWeekContainsDate)??e.firstWeekContainsDate??((u=(d=e.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=It(t,n),o=L(t,0);return o.setFullYear(a,0,r),o.setHours(0,0,0,0),me(o,n)}function zn(t,n){const e=q(t),r=+me(e,n)-+Ts(e,n);return Math.round(r/Bn)+1}function M(t,n){const e=t<0?"-":"",r=Math.abs(t).toString().padStart(n,"0");return e+r}const ue={y(t,n){const e=t.getFullYear(),r=e>0?e:1-e;return M(n==="yy"?r%100:r,n.length)},M(t,n){const e=t.getMonth();return n==="M"?String(e+1):M(e+1,2)},d(t,n){return M(t.getDate(),n.length)},a(t,n){const e=t.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(t,n){return M(t.getHours()%12||12,n.length)},H(t,n){return M(t.getHours(),n.length)},m(t,n){return M(t.getMinutes(),n.length)},s(t,n){return M(t.getSeconds(),n.length)},S(t,n){const e=n.length,r=t.getMilliseconds(),a=Math.trunc(r*Math.pow(10,e-3));return M(a,n.length)}},Ee={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Gt={G:function(t,n,e){const r=t.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return e.era(r,{width:"abbreviated"});case"GGGGG":return e.era(r,{width:"narrow"});case"GGGG":default:return e.era(r,{width:"wide"})}},y:function(t,n,e){if(n==="yo"){const r=t.getFullYear(),a=r>0?r:1-r;return e.ordinalNumber(a,{unit:"year"})}return ue.y(t,n)},Y:function(t,n,e,r){const a=It(t,r),o=a>0?a:1-a;if(n==="YY"){const i=o%100;return M(i,2)}return n==="Yo"?e.ordinalNumber(o,{unit:"year"}):M(o,n.length)},R:function(t,n){const e=Yn(t);return M(e,n.length)},u:function(t,n){const e=t.getFullYear();return M(e,n.length)},Q:function(t,n,e){const r=Math.ceil((t.getMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return M(r,2);case"Qo":return e.ordinalNumber(r,{unit:"quarter"});case"QQQ":return e.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,n,e){const r=Math.ceil((t.getMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return M(r,2);case"qo":return e.ordinalNumber(r,{unit:"quarter"});case"qqq":return e.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,n,e){const r=t.getMonth();switch(n){case"M":case"MM":return ue.M(t,n);case"Mo":return e.ordinalNumber(r+1,{unit:"month"});case"MMM":return e.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(r,{width:"wide",context:"formatting"})}},L:function(t,n,e){const r=t.getMonth();switch(n){case"L":return String(r+1);case"LL":return M(r+1,2);case"Lo":return e.ordinalNumber(r+1,{unit:"month"});case"LLL":return e.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(r,{width:"wide",context:"standalone"})}},w:function(t,n,e,r){const a=zn(t,r);return n==="wo"?e.ordinalNumber(a,{unit:"week"}):M(a,n.length)},I:function(t,n,e){const r=Vn(t);return n==="Io"?e.ordinalNumber(r,{unit:"week"}):M(r,n.length)},d:function(t,n,e){return n==="do"?e.ordinalNumber(t.getDate(),{unit:"date"}):ue.d(t,n)},D:function(t,n,e){const r=Os(t);return n==="Do"?e.ordinalNumber(r,{unit:"dayOfYear"}):M(r,n.length)},E:function(t,n,e){const r=t.getDay();switch(n){case"E":case"EE":case"EEE":return e.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(r,{width:"short",context:"formatting"});case"EEEE":default:return e.day(r,{width:"wide",context:"formatting"})}},e:function(t,n,e,r){const a=t.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return M(o,2);case"eo":return e.ordinalNumber(o,{unit:"day"});case"eee":return e.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(a,{width:"short",context:"formatting"});case"eeee":default:return e.day(a,{width:"wide",context:"formatting"})}},c:function(t,n,e,r){const a=t.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return M(o,n.length);case"co":return e.ordinalNumber(o,{unit:"day"});case"ccc":return e.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(a,{width:"narrow",context:"standalone"});case"cccccc":return e.day(a,{width:"short",context:"standalone"});case"cccc":default:return e.day(a,{width:"wide",context:"standalone"})}},i:function(t,n,e){const r=t.getDay(),a=r===0?7:r;switch(n){case"i":return String(a);case"ii":return M(a,n.length);case"io":return e.ordinalNumber(a,{unit:"day"});case"iii":return e.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(r,{width:"short",context:"formatting"});case"iiii":default:return e.day(r,{width:"wide",context:"formatting"})}},a:function(t,n,e){const a=t.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,n,e){const r=t.getHours();let a;switch(r===12?a=Ee.noon:r===0?a=Ee.midnight:a=r/12>=1?"pm":"am",n){case"b":case"bb":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,n,e){const r=t.getHours();let a;switch(r>=17?a=Ee.evening:r>=12?a=Ee.afternoon:r>=4?a=Ee.morning:a=Ee.night,n){case"B":case"BB":case"BBB":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,n,e){if(n==="ho"){let r=t.getHours()%12;return r===0&&(r=12),e.ordinalNumber(r,{unit:"hour"})}return ue.h(t,n)},H:function(t,n,e){return n==="Ho"?e.ordinalNumber(t.getHours(),{unit:"hour"}):ue.H(t,n)},K:function(t,n,e){const r=t.getHours()%12;return n==="Ko"?e.ordinalNumber(r,{unit:"hour"}):M(r,n.length)},k:function(t,n,e){let r=t.getHours();return r===0&&(r=24),n==="ko"?e.ordinalNumber(r,{unit:"hour"}):M(r,n.length)},m:function(t,n,e){return n==="mo"?e.ordinalNumber(t.getMinutes(),{unit:"minute"}):ue.m(t,n)},s:function(t,n,e){return n==="so"?e.ordinalNumber(t.getSeconds(),{unit:"second"}):ue.s(t,n)},S:function(t,n){return ue.S(t,n)},X:function(t,n,e){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(n){case"X":return Xt(r);case"XXXX":case"XX":return be(r);case"XXXXX":case"XXX":default:return be(r,":")}},x:function(t,n,e){const r=t.getTimezoneOffset();switch(n){case"x":return Xt(r);case"xxxx":case"xx":return be(r);case"xxxxx":case"xxx":default:return be(r,":")}},O:function(t,n,e){const r=t.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Ut(r,":");case"OOOO":default:return"GMT"+be(r,":")}},z:function(t,n,e){const r=t.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Ut(r,":");case"zzzz":default:return"GMT"+be(r,":")}},t:function(t,n,e){const r=Math.trunc(t.getTime()/1e3);return M(r,n.length)},T:function(t,n,e){const r=t.getTime();return M(r,n.length)}};function Ut(t,n=""){const e=t>0?"-":"+",r=Math.abs(t),a=Math.trunc(r/60),o=r%60;return o===0?e+String(a):e+String(a)+n+M(o,2)}function Xt(t,n){return t%60===0?(t>0?"-":"+")+M(Math.abs(t)/60,2):be(t,n)}function be(t,n=""){const e=t>0?"-":"+",r=Math.abs(t),a=M(Math.trunc(r/60),2),o=M(r%60,2);return e+a+n+o}const Kt=(t,n)=>{switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Qn=(t,n)=>{switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},ks=(t,n)=>{const e=t.match(/(P+)(p+)?/)||[],r=e[1],a=e[2];if(!a)return Kt(t,n);let o;switch(r){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",Kt(r,n)).replace("{{time}}",Qn(a,n))},Tt={p:Qn,P:ks},_s=/^D+$/,Ms=/^Y+$/,js=["D","DD","YY","YYYY"];function Gn(t){return _s.test(t)}function Un(t){return Ms.test(t)}function kt(t,n,e){const r=Cs(t,n,e);if(console.warn(r),js.includes(t))throw new RangeError(r)}function Cs(t,n,e){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${n}\`) for formatting ${r} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Es=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ns=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Is=/^'([^]*?)'?$/,As=/''/g,Ss=/[a-zA-Z]/;function we(t,n,e){var u,f,b,p;const r=We(),a=r.locale??$n,o=r.firstWeekContainsDate??((f=(u=r.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,i=r.weekStartsOn??((p=(b=r.locale)==null?void 0:b.options)==null?void 0:p.weekStartsOn)??0,c=q(t);if(!$o(c))throw new RangeError("Invalid time value");let l=n.match(Ns).map(h=>{const y=h[0];if(y==="p"||y==="P"){const m=Tt[y];return m(h,a.formatLong)}return h}).join("").match(Es).map(h=>{if(h==="''")return{isToken:!1,value:"'"};const y=h[0];if(y==="'")return{isToken:!1,value:Rs(h)};if(Gt[y])return{isToken:!0,value:h};if(y.match(Ss))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:h}});a.localize.preprocessor&&(l=a.localize.preprocessor(c,l));const d={firstWeekContainsDate:o,weekStartsOn:i,locale:a};return l.map(h=>{if(!h.isToken)return h.value;const y=h.value;(Un(y)||Gn(y))&&kt(y,n,String(t));const m=Gt[y[0]];return m(c,y,a.localize,d)}).join("")}function Rs(t){const n=t.match(Is);return n?n[1].replace(As,"'"):t}function Fs(){return Object.assign({},We())}function Ws(t){let e=q(t).getDay();return e===0&&(e=7),e}function Ls(t,n){const e=n instanceof Date?L(n,0):new n(0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),e}const Hs=10;class Xn{constructor(){g(this,"subPriority",0)}validate(n,e){return!0}}class Bs extends Xn{constructor(n,e,r,a,o){super(),this.value=n,this.validateValue=e,this.setValue=r,this.priority=a,o&&(this.subPriority=o)}validate(n,e){return this.validateValue(n,this.value,e)}set(n,e,r){return this.setValue(n,e,this.value,r)}}class Ys extends Xn{constructor(){super(...arguments);g(this,"priority",Hs);g(this,"subPriority",-1)}set(e,r){return r.timestampIsSet?e:L(e,Ls(e,Date))}}class k{run(n,e,r,a){const o=this.parse(n,e,r,a);return o?{setter:new Bs(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(n,e,r){return!0}}class qs extends k{constructor(){super(...arguments);g(this,"priority",140);g(this,"incompatibleTokens",["R","u","t","T"])}parse(e,r,a){switch(r){case"G":case"GG":case"GGG":return a.era(e,{width:"abbreviated"})||a.era(e,{width:"narrow"});case"GGGGG":return a.era(e,{width:"narrow"});case"GGGG":default:return a.era(e,{width:"wide"})||a.era(e,{width:"abbreviated"})||a.era(e,{width:"narrow"})}}set(e,r,a){return r.era=a,e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}const B={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},J={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Y(t,n){return t&&{value:n(t.value),rest:t.rest}}function S(t,n){const e=n.match(t);return e?{value:parseInt(e[0],10),rest:n.slice(e[0].length)}:null}function ee(t,n){const e=n.match(t);if(!e)return null;if(e[0]==="Z")return{value:0,rest:n.slice(1)};const r=e[1]==="+"?1:-1,a=e[2]?parseInt(e[2],10):0,o=e[3]?parseInt(e[3],10):0,i=e[5]?parseInt(e[5],10):0;return{value:r*(a*Lo+o*Wo+i*Ho),rest:n.slice(e[0].length)}}function Kn(t){return S(B.anyDigitsSigned,t)}function H(t,n){switch(t){case 1:return S(B.singleDigit,n);case 2:return S(B.twoDigits,n);case 3:return S(B.threeDigits,n);case 4:return S(B.fourDigits,n);default:return S(new RegExp("^\\d{1,"+t+"}"),n)}}function at(t,n){switch(t){case 1:return S(B.singleDigitSigned,n);case 2:return S(B.twoDigitsSigned,n);case 3:return S(B.threeDigitsSigned,n);case 4:return S(B.fourDigitsSigned,n);default:return S(new RegExp("^-?\\d{1,"+t+"}"),n)}}function At(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Zn(t,n){const e=n>0,r=e?n:1-n;let a;if(r<=50)a=t||100;else{const o=r+50,i=Math.trunc(o/100)*100,c=t>=o%100;a=t+i-(c?100:0)}return e?a:1-a}function Jn(t){return t%400===0||t%4===0&&t%100!==0}class $s extends k{constructor(){super(...arguments);g(this,"priority",130);g(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,r,a){const o=i=>({year:i,isTwoDigitYear:r==="yy"});switch(r){case"y":return Y(H(4,e),o);case"yo":return Y(a.ordinalNumber(e,{unit:"year"}),o);default:return Y(H(r.length,e),o)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,a){const o=e.getFullYear();if(a.isTwoDigitYear){const c=Zn(a.year,o);return e.setFullYear(c,0,1),e.setHours(0,0,0,0),e}const i=!("era"in r)||r.era===1?a.year:1-a.year;return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}class Vs extends k{constructor(){super(...arguments);g(this,"priority",130);g(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,r,a){const o=i=>({year:i,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Y(H(4,e),o);case"Yo":return Y(a.ordinalNumber(e,{unit:"year"}),o);default:return Y(H(r.length,e),o)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,a,o){const i=It(e,o);if(a.isTwoDigitYear){const l=Zn(a.year,i);return e.setFullYear(l,0,o.firstWeekContainsDate),e.setHours(0,0,0,0),me(e,o)}const c=!("era"in r)||r.era===1?a.year:1-a.year;return e.setFullYear(c,0,o.firstWeekContainsDate),e.setHours(0,0,0,0),me(e,o)}}class zs extends k{constructor(){super(...arguments);g(this,"priority",130);g(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,r){return at(r==="R"?4:r.length,e)}set(e,r,a){const o=L(e,0);return o.setFullYear(a,0,4),o.setHours(0,0,0,0),Ae(o)}}class Qs extends k{constructor(){super(...arguments);g(this,"priority",130);g(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,r){return at(r==="u"?4:r.length,e)}set(e,r,a){return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class Gs extends k{constructor(){super(...arguments);g(this,"priority",120);g(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,a){switch(r){case"Q":case"QQ":return H(r.length,e);case"Qo":return a.ordinalNumber(e,{unit:"quarter"});case"QQQ":return a.quarter(e,{width:"abbreviated",context:"formatting"})||a.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(e,{width:"wide",context:"formatting"})||a.quarter(e,{width:"abbreviated",context:"formatting"})||a.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=1&&r<=4}set(e,r,a){return e.setMonth((a-1)*3,1),e.setHours(0,0,0,0),e}}class Us extends k{constructor(){super(...arguments);g(this,"priority",120);g(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,a){switch(r){case"q":case"qq":return H(r.length,e);case"qo":return a.ordinalNumber(e,{unit:"quarter"});case"qqq":return a.quarter(e,{width:"abbreviated",context:"standalone"})||a.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(e,{width:"wide",context:"standalone"})||a.quarter(e,{width:"abbreviated",context:"standalone"})||a.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=1&&r<=4}set(e,r,a){return e.setMonth((a-1)*3,1),e.setHours(0,0,0,0),e}}class Xs extends k{constructor(){super(...arguments);g(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);g(this,"priority",110)}parse(e,r,a){const o=i=>i-1;switch(r){case"M":return Y(S(B.month,e),o);case"MM":return Y(H(2,e),o);case"Mo":return Y(a.ordinalNumber(e,{unit:"month"}),o);case"MMM":return a.month(e,{width:"abbreviated",context:"formatting"})||a.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(e,{width:"wide",context:"formatting"})||a.month(e,{width:"abbreviated",context:"formatting"})||a.month(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=11}set(e,r,a){return e.setMonth(a,1),e.setHours(0,0,0,0),e}}class Ks extends k{constructor(){super(...arguments);g(this,"priority",110);g(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,r,a){const o=i=>i-1;switch(r){case"L":return Y(S(B.month,e),o);case"LL":return Y(H(2,e),o);case"Lo":return Y(a.ordinalNumber(e,{unit:"month"}),o);case"LLL":return a.month(e,{width:"abbreviated",context:"standalone"})||a.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(e,{width:"wide",context:"standalone"})||a.month(e,{width:"abbreviated",context:"standalone"})||a.month(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=11}set(e,r,a){return e.setMonth(a,1),e.setHours(0,0,0,0),e}}function Zs(t,n,e){const r=q(t),a=zn(r,e)-n;return r.setDate(r.getDate()-a*7),r}class Js extends k{constructor(){super(...arguments);g(this,"priority",100);g(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,r,a){switch(r){case"w":return S(B.week,e);case"wo":return a.ordinalNumber(e,{unit:"week"});default:return H(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,a,o){return me(Zs(e,a,o),o)}}function ei(t,n){const e=q(t),r=Vn(e)-n;return e.setDate(e.getDate()-r*7),e}class ti extends k{constructor(){super(...arguments);g(this,"priority",100);g(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,r,a){switch(r){case"I":return S(B.week,e);case"Io":return a.ordinalNumber(e,{unit:"week"});default:return H(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,a){return Ae(ei(e,a))}}const ni=[31,28,31,30,31,30,31,31,30,31,30,31],ri=[31,29,31,30,31,30,31,31,30,31,30,31];class ai extends k{constructor(){super(...arguments);g(this,"priority",90);g(this,"subPriority",1);g(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,r,a){switch(r){case"d":return S(B.date,e);case"do":return a.ordinalNumber(e,{unit:"date"});default:return H(r.length,e)}}validate(e,r){const a=e.getFullYear(),o=Jn(a),i=e.getMonth();return o?r>=1&&r<=ri[i]:r>=1&&r<=ni[i]}set(e,r,a){return e.setDate(a),e.setHours(0,0,0,0),e}}class oi extends k{constructor(){super(...arguments);g(this,"priority",90);g(this,"subpriority",1);g(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,r,a){switch(r){case"D":case"DD":return S(B.dayOfYear,e);case"Do":return a.ordinalNumber(e,{unit:"date"});default:return H(r.length,e)}}validate(e,r){const a=e.getFullYear();return Jn(a)?r>=1&&r<=366:r>=1&&r<=365}set(e,r,a){return e.setMonth(0,a),e.setHours(0,0,0,0),e}}function St(t,n,e){var f,b,p,h;const r=We(),a=(e==null?void 0:e.weekStartsOn)??((b=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((h=(p=r.locale)==null?void 0:p.options)==null?void 0:h.weekStartsOn)??0,o=q(t),i=o.getDay(),l=(n%7+7)%7,d=7-a,u=n<0||n>6?n-(i+d)%7:(l+d)%7-(i+d)%7;return Hn(o,u)}class si extends k{constructor(){super(...arguments);g(this,"priority",90);g(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,r,a){switch(r){case"E":case"EE":case"EEE":return a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return a.day(e,{width:"wide",context:"formatting"})||a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,a,o){return e=St(e,a,o),e.setHours(0,0,0,0),e}}class ii extends k{constructor(){super(...arguments);g(this,"priority",90);g(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,r,a,o){const i=c=>{const l=Math.floor((c-1)/7)*7;return(c+o.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Y(H(r.length,e),i);case"eo":return Y(a.ordinalNumber(e,{unit:"day"}),i);case"eee":return a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"eeeee":return a.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return a.day(e,{width:"wide",context:"formatting"})||a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,a,o){return e=St(e,a,o),e.setHours(0,0,0,0),e}}class ci extends k{constructor(){super(...arguments);g(this,"priority",90);g(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,r,a,o){const i=c=>{const l=Math.floor((c-1)/7)*7;return(c+o.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Y(H(r.length,e),i);case"co":return Y(a.ordinalNumber(e,{unit:"day"}),i);case"ccc":return a.day(e,{width:"abbreviated",context:"standalone"})||a.day(e,{width:"short",context:"standalone"})||a.day(e,{width:"narrow",context:"standalone"});case"ccccc":return a.day(e,{width:"narrow",context:"standalone"});case"cccccc":return a.day(e,{width:"short",context:"standalone"})||a.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return a.day(e,{width:"wide",context:"standalone"})||a.day(e,{width:"abbreviated",context:"standalone"})||a.day(e,{width:"short",context:"standalone"})||a.day(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=6}set(e,r,a,o){return e=St(e,a,o),e.setHours(0,0,0,0),e}}function li(t,n){const e=q(t),r=Ws(e),a=n-r;return Hn(e,a)}class di extends k{constructor(){super(...arguments);g(this,"priority",90);g(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,r,a){const o=i=>i===0?7:i;switch(r){case"i":case"ii":return H(r.length,e);case"io":return a.ordinalNumber(e,{unit:"day"});case"iii":return Y(a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"}),o);case"iiiii":return Y(a.day(e,{width:"narrow",context:"formatting"}),o);case"iiiiii":return Y(a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"}),o);case"iiii":default:return Y(a.day(e,{width:"wide",context:"formatting"})||a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"}),o)}}validate(e,r){return r>=1&&r<=7}set(e,r,a){return e=li(e,a),e.setHours(0,0,0,0),e}}class ui extends k{constructor(){super(...arguments);g(this,"priority",80);g(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,r,a){switch(r){case"a":case"aa":case"aaa":return a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(e,{width:"wide",context:"formatting"})||a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,a){return e.setHours(At(a),0,0,0),e}}class fi extends k{constructor(){super(...arguments);g(this,"priority",80);g(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,r,a){switch(r){case"b":case"bb":case"bbb":return a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(e,{width:"wide",context:"formatting"})||a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,a){return e.setHours(At(a),0,0,0),e}}class hi extends k{constructor(){super(...arguments);g(this,"priority",80);g(this,"incompatibleTokens",["a","b","t","T"])}parse(e,r,a){switch(r){case"B":case"BB":case"BBB":return a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(e,{width:"wide",context:"formatting"})||a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,a){return e.setHours(At(a),0,0,0),e}}class mi extends k{constructor(){super(...arguments);g(this,"priority",70);g(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,r,a){switch(r){case"h":return S(B.hour12h,e);case"ho":return a.ordinalNumber(e,{unit:"hour"});default:return H(r.length,e)}}validate(e,r){return r>=1&&r<=12}set(e,r,a){const o=e.getHours()>=12;return o&&a<12?e.setHours(a+12,0,0,0):!o&&a===12?e.setHours(0,0,0,0):e.setHours(a,0,0,0),e}}class pi extends k{constructor(){super(...arguments);g(this,"priority",70);g(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,r,a){switch(r){case"H":return S(B.hour23h,e);case"Ho":return a.ordinalNumber(e,{unit:"hour"});default:return H(r.length,e)}}validate(e,r){return r>=0&&r<=23}set(e,r,a){return e.setHours(a,0,0,0),e}}class gi extends k{constructor(){super(...arguments);g(this,"priority",70);g(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,r,a){switch(r){case"K":return S(B.hour11h,e);case"Ko":return a.ordinalNumber(e,{unit:"hour"});default:return H(r.length,e)}}validate(e,r){return r>=0&&r<=11}set(e,r,a){return e.getHours()>=12&&a<12?e.setHours(a+12,0,0,0):e.setHours(a,0,0,0),e}}class yi extends k{constructor(){super(...arguments);g(this,"priority",70);g(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,r,a){switch(r){case"k":return S(B.hour24h,e);case"ko":return a.ordinalNumber(e,{unit:"hour"});default:return H(r.length,e)}}validate(e,r){return r>=1&&r<=24}set(e,r,a){const o=a<=24?a%24:a;return e.setHours(o,0,0,0),e}}class bi extends k{constructor(){super(...arguments);g(this,"priority",60);g(this,"incompatibleTokens",["t","T"])}parse(e,r,a){switch(r){case"m":return S(B.minute,e);case"mo":return a.ordinalNumber(e,{unit:"minute"});default:return H(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,a){return e.setMinutes(a,0,0),e}}class wi extends k{constructor(){super(...arguments);g(this,"priority",50);g(this,"incompatibleTokens",["t","T"])}parse(e,r,a){switch(r){case"s":return S(B.second,e);case"so":return a.ordinalNumber(e,{unit:"second"});default:return H(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,a){return e.setSeconds(a,0),e}}class xi extends k{constructor(){super(...arguments);g(this,"priority",30);g(this,"incompatibleTokens",["t","T"])}parse(e,r){const a=o=>Math.trunc(o*Math.pow(10,-r.length+3));return Y(H(r.length,e),a)}set(e,r,a){return e.setMilliseconds(a),e}}class vi extends k{constructor(){super(...arguments);g(this,"priority",10);g(this,"incompatibleTokens",["t","T","x"])}parse(e,r){switch(r){case"X":return ee(J.basicOptionalMinutes,e);case"XX":return ee(J.basic,e);case"XXXX":return ee(J.basicOptionalSeconds,e);case"XXXXX":return ee(J.extendedOptionalSeconds,e);case"XXX":default:return ee(J.extended,e)}}set(e,r,a){return r.timestampIsSet?e:L(e,e.getTime()-rt(e)-a)}}class Di extends k{constructor(){super(...arguments);g(this,"priority",10);g(this,"incompatibleTokens",["t","T","X"])}parse(e,r){switch(r){case"x":return ee(J.basicOptionalMinutes,e);case"xx":return ee(J.basic,e);case"xxxx":return ee(J.basicOptionalSeconds,e);case"xxxxx":return ee(J.extendedOptionalSeconds,e);case"xxx":default:return ee(J.extended,e)}}set(e,r,a){return r.timestampIsSet?e:L(e,e.getTime()-rt(e)-a)}}class Pi extends k{constructor(){super(...arguments);g(this,"priority",40);g(this,"incompatibleTokens","*")}parse(e){return Kn(e)}set(e,r,a){return[L(e,a*1e3),{timestampIsSet:!0}]}}class Oi extends k{constructor(){super(...arguments);g(this,"priority",20);g(this,"incompatibleTokens","*")}parse(e){return Kn(e)}set(e,r,a){return[L(e,a),{timestampIsSet:!0}]}}const Ti={G:new qs,y:new $s,Y:new Vs,R:new zs,u:new Qs,Q:new Gs,q:new Us,M:new Xs,L:new Ks,w:new Js,I:new ti,d:new ai,D:new oi,E:new si,e:new ii,c:new ci,i:new di,a:new ui,b:new fi,B:new hi,h:new mi,H:new pi,K:new gi,k:new yi,m:new bi,s:new wi,S:new xi,X:new vi,x:new Di,t:new Pi,T:new Oi},ki=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_i=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Mi=/^'([^]*?)'?$/,ji=/''/g,Ci=/\S/,Ei=/[a-zA-Z]/;function er(t,n,e,r){var y,m,D,O;const a=Fs(),o=a.locale??$n,i=a.firstWeekContainsDate??((m=(y=a.locale)==null?void 0:y.options)==null?void 0:m.firstWeekContainsDate)??1,c=a.weekStartsOn??((O=(D=a.locale)==null?void 0:D.options)==null?void 0:O.weekStartsOn)??0;if(n==="")return t===""?q(e):L(e,NaN);const l={firstWeekContainsDate:i,weekStartsOn:c,locale:o},d=[new Ys],u=n.match(_i).map(w=>{const x=w[0];if(x in Tt){const T=Tt[x];return T(w,o.formatLong)}return w}).join("").match(ki),f=[];for(let w of u){Un(w)&&kt(w,n,t),Gn(w)&&kt(w,n,t);const x=w[0],T=Ti[x];if(T){const{incompatibleTokens:j}=T;if(Array.isArray(j)){const I=f.find(E=>j.includes(E.token)||E.token===x);if(I)throw new RangeError(`The format string mustn't contain \`${I.fullToken}\` and \`${w}\` at the same time`)}else if(T.incompatibleTokens==="*"&&f.length>0)throw new RangeError(`The format string mustn't contain \`${w}\` and any other token at the same time`);f.push({token:x,fullToken:w});const R=T.run(t,w,o.match,l);if(!R)return L(e,NaN);d.push(R.setter),t=R.rest}else{if(x.match(Ei))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");if(w==="''"?w="'":x==="'"&&(w=Ni(w)),t.indexOf(w)===0)t=t.slice(w.length);else return L(e,NaN)}}if(t.length>0&&Ci.test(t))return L(e,NaN);const b=d.map(w=>w.priority).sort((w,x)=>x-w).filter((w,x,T)=>T.indexOf(w)===x).map(w=>d.filter(x=>x.priority===w).sort((x,T)=>T.subPriority-x.subPriority)).map(w=>w[0]);let p=q(e);if(isNaN(p.getTime()))return L(e,NaN);const h={};for(const w of b){if(!w.validate(p,l))return L(e,NaN);const x=w.set(p,h,l);Array.isArray(x)?(p=x[0],Object.assign(h,x[1])):p=x}return L(e,p)}function Ni(t){return t.match(Mi)[1].replace(ji,"'")}function Ii(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var ot=Ii(v),Ai=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Si=function(t,n){var e={};for(var r in t)n.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Zt=function(n){var e=n.color,r=e===void 0?"currentColor":e,a=n.size,o=a===void 0?24:a;n.children;var i=Si(n,["color","size","children"]),c="mdi-icon "+(i.className||"");return ot.createElement("svg",Ai({},i,{className:c,width:o,height:o,fill:r,viewBox:"0 0 24 24"}),ot.createElement("path",{d:"M21,19V17H8V19H21M21,13V11H8V13H21M8,7H21V5H8V7M4,5V7H6V5H4M3,5A1,1 0 0,1 4,4H6A1,1 0 0,1 7,5V7A1,1 0 0,1 6,8H4A1,1 0 0,1 3,7V5M4,11V13H6V11H4M3,11A1,1 0 0,1 4,10H6A1,1 0 0,1 7,11V13A1,1 0 0,1 6,14H4A1,1 0 0,1 3,13V11M4,17V19H6V17H4M3,17A1,1 0 0,1 4,16H6A1,1 0 0,1 7,17V19A1,1 0 0,1 6,20H4A1,1 0 0,1 3,19V17Z"}))},Ri=ot.memo?ot.memo(Zt):Zt,Fi=Ri;const Wi=ze(Fi);function Li(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var st=Li(v),Hi=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Bi=function(t,n){var e={};for(var r in t)n.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Jt=function(n){var e=n.color,r=e===void 0?"currentColor":e,a=n.size,o=a===void 0?24:a;n.children;var i=Bi(n,["color","size","children"]),c="mdi-icon "+(i.className||"");return st.createElement("svg",Hi({},i,{className:c,width:o,height:o,fill:r,viewBox:"0 0 24 24"}),st.createElement("path",{d:"M14 10H3V12H14V10M14 6H3V8H14V6M3 16H10V14H3V16M21.5 11.5L23 13L16 20L11.5 15.5L13 14L16 17L21.5 11.5Z"}))},Yi=st.memo?st.memo(Jt):Jt,qi=Yi;const en=ze(qi);function $i(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var it=$i(v),Vi=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},zi=function(t,n){var e={};for(var r in t)n.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},tn=function(n){var e=n.color,r=e===void 0?"currentColor":e,a=n.size,o=a===void 0?24:a;n.children;var i=zi(n,["color","size","children"]),c="mdi-icon "+(i.className||"");return it.createElement("svg",Vi({},i,{className:c,width:o,height:o,fill:r,viewBox:"0 0 24 24"}),it.createElement("path",{d:"M3 6V8H14V6H3M3 10V12H14V10H3M20 10.1C19.9 10.1 19.7 10.2 19.6 10.3L18.6 11.3L20.7 13.4L21.7 12.4C21.9 12.2 21.9 11.8 21.7 11.6L20.4 10.3C20.3 10.2 20.2 10.1 20 10.1M18.1 11.9L12 17.9V20H14.1L20.2 13.9L18.1 11.9M3 14V16H10V14H3Z"}))},Qi=it.memo?it.memo(tn):tn,Gi=Qi;const Ui=ze(Gi);function Xi(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var ct=Xi(v),Ki=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Zi=function(t,n){var e={};for(var r in t)n.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},nn=function(n){var e=n.color,r=e===void 0?"currentColor":e,a=n.size,o=a===void 0?24:a;n.children;var i=Zi(n,["color","size","children"]),c="mdi-icon "+(i.className||"");return ct.createElement("svg",Ki({},i,{className:c,width:o,height:o,fill:r,viewBox:"0 0 24 24"}),ct.createElement("path",{d:"M2,21L23,12L2,3V10L17,12L2,14V21Z"}))},Ji=ct.memo?ct.memo(nn):nn,ec=Ji;const tc=ze(ec),nc=t=>{on();const{handleSubmit:n}=Fe(),{isDraft:e,isUpdating:r,isCopying:a,isDisabled:o,handlePedidoAction:i,handleDraftAction:c,handlePedidoSummary:l,setIsDraft:d,...u}=t;return s.jsx(s.Fragment,{children:s.jsxs(vt,{flex:1,alignItems:"center",justifyContent:"space-between",sx:{mx:4},children:[s.jsxs(bn,{spacing:{base:2,sm:3},alignItems:"center",children:[e?s.jsxs(s.Fragment,{children:[s.jsx(He,{icon:Ui,text:r?Dr:Pr,sharedProps:{size:"sm",fontWeight:"400",colorScheme:"orange",isDisabled:o,onClick:()=>{n(async f=>{await c(f)})()}},iconProps:{boxSize:{base:5,md:4}}}),!r&&!a&&s.jsx(He,{icon:en,text:Or,sharedProps:{size:"sm",fontWeight:"400",colorScheme:"green",isDisabled:o,onClick:()=>{d(!1)}},iconProps:{boxSize:{base:5,md:4}}})]}):s.jsxs(s.Fragment,{children:[s.jsx(He,{icon:tc,text:r?wr:xr,sharedProps:{size:"sm",fontWeight:"400",colorScheme:"orange",isDisabled:o,onClick:()=>{n(async f=>{await i(f)})()}},iconProps:{boxSize:{base:5,md:4}}}),!r&&!a&&s.jsx(He,{icon:en,text:vr,sharedProps:{size:"sm",fontWeight:"400",colorScheme:"green",isDisabled:o,onClick:()=>{d(!0)}},iconProps:{boxSize:{base:5,md:4}}})]}),s.jsx(He,{icon:Wi,text:Tr,sharedProps:{size:"sm",fontWeight:"400",colorScheme:"blue",isDisabled:o,onClick:()=>l()},iconProps:{boxSize:{base:5,md:4}}})]}),s.jsx(vt,{alignItems:"center",sx:{ms:{base:2,sm:3}},children:s.jsx(ea,{...u})})]})})},rc=({app:t,cabecera:n,renglones:e,total:r,bonificacionGlobal:a,title:o,emptyResultText:i,onResolve:c})=>{const l=()=>{c(0)},d=t.authState.isCustomer(),u=fe("var(--chakra-colors-gray-200)","var(--chakra-colors-black)"),f=fe("var(--chakra-colors-gray-400)","var(--chakra-colors-black)"),b=n.usuario_discrimina_iva,p=n.usuario_discrimina_ii,h=`(${pn(b,p)})`,y=s.jsx(ka,{textAlign:"center",children:i}),m=s.jsx(mn,{sx:{p:0,m:0},children:s.jsx(wn,{variant:"stripedOverCard",colorScheme:"gray",size:"md",sx:{borderCollapse:"separate"},children:s.jsx(xn,{children:s.jsx(vn,{children:s.jsx(Dn,{sx:{p:0},children:s.jsxs("table",{width:"100%",cellPadding:8,cellSpacing:4,style:{fontSize:"0.8rem",border:`1px solid ${f}`},children:[s.jsx("thead",{style:{backgroundColor:`${u}`,textTransform:"uppercase"},children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left",style:{width:"70%"},children:"Artculo"}),s.jsx("th",{className:"text-center",style:{width:"15%"},children:"Cantidad"}),s.jsx("th",{className:"text-right",style:{width:"15%"},children:"Subtotal"})]})}),s.jsxs("tbody",{children:[e.map((D,O)=>{const{id:w,codigo:x,nombre:T,cantidad:j,precio:R,bonificacion:I}=D,E=jt(R??0,I??a),P=(j??0)*E;return s.jsxs("tr",{children:[s.jsxs("td",{className:"word-break-all",children:[x," - ",T]}),s.jsx("td",{className:"text-center",children:j}),s.jsx("td",{className:"text-right",children:s.jsx(he,{precio:P,moneda:"$"})})]},`pedido-row-${w}`)}),s.jsxs("tr",{children:[s.jsx("td",{colSpan:2,children:s.jsxs("strong",{children:["Total"," ",a>0?s.jsxs(s.Fragment,{children:[!d&&s.jsxs(s.Fragment,{children:[` -${a}%`," "]}),s.jsx("span",{style:{fontSize:"small"},children:h})]}):s.jsxs("span",{style:{fontSize:"small"},children:[" ",h]})]})}),s.jsx("td",{className:"text-right",children:s.jsx("strong",{children:s.jsx(he,{precio:r??0,moneda:"$"})})})]})]})]})})})})})});return s.jsx(_r,{isOpen:!0,dialogTitle:o,dialogSize:{base:"full",sm:"md",md:"3xl"},dialogContents:e.length?m:y,handleCancel:l,handleCancelWording:Mr})};function ac(){return kr(rc)}const tr=120,_t=120;function rn(t,n){return qn(n)?n:er(n,"yyyy-MM-dd",new Date)}const oc=t=>{const n=qt({fecha_alta:$t().transform(rn).typeError("Ingrese una fecha de alta vlida").required("Ingrese una fecha de alta vlida"),fecha_entrega:$t().transform(rn).min(qr("fecha_alta"),"La fecha de entrega no puede ser anterior a la fecha de alta").typeError("Ingrese una fecha de entrega vlida").required("Ingrese una fecha de alta vlida"),id_condicion:de().required("Seleccione la condicin de venta"),id_asiento:de().required("Seleccione el tipo de asiento"),id_transporte:de().required("Seleccione el transporte"),id_talonario:de().required("Seleccione el talonario"),id_deposito:de().required("Seleccione el depsito"),id_direccion:de().required("Seleccione una direccin"),bonificacion:de().required("Ingrese bonificacin").typeError("Ingrese una bonificacin vlida").min(0,"La bonificacin debe encontrarse entre 0 y 100%").max(100,"La bonificacin debe encontrarse entre 0 y 100%"),quantities:$r().of(de()).test("at-least-one-quantity","Ingrese al menos una cantidad",function(r){return!r||r.length===0?!1:r.some(a=>a!=null&&a>0)}).required("Ingrese al menos una cantidad"),comentarios:pt().default("").max(tr,"Los comentarios no pueden superar los ${max} caracteres"),descripcion:pt().default("").max(_t,"La descripcin no puede superar los ${max} caracteres")}).required(),e=qt({descripcion:pt().required("Ingrese una descripcin").max(_t,"La descripcin no puede superar los ${max} caracteres")});return t?{yupValidationSchema:n.concat(e)}:{yupValidationSchema:n}},sc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ic=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Ve(){return Ve=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Ve.apply(this,arguments)}function Rt(t,n){if(t==null)return{};var e={},r=Object.keys(t),a,o;for(o=0;o<r.length;o++)a=r[o],!(n.indexOf(a)>=0)&&(e[a]=t[a]);return e}function cc(t){if(t===null||t===!0||t===!1)return NaN;var n=Number(t);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}function Se(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&n==="[object Date]"?new Date(t.getTime()):typeof t=="number"||n==="[object Number]"?new Date(t):((typeof t=="string"||n==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function ut(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Se(t),r=cc(n);return e.setDate(e.getDate()+r),e}function Re(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Se(t),r=Se(n);return e.getTime()<r.getTime()}function xe(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Se(t);return n.setHours(0,0,0,0),n}function lc(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=xe(t),r=xe(n);return e.getTime()===r.getTime()}function dc(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return lc(t,Date.now())}function nr(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Se(t),r=Se(n),a=e.getFullYear()-r.getFullYear(),o=e.getMonth()-r.getMonth();return a*12+o}function Ft(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return function(r){for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];return n.some(function(c){return c&&c.apply(void 0,[r].concat(o)),r.defaultPrevented})}}function Wt(t,n){throw new Error('The property "'+n+'" is required in "'+t+'"')}function uc(t){var n=t.calendars,e=t.offset,r=t.minDate;if(e>1&&r){var a=n[0].firstDayOfMonth,o=nr(a,r);o<e&&(e=o)}return e}function fc(t){var n=t.calendars,e=t.offset,r=t.maxDate;if(e>1&&r){var a=n[n.length-1].lastDayOfMonth,o=nr(r,a);o<e&&(e=o)}return e}function hc(t){var n=t.calendars,e=t.minDate;if(!e)return!1;var r=n[0].firstDayOfMonth,a=ut(r,-1);return!!Re(a,e)}function mc(t){var n=t.calendars,e=t.maxDate;if(!e)return!1;var r=n[n.length-1].lastDayOfMonth,a=ut(r,1);return!!Re(e,a)}function pc(t){for(var n=t.date,e=t.selected,r=t.monthsToDisplay,a=t.offset,o=t.minDate,i=t.maxDate,c=t.firstDayOfWeek,l=t.showOutsideDays,d=[],u=gc(n,o,i),f=0;f<r;f++){var b=yc({month:u.getMonth()+f+a,year:u.getFullYear(),selectedDates:e,minDate:o,maxDate:i,firstDayOfWeek:c,showOutsideDays:l});d.push(b)}return d}function gc(t,n,e){var r=xe(t);if(n){var a=xe(n);Re(r,a)&&(r=a)}if(e){var o=xe(e);Re(o,r)&&(r=o)}return r}function yc(t){var n=t.month,e=t.year,r=t.selectedDates,a=t.minDate,o=t.maxDate,i=t.firstDayOfWeek,c=t.showOutsideDays,l=xc(n,e),d=l.daysInMonth;n=l.month,e=l.year;for(var u=[],f=1;f<=d;f++){var b=new Date(e,n,f),p={date:b,selected:Lt(r,b),selectable:Ht(a,o,b),today:dc(b),prevMonth:!1,nextMonth:!1};u.push(p)}var h=new Date(e,n,1),y=new Date(e,n,d),m=bc({firstDayOfMonth:h,minDate:a,maxDate:o,selectedDates:r,firstDayOfWeek:i,showOutsideDays:c}),D=wc({lastDayOfMonth:y,minDate:a,maxDate:o,selectedDates:r,firstDayOfWeek:i,showOutsideDays:c});u.unshift.apply(u,m),u.push.apply(u,D);var O=vc(u);return{firstDayOfMonth:h,lastDayOfMonth:y,month:n,year:e,weeks:O}}function bc(t){var n=t.firstDayOfMonth,e=t.minDate,r=t.maxDate,a=t.selectedDates,o=t.firstDayOfWeek,i=t.showOutsideDays,c=[],l=(n.getDay()+7-o)%7;if(i)for(var d=ut(n,-1),u=d.getDate(),f=d.getMonth(),b=d.getFullYear(),p=0;p<l;){var h=new Date(b,f,u-p),y={date:h,selected:Lt(a,h),selectable:Ht(e,r,h),today:!1,prevMonth:!0,nextMonth:!1};c.unshift(y),p++}else for(;l>0;)c.unshift(""),l--;return c}function wc(t){var n=t.lastDayOfMonth,e=t.minDate,r=t.maxDate,a=t.selectedDates,o=t.firstDayOfWeek,i=t.showOutsideDays,c=[],l=(n.getDay()+7-o)%7;if(i)for(var d=ut(n,1),u=d.getMonth(),f=d.getFullYear(),b=0;b<6-l;){var p=new Date(f,u,1+b),h={date:p,selected:Lt(a,p),selectable:Ht(e,r,p),today:!1,prevMonth:!1,nextMonth:!0};c.push(h),b++}else for(;l<6;)c.push(""),l++;return c}function xc(t,n){var e=new Date(n,t,1);t=e.getMonth(),n=e.getFullYear();var r=32-new Date(n,t,32).getDate();return{daysInMonth:r,month:t,year:n}}function vc(t){for(var n=Math.ceil(t.length/7),e=[],r=0;r<n;r++){e[r]=[];for(var a=0;a<7;a++)e[r].push(t[r*7+a])}return e}function Lt(t,n){return t=Array.isArray(t)?t:[t],t.some(function(e){return e instanceof Date&&xe(e).getTime()===xe(n).getTime()})}function Ht(t,n,e){return!(t&&Re(e,t)||n&&Re(n,e))}function rr(t){return t!==void 0}function Dc(t,n){return rr(t)?t:n}function Pc(t,n){var e=n===void 0?{}:n,r=e.onClick,a=e.dateObj,o=a===void 0?Wt("getDateProps","dateObj"):a,i=Rt(e,["onClick","dateObj"]);return Ve({onClick:Ft(r,function(c){t(o,c)}),disabled:!o.selectable,"aria-label":o.date.toDateString(),"aria-pressed":o.selected,role:"button"},i)}function Oc(t,n){var e=t.minDate,r=t.offsetMonth,a=t.handleOffsetChanged,o=n===void 0?{}:n,i=o.onClick,c=o.offset,l=c===void 0?1:c,d=o.calendars,u=d===void 0?Wt("getBackProps","calendars"):d,f=Rt(o,["onClick","offset","calendars"]);return Ve({onClick:Ft(i,function(){a(r-uc({calendars:u,offset:l,minDate:e}))}),disabled:hc({calendars:u,offset:l,minDate:e}),"aria-label":"Go back "+l+" month"+(l===1?"":"s")},f)}function Tc(t,n){var e=t.maxDate,r=t.offsetMonth,a=t.handleOffsetChanged,o=n===void 0?{}:n,i=o.onClick,c=o.offset,l=c===void 0?1:c,d=o.calendars,u=d===void 0?Wt("getForwardProps","calendars"):d,f=Rt(o,["onClick","offset","calendars"]);return Ve({onClick:Ft(i,function(){a(r+fc({calendars:u,offset:l,maxDate:e}))}),disabled:mc({calendars:u,offset:l,maxDate:e}),"aria-label":"Go forward "+l+" month"+(l===1?"":"s")},f)}function kc(t){var n=t.date,e=n===void 0?new Date:n,r=t.maxDate,a=t.minDate,o=t.monthsToDisplay,i=o===void 0?1:o,c=t.firstDayOfWeek,l=c===void 0?0:c,d=t.showOutsideDays,u=d===void 0?!1:d,f=t.offset,b=t.onDateSelected,p=t.onOffsetChanged,h=p===void 0?function(){}:p,y=t.selected,m=v.useState(0),D=m[0],O=m[1],w=Dc(f,D);function x(j){rr(f)||O(j),h(j)}var T=pc({date:e,selected:y,monthsToDisplay:i,minDate:a,maxDate:r,offset:w,firstDayOfWeek:l,showOutsideDays:u});return{calendars:T,getDateProps:Pc.bind(null,b),getBackProps:Oc.bind(null,{minDate:a,offsetMonth:w,handleOffsetChanged:x}),getForwardProps:Tc.bind(null,{maxDate:r,offsetMonth:w,handleOffsetChanged:x})}}G.func,G.func,G.instanceOf(Date),G.instanceOf(Date),G.instanceOf(Date),G.number,G.number,G.bool,G.number,G.func.isRequired,G.func,G.oneOfType([G.arrayOf(Date),G.instanceOf(Date)]);class _c{constructor(n){this.config=n}getEvents(){return{onKeyDown:n=>{switch(n.key){case"ArrowDown":this.config.down&&this.config.down();break;case"ArrowLeft":this.config.left&&this.config.left();break;case"ArrowRight":this.config.right&&this.config.right();break;case"ArrowUp":this.config.up&&this.config.up();break}}}}}const lt={variant:"ghost",size:"sm"},Mc=t=>{var a;const{calendars:n,getBackProps:e}=t,r=(a=t.propsConfigs)==null?void 0:a.dateNavBtnProps;return s.jsxs(v.Fragment,{children:[s.jsx(ve,{...e({calendars:n,offset:12}),...lt,...r,children:"<<"}),s.jsx(ve,{...e({calendars:n}),...lt,...r,children:"<"})]})},jc=t=>{var a;const{calendars:n,getForwardProps:e}=t,r=(a=t.propsConfigs)==null?void 0:a.dateNavBtnProps;return s.jsxs(v.Fragment,{children:[s.jsx(ve,{...e({calendars:n}),...lt,...r,children:">"}),s.jsx(ve,{...e({calendars:n,offset:12}),...lt,...r,children:">>"})]})},qe=.125,Cc=({dateObj:t,propsConfigs:n,isInRange:e,disabledDates:r,renderProps:a,onMouseEnter:o})=>{const{date:i,selected:c,selectable:l,today:d}=t,{getDateProps:u}=a,{defaultBtnProps:f,isInRangeBtnProps:b,selectedBtnProps:p,todayBtnProps:h}=(n==null?void 0:n.dayOfMonthBtnProps)||{},y=!l||!!(r!=null&&r.has(i.getTime())),m=v.useMemo(()=>{var D;return{defaultBtnProps:{size:"sm",variant:"ghost",...f,_after:{content:"''",position:"absolute",top:`-${qe}rem`,left:`-${qe}rem`,bottom:`-${qe}rem`,right:`-${qe}rem`,borderWidth:`${qe}rem`,borderColor:"transparent",...f==null?void 0:f._after},_hover:{bg:"purple.400",...f==null?void 0:f._hover,_disabled:{bg:"gray.100",...(D=f==null?void 0:f._hover)==null?void 0:D._disabled}}},isInRangeBtnProps:{background:"purple.200",...b},selectedBtnProps:{background:"purple.200",...p},todayBtnProps:{borderColor:"blue.400",...h}}},[f,b,p,h]);return s.jsx(ve,{...u({dateObj:t,disabled:y,onMouseEnter:o}),isDisabled:y,...m.defaultBtnProps,...e===!0&&!y&&m.isInRangeBtnProps,...c&&!y&&m.selectedBtnProps,...d&&m.todayBtnProps,children:i.getDate()})},Ec=({dayzedHookProps:t,configs:n,propsConfigs:e,disabledDates:r,onMouseEnterHighlight:a,isInRange:o})=>{var p;const i=kc(t),{calendars:c,getBackProps:l,getForwardProps:d}=i,u=v.useMemo(()=>{const h=n.firstDayOfWeek,y=n.dayNames;return h&&h>0?n.dayNames.slice(h,y.length).concat(y.slice(0,h)):y},[n.firstDayOfWeek,n.dayNames]),f=v.useCallback(h=>{const y=document.activeElement;let m=document.querySelectorAll("button");m.forEach((D,O)=>{const w=O+h;D===y&&(w<=m.length-1&&w>=0?m[w].focus():m[0].focus())})},[]),b=new _c({left:()=>{f(-1)},right:()=>{f(1)},up:()=>{f(-7)},down:()=>{f(7)}});return c.length<=0?null:s.jsx(_a,{className:"datepicker-calendar",direction:["column","column","row"],...(p=e==null?void 0:e.calendarPanelProps)==null?void 0:p.wrapperProps,...b.getEvents(),children:c.map((h,y)=>{var m,D,O,w;return s.jsxs(Ma,{height:"100%",borderWidth:"1px",padding:"0.5rem 0.75rem",...(m=e==null?void 0:e.calendarPanelProps)==null?void 0:m.contentProps,children:[s.jsxs(bn,{...(D=e==null?void 0:e.calendarPanelProps)==null?void 0:D.headerProps,children:[s.jsx(Mc,{calendars:c,getBackProps:l,propsConfigs:e}),s.jsxs(se,{size:"sm",minWidth:"5rem",textAlign:"center",...e==null?void 0:e.dateHeadingProps,children:[n.monthNames[h.month]," ",h.year]}),s.jsx(jc,{calendars:c,getForwardProps:d,propsConfigs:e})]}),s.jsx(ja,{...(O=e==null?void 0:e.calendarPanelProps)==null?void 0:O.dividerProps}),s.jsxs(In,{columns:7,spacing:1,textAlign:"center",...(w=e==null?void 0:e.calendarPanelProps)==null?void 0:w.bodyProps,children:[u.map((x,T)=>s.jsx(De,{fontSize:"sm",fontWeight:"semibold",...e==null?void 0:e.weekdayLabelProps,children:x},T)),h.weeks.map((x,T)=>x.map((j,R)=>{const I=`${h.month}-${h.year}-${T}-${R}`;if(j=="")return s.jsx(De,{},I);const{date:E}=j;return s.jsx(Cc,{dateObj:j,propsConfigs:e,renderProps:i,isInRange:o&&o(E),disabledDates:r,onMouseEnter:()=>{a&&a(E)}},I)}))]})]},y)})})},Nc=()=>s.jsx("svg",{viewBox:"0 0 14 14",width:"14px",height:"14px",focusable:"false",children:s.jsx("path",{fill:"currentColor",d:"M10.8889,5.5 L3.11111,5.5 L3.11111,7.05556 L10.8889,7.05556 L10.8889,5.5 Z M12.4444,1.05556 L11.6667,1.05556 L11.6667,0 L10.1111,0 L10.1111,1.05556 L3.88889,1.05556 L3.88889,0 L2.33333,0 L2.33333,1.05556 L1.55556,1.05556 C0.692222,1.05556 0.00777777,1.75556 0.00777777,2.61111 L0,12.5 C0,13.3556 0.692222,14 1.55556,14 L12.4444,14 C13.3,14 14,13.3556 14,12.5 L14,2.61111 C14,1.75556 13.3,1.05556 12.4444,1.05556 Z M12.4444,12.5 L1.55556,12.5 L1.55556,3.94444 L12.4444,3.94444 L12.4444,12.5 Z M8.55556,8.61111 L3.11111,8.61111 L3.11111,10.1667 L8.55556,10.1667 L8.55556,8.61111 Z"})}),Ic={dateFormat:"yyyy-MM-dd",monthNames:sc,dayNames:ic,firstDayOfWeek:0,monthsToDisplay:1},Ac={defaultIsOpen:!1,closeOnSelect:!0,triggerVariant:"default"},Sc=t=>{var te,A;const n={...Ac,...t},{date:e,name:r,disabled:a,onDateChange:o,isReadOnly:i,id:c,minDate:l,maxDate:d,configs:u,usePortal:f,portalRef:b,disabledDates:p,defaultIsOpen:h,triggerVariant:y,propsConfigs:m,closeOnSelect:D,children:O}=n,[w,x]=v.useState(e),[T,j]=v.useState(0),R=v.useRef(),{onOpen:I,onClose:E,isOpen:P}=fn({defaultIsOpen:h}),N=n.triggerVariant==="input"&&n.triggerIcon!==void 0?n.triggerIcon:s.jsx(Nc,{}),K={...Ic,...u},[Le,Oe]=v.useState(e?we(e,K.dateFormat):""),Te=()=>{E(),x(e),j(0)},ie=({selectable:_,date:F})=>{if(_&&F instanceof Date&&!isNaN(F.getTime())){o(F),D&&E();return}},ce=_=>{Oe(_.target.value),R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{const F=er(_.target.value,K.dateFormat,new Date);if(!(F instanceof Date&&!isNaN(F.getTime()))){o("");return}(p==null?void 0:p.has(Ot(F).getTime()))!==!0&&o(F)},500)},le=f===!0?jr:sn.Fragment;return v.useEffect(()=>{e&&Oe(we(e,K.dateFormat))},[e,K.dateFormat]),s.jsxs(Sn,{id:c,placement:"bottom-start",variant:"responsive",isOpen:P,onOpen:I,onClose:Te,isLazy:!0,children:[!O&&y==="default"?s.jsx(Pt,{children:s.jsx(ve,{type:"button",variant:"outline",lineHeight:1,paddingX:"1rem",disabled:a,fontSize:"sm",...m==null?void 0:m.triggerBtnProps,children:e?we(e,K.dateFormat):""})}):null,!O&&y==="input"?s.jsxs(s.Fragment,{children:[s.jsx(Rn,{children:s.jsx(Wa,{id:c,autoComplete:"off",disabled:a,isDisabled:a,name:r,value:Le,onChange:ce,width:"full",...m==null?void 0:m.inputProps})}),s.jsx(Pt,{children:s.jsx(ve,{position:"absolute",variant:"ghost",right:"0",size:"sm",marginRight:"5px",zIndex:1,type:"button",isDisabled:a===!0||i,padding:"8px",...m==null?void 0:m.triggerIconBtnProps,children:N})})]}):null,O?O(e):null,s.jsx(le,{...f===!0?{containerRef:b}:{},children:s.jsx(Ln,{width:"100%",...(te=m==null?void 0:m.popoverCompProps)==null?void 0:te.popoverContentProps,children:s.jsx(Fn,{...(A=m==null?void 0:m.popoverCompProps)==null?void 0:A.popoverBodyProps,children:s.jsx(Cr,{children:s.jsx(Ec,{dayzedHookProps:{showOutsideDays:!0,monthsToDisplay:K.monthsToDisplay,onDateSelected:ie,selected:e,date:w,minDate:l,maxDate:d,offset:T,onOffsetChanged:j,firstDayOfWeek:K.firstDayOfWeek},configs:K,propsConfigs:m,disabledDates:p})})})})})]})},an=t=>{const{fieldProps:n,formControlProps:e,formControlInnerProps:r,control:a}=t,o=fe("gray.50","gray.800"),{field:{ref:i,onChange:c,value:l},fieldState:{invalid:d},formState:{errors:u}}=Vr({name:n.name,control:a}),{label:f,helperText:b}=r||{};return s.jsxs(La,{...e,isInvalid:d,children:[f!=null&&s.jsx(Ba,{htmlFor:`popover-trigger-${n.id}`,children:f}),s.jsx(vt,{gap:"1rem",alignItems:"center",children:s.jsx(Sc,{...n,closeOnSelect:!0,onDateChange:c,date:l,triggerVariant:"input",propsConfigs:{triggerBtnProps:{sx:{fontWeight:"normal"}},popoverCompProps:{popoverContentProps:{backgroundColor:o,rootProps:{sx:{zIndex:9999}}}},dayOfMonthBtnProps:{defaultBtnProps:{_hover:{backgroundColor:"green.200"}},selectedBtnProps:{backgroundColor:"green.400",color:"white"}}},configs:{dateFormat:na,dayNames:ra,monthNames:aa}})}),b!=null&&s.jsx(Ha,{children:b})]})},Rc=({prices:t,sinIVA:n,sinII:e})=>{const a=Mt().authState.isCustomer(),{control:o}=Fe(),i=Ie({control:o,name:"quantities"}),c=Ie({control:o,name:"bonificacion"}),l=gn(i,t,c),d=`(${pn(n,e)})`;return s.jsxs(s.Fragment,{children:[s.jsxs(se,{size:"xs",children:["Total"," ",c>0?s.jsxs(s.Fragment,{children:[!a&&s.jsxs(s.Fragment,{children:[` -${c}%`," "]}),s.jsx("span",{style:{fontSize:"small"},children:d})]}):s.jsxs("span",{style:{fontSize:"small"},children:[" ",d]})]}),s.jsx(se,{size:"md",textTransform:"uppercase",sx:{mt:1,color:"green.400",fontWeight:"bolder"},children:s.jsx(he,{precio:l??0,moneda:"$"})})]})},Fc=t=>{const{isDraft:n,cabecera:e,disableForm:r,prices:a}=t;Mt().authState.isCustomer();const{isOpen:i,onToggle:c}=fn({defaultIsOpen:!0}),{control:l,reset:d,watch:u,formState:{isSubmitted:f,isSubmitting:b}}=Fe(),p=u("fecha_alta");v.useEffect(()=>{const P=()=>{i&&c()};return xt.on("togglePedidoCategory",P),()=>{xt.removeListener("togglePedidoCategory",P)}},[]);const h={label:"name",value:"id",selected:"selected"},y=_e({data:e.transportes,fieldsMap:h}),m=_e({data:e.condiciones,fieldsMap:h}),D=_e({data:e.asientos,fieldsMap:h}),O=_e({data:e.talonarios,fieldsMap:h}),w=_e({data:e.depositos,fieldsMap:h}),x=_e({data:e.direcciones,fieldsMap:{label:["name","calle_numero"],value:"id",selected:"habitual"}}),T=!0,j=!0,R=e.usuario_discrimina_iva,I=e.usuario_discrimina_ii,E=!n&&e.numero_pedido!=null;return s.jsx(s.Fragment,{children:s.jsxs(De,{children:[n&&s.jsx(Dt,{cardProps:{variant:"filled"},cardBodyProps:{p:0},children:s.jsxs($e,{templateColumns:"1fr",alignItems:"center",gap:4,sx:{p:4},children:[s.jsx(W,{children:s.jsx(se,{size:"sm",textTransform:"uppercase",children:"Descripcin del borrador"})}),s.jsx(W,{children:s.jsx(Vt,{fieldProps:{name:"descripcion",id:"descripcion",maxLength:_t},formControlProps:{isDisabled:r},control:l})})]})}),s.jsxs(Dt,{cardProps:{variant:"filled"},cardBodyProps:{p:0},children:[s.jsxs($e,{templateColumns:{base:"1fr",md:E?"repeat(3,1fr)":"repeat(2,1fr)"},alignItems:"center",gap:4,onClick:c,cursor:"pointer",sx:{p:4},children:[s.jsxs(W,{children:[s.jsxs(se,{size:"xs",children:["Cliente ",e.codigo_cliente]}),s.jsx(se,{size:"md",textTransform:"uppercase",sx:{mt:1},children:e.nombre_cliente})]}),E&&s.jsxs(W,{textAlign:{md:"center"},children:[s.jsx(se,{size:"xs",children:"Nmero de pedido"}),s.jsx(se,{size:"md",textTransform:"uppercase",sx:{mt:1},children:e.numero_pedido})]}),s.jsx(W,{textAlign:{md:"end"},children:s.jsx(Rc,{prices:a,sinIVA:R,sinII:I})})]}),s.jsx(Nt,{in:i,style:{overflow:"inherit"},children:s.jsxs($e,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"center",gap:4,sx:{p:4,pt:0},children:[!n&&T&&s.jsx(W,{children:s.jsx(an,{fieldProps:{name:"fecha_alta",id:"fecha_alta",minDate:new Date(new Date().setHours(0,0,0,0)),isReadOnly:!e.fecha_alta_editable},formControlProps:{isDisabled:r,isReadOnly:!e.fecha_alta_editable},formControlInnerProps:{label:"Alta"},control:l})}),!n&&j&&s.jsx(W,{children:s.jsx(an,{fieldProps:{name:"fecha_entrega",id:"fecha_entrega",minDate:new Date(p.setHours(0,0,0,0)),isReadOnly:!e.fecha_entrega_editable},formControlProps:{isDisabled:r,isReadOnly:!e.fecha_entrega_editable},formControlInnerProps:{label:"Entrega"},control:l})}),s.jsx(W,{children:s.jsx(Me,{fieldProps:{name:"id_condicion",id:"id_condicion",placeholder:"Seleccione una condicin",options:m,noOptionsMessage(P){return"No hay condiciones disponibles"},selectedOptionStyle:"check",isSearchable:e.condicion_editable},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Condicin de venta"},control:l})}),s.jsx(W,{children:s.jsx(Me,{fieldProps:{name:"id_asiento",id:"id_asiento",placeholder:"Seleccione un tipo de asiento",options:D,noOptionsMessage(P){return"No hay tipos disponibles"},selectedOptionStyle:"check",isSearchable:e.asiento_editable},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Tipo de asiento"},control:l})}),s.jsx(W,{children:s.jsx(Me,{fieldProps:{name:"id_transporte",id:"id_transporte",placeholder:"Seleccione un transporte",options:y,noOptionsMessage(P){return"No hay transportes disponibles"},selectedOptionStyle:"check",isSearchable:e.transporte_editable},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Transporte"},control:l})}),s.jsx(W,{children:s.jsx(Me,{fieldProps:{name:"id_talonario",id:"id_talonario",placeholder:"Seleccione un talonario",options:O,noOptionsMessage(P){return"No hay talonarios disponibles"},selectedOptionStyle:"check",isSearchable:e.talonario_editable},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Talonario"},control:l})}),s.jsx(W,{children:s.jsx(Me,{fieldProps:{name:"id_deposito",id:"id_deposito",placeholder:"Seleccione un depsito",options:w,noOptionsMessage(P){return"No hay depsitos disponibles"},selectedOptionStyle:"check",isSearchable:e.deposito_editable},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Depsito"},control:l})}),s.jsx(W,{children:s.jsx(Me,{fieldProps:{name:"id_direccion",id:"id_direccion",placeholder:"Seleccione una direccin",options:x,noOptionsMessage(P){return"No hay direcciones disponibles"},selectedOptionStyle:"check",isSearchable:e.direccion_editable},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Direccin"},control:l})}),s.jsx(W,{children:s.jsx(Vt,{fieldProps:{name:"bonificacion",id:"bonificacion",type:"number",inputMode:"decimal",min:0,max:100,htmlSize:5,maxLength:5,width:"100px",textAlign:"left",onKeyDown:P=>{/^(,|-|\+)$/.test(P.key)&&P.preventDefault()},onFocus:P=>{P.target.select()},onChange:P=>{if(P.target.value==="")return;const N=parseFloat(P.target.value);N||(P.target.value="0"),N<0&&(P.target.value="0"),N>100&&(P.target.value="100")},isReadOnly:!e.bonificacion_editable},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Bonificacin (%)"},control:l})}),s.jsx(W,{colSpan:{md:2},children:s.jsx(Ya,{fieldProps:{name:"comentarios",id:"comentarios",maxLength:tr,rows:3,minHeight:16},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Comentario"},control:l})})]})})]})]})})},Wc=t=>{const{product:n,bonificacionGlobal:e}=t,{id:r,codigo:a,nombre:o,precio:i,bonificacion:c}=n,l=fe("var(--chakra-colors-yellow-200)","var(--chakra-colors-green-900)"),d=fe("var(--chakra-colors-blackAlpha-600)","var(--chakra-colors-whiteAlpha-300)"),u=fe("var(--chakra-colors-white)","var(--chakra-colors-gray-800)"),{control:f,register:b,formState:{isSubmitSuccessful:p,isSubmitting:h}}=Fe(),y=jt(i??0,c??e),D=Ie({control:f,name:`quantities.${r}`})*y,O=x=>{x.preventDefault()},w={type:"number",min:0,inputMode:"tel",size:5,onKeyDown:x=>{/^(\.|,|-|\+)$/.test(x.key)&&x.preventDefault()},onChange:x=>parseInt(x.target.value),onFocus:x=>{x.target.addEventListener("mousewheel",O),x.target.select()},onBlur:x=>{x.target.addEventListener("mousewheel",O)},onClick:x=>{x.currentTarget.select()},className:"quantity",style:{borderColor:d,backgroundColor:u},disabled:p||h,autoComplete:"off"};return s.jsxs("tr",{style:{...D&&{backgroundColor:l}},children:[s.jsxs("td",{className:"word-break-all",children:[a," - ",o]}),s.jsx("td",{className:"text-right hidden-on-base",children:i!=null&&(c==null?s.jsx(he,{precio:i,moneda:"$"}):s.jsx(pa,{}))}),s.jsx("td",{className:"text-right hidden-on-base",children:i!=null&&s.jsx(he,{precio:y,moneda:"$"})}),s.jsx("td",{className:"text-center",children:s.jsx("input",{...w,...b(`quantities.${r}`)})}),s.jsx("td",{className:"text-right white-space-nowrap",children:D!=null&&s.jsx(he,{precio:D,moneda:"$"})})]})},Lc=t=>{const{codigo:n,nombre:e}=t.product;return s.jsxs("tr",{children:[s.jsxs("td",{className:"word-break-all crossed-text",style:{color:"grey"},children:[n," - ",e]}),s.jsx("td",{className:"hidden-on-base"}),s.jsx("td",{className:"hidden-on-base"}),s.jsx("td",{}),s.jsx("td",{className:"text-right white-space-nowrap",style:{color:"grey"},children:s.jsx(he,{})})]})},Hc=v.memo(function({articulos:n}){const{control:e}=Fe(),r=Ie({control:e,name:"bonificacion"}),a=fe("var(--chakra-colors-gray-200)","var(--chakra-colors-black)"),o=fe("var(--chakra-colors-gray-400)","var(--chakra-colors-black)");return s.jsx(_n,{sx:{p:4,pt:0},children:s.jsx(mn,{sx:{p:0,m:0},children:s.jsx(wn,{variant:"stripedOverCard",colorScheme:"gray",size:"md",sx:{borderCollapse:"separate"},children:s.jsx(xn,{children:s.jsx(vn,{children:s.jsx(Dn,{sx:{p:0},children:s.jsxs("table",{width:"100%",cellPadding:8,cellSpacing:4,style:{fontSize:"0.8rem",border:`1px solid ${o}`},children:[s.jsx("thead",{style:{backgroundColor:`${a}`,textTransform:"uppercase"},children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left",style:{width:"55%"},children:"Artculo"}),s.jsx("th",{className:"text-right hidden-on-base",style:{width:"10%"},children:"Lista"}),s.jsx("th",{className:"text-right hidden-on-base",style:{width:"10%"},children:"Bonificado"}),s.jsx("th",{className:"text-center",style:{width:"12%"},children:"Cantidad"}),s.jsx("th",{className:"text-right",style:{width:"13%"},children:"Subtotal"})]})}),s.jsx("tbody",{children:n.map((i,c)=>i.precio==null||i.precio==0?s.jsx(Lc,{product:i}):s.jsx(Wc,{product:i,bonificacionGlobal:r},`product-row-${i.id}`))})]})})})})})})})}),Bc=t=>{const{control:n}=Fe(),{categoryName:e,articulos:r}=t,a=Ie({control:n,name:"bonificacion"});let o;return r==null||r.forEach(({id:i,precio:c,bonificacion:l})=>{const d=Ie({control:n,name:`quantities.${i}`});if(d>0){const u=jt(c??0,l??a);o=(o??0)+d*u}}),s.jsxs(On,{sx:{p:4,_hover:{bg:"none"}},children:[s.jsx(Tn,{sx:{me:2}}),s.jsx(De,{as:"span",flex:"1",textAlign:"left",children:s.jsx(se,{size:["sm","md"],sx:{textTransform:"uppercase"},children:e})}),o!=null&&s.jsx(De,{children:s.jsx(za,{variant:"outline",colorScheme:"orange",fontSize:"md",sx:{py:1,px:2},children:s.jsx(he,{precio:o,moneda:"$"})})})]})},Yc=t=>{const{disableForm:n,unfilteredProducts:e,filteredProducts:r,isFiltering:a}=t,[o,i]=v.useState(null),c=oe.keys(r).length,l=oe.keys(oe.pickBy(r,d=>Array.isArray(d)&&d.length>0));return v.useEffect(()=>{i(a?oe.range(c):null)},[a]),v.useEffect(()=>{o!=null&&xt.emit("togglePedidoCategory")},[o]),l.length?s.jsx(Mn,{allowToggle:!0,reduceMotion:!0,...c===1?{defaultIndex:[0]}:{},...o!=null&&{index:o},onChange:i,children:oe.map(r,(d,u)=>{const f=u===qa?ga:u;return d.length?s.jsx(kn,{sx:{border:"none"},children:({isExpanded:b})=>s.jsxs(Dt,{cardProps:{borderWidth:"1px"},cardBodyProps:{p:0},children:[s.jsx(Bc,{categoryName:f,articulos:e[u]}),b&&s.jsx(Hc,{articulos:d})]})},`accordion-${u}`):s.jsx(sn.Fragment,{},`accordion-${u}`)})}):s.jsxs(Va,{status:"info",children:[s.jsx($a,{}),Er]})};var Xe=(t=>(t[t.creating=0]="creating",t[t.copying=1]="copying",t[t.updating=2]="updating",t))(Xe||{});const qc=t=>{const{saveDraft:n,pedidoState:e,draftIdToDelete:r}=t,{renglones_con_precio_desconocido:a}=e,o=Oa();v.useEffect(()=>{if(a!=null?a.length>0:!1){const _=a==null?void 0:a.map(z=>`${z.codigo_articulo} - ${z.nombre_articulo}`),F=`${ya}

${_==null?void 0:_.join(`
`)}

${ba}`;o({message:s.jsx(Ta,{type:"warning",content:F})})}},[a]);const i=t.editMode===2,c=t.editMode===1,[l,d]=v.useState(n),u=Mt(),f=Jr(),b=ac(),{yupValidationSchema:p}=oc(l),h=[],y={};oe.forOwn(e.articulos,A=>{A.forEach(_=>{y[_.id]={amount:_.precio??0,discount:_.bonificacion},h[_.id]=_.cantidad??0})});const m=zr({defaultValues:{fecha_alta:e.cabecera.fecha_alta!=null?new Date(e.cabecera.fecha_alta):void 0,fecha_entrega:e.cabecera.fecha_entrega!=null?new Date(e.cabecera.fecha_entrega):void 0,bonificacion:e.cabecera.bonificacion,id_transporte:ke(e.cabecera.transportes)??void 0,id_condicion:ke(e.cabecera.condiciones)??void 0,id_deposito:ke(e.cabecera.depositos)??void 0,id_talonario:ke(e.cabecera.talonarios)??void 0,id_asiento:ke(e.cabecera.asientos)??void 0,id_direccion:ke(e.cabecera.direcciones,"habitual")??void 0,quantities:h,descripcion:e.cabecera.descripcion,comentarios:e.cabecera.comentarios},resolver:Qr(p)}),{setError:D,formState:O,watch:w}=m,{errors:x,isSubmitting:T,isSubmitSuccessful:j,isDirty:R}=O,I=w("bonificacion"),E=w("quantities"),P=j||T,N=A=>{const _=[];return A.forEach((F,z)=>{F!=null&&F>0&&_.push({id:z,quantity:F})}),_},K=async A=>{const _=N(A.quantities),{quantities:F,descripcion:z,...V}=A,U={...V,fecha_alta:we(V.fecha_alta,et),fecha_entrega:we(V.fecha_entrega,et),id_cliente:e.cabecera.id_cliente,renglones:_,draft_id_to_delete:r};(await Ur(U,u)).map({success:Q=>{f({title:oa,description:sa.replace("{{numero_pedido}}",Q.data.numero_pedido),status:"success"}),u.navigate(tt)},error:Q=>{f({title:Je,status:"error"}),D("root",{message:Q.info.error_description})}})},Le=async A=>{if(e.cabecera.id_pedido==null)throw Error("Invalid pedidoState.cabecera.id_pedido");const _=N(A.quantities),{quantities:F,descripcion:z,...V}=A,U={...V,fecha_alta:we(V.fecha_alta,et),fecha_entrega:we(V.fecha_entrega,et),id_pedido:e.cabecera.id_pedido,renglones:_};(await Xr(U.id_pedido,U,u)).map({success:Q=>{f({title:ia,description:ca.replace("{{numero_pedido}}",Q.data.numero_pedido),status:"success"}),u.navigate(tt)},error:Q=>{f({title:Je,status:"error"}),D("root",{message:Q.info.error_description})}})},Oe=async A=>{const _=N(A.quantities),{quantities:F,fecha_alta:z,fecha_entrega:V,...U}=A,ne={...U,id_cliente:e.cabecera.id_cliente,es_favorito:!1,renglones:_};(await Kr(ne,u)).map({success:re=>{f({title:la,description:da.replace("{{numero_pedido}}",re.data.numero_pedido),status:"success"}),u.navigate(nt)},error:re=>{f({title:Je,status:"error"}),D("root",{message:re.info.error_description})}})},Te=async A=>{if(e.cabecera.id_pedido==null)throw Error("Invalid pedidoState.cabecera.id_pedido");const _=N(A.quantities),{quantities:F,fecha_alta:z,fecha_entrega:V,...U}=A,ne={...U,id_pedido:e.cabecera.id_pedido,es_favorito:!1,renglones:_};(await Zr(ne.id_pedido,ne,u)).map({success:re=>{f({title:ua,description:fa.replace("{{numero_pedido}}",re.data.numero_pedido),status:"success"}),u.navigate(nt)},error:re=>{f({title:Je,status:"error"}),D("root",{message:re.info.error_description})}})};v.useEffect(()=>{Object.keys(x).length==1&&x.quantities&&window.scrollTo(0,0)},[O]);const ie=()=>{const A=N(E),_=e.articulos,F=gn(E,y,I),z=[];oe.each(A,V=>{oe.each(_,(U,ne)=>{const Q=oe.find(U,{id:V.id});Q!==void 0&&z.push({...Q,cantidad:V.quantity})})}),b({app:u,cabecera:e.cabecera,renglones:z,bonificacionGlobal:I,total:F,title:l?xa:wa,emptyResultText:l?Da:va})},{filteredData:ce,handleSearchInputChange:le,isFiltering:te}=ta(e.articulos,["codigo","nombre"]);return s.jsx(s.Fragment,{children:s.jsx(Gr,{...m,children:s.jsxs("form",{noValidate:!0,children:[s.jsx(yn,{children:s.jsx(nc,{isDraft:l,isUpdating:i,isCopying:c,isDisabled:P,setIsDraft:d,handleSearchInputChange:le,handlePedidoAction:i?Le:K,handleDraftAction:i?Te:Oe,handlePedidoSummary:ie})}),s.jsx(hn,{children:s.jsxs(De,{sx:{my:4},children:[s.jsx(Pa,{errors:x}),s.jsx(Fc,{isDraft:l,cabecera:e.cabecera,disableForm:P,prices:y}),s.jsx(Yc,{disableForm:P,unfilteredProducts:e.articulos,filteredProducts:ce,isFiltering:te})]})})]})})})},$c=()=>s.jsxs(s.Fragment,{children:[s.jsx(yn,{}),s.jsx(hn,{children:s.jsx(De,{width:"full",sx:{mt:8,mb:4},children:s.jsxs($e,{templateColumns:"1fr",alignItems:"center",gap:4,children:[s.jsx(W,{children:s.jsx(Ga,{})}),s.jsx(W,{children:s.jsx(je,{height:"120px"})}),s.jsx(W,{children:s.jsx(je,{height:"120px"})}),s.jsx(W,{children:s.jsx(je,{height:"120px"})}),s.jsx(W,{children:s.jsx(je,{height:"120px"})}),s.jsx(W,{children:s.jsx(je,{height:"120px"})}),s.jsx(W,{children:s.jsx(je,{height:"120px"})})]})})})]}),ar=t=>{const{state:n,retry:e,isDraft:r,saveDraft:a,draftIdToDelete:o,editMode:i}=t;return n.map({loading:c=>s.jsx($c,{}),error:({error:c})=>s.jsx(Qa,{error:c,retry:e,cancelAndNavigateTo:r?nt:tt}),success:c=>s.jsx(qc,{pedidoState:c.data,saveDraft:a,editMode:i,draftIdToDelete:o})})},Vc=({isDraft:t})=>{const n=on();return s.jsx(Ua,{error:Nr(Ir.INVALID_PARAMETER),buttonProps:{label:t?ha:ma,colorScheme:"green",onClick:()=>{n(t?tt:nt)}}})},Nl=({client:t})=>s.jsx(or,{client:t,createDraft:!1}),Il=({client:t})=>s.jsx(or,{client:t,createDraft:!0}),Al=({id_pedido:t})=>s.jsx(sr,{id_pedido:t,isDraft:!1}),Sl=({id_pedido:t})=>s.jsx(sr,{id_pedido:t,isDraft:!0}),Rl=({id_pedido:t})=>s.jsx(ft,{id_pedido:t,isDraft:!1,createDraft:!1}),Fl=({id_pedido:t,deleteOriginal:n})=>s.jsx(ft,{id_pedido:t,isDraft:!0,createDraft:!1,deleteOriginal:n}),Wl=({id_pedido:t})=>s.jsx(ft,{id_pedido:t,isDraft:!0,createDraft:!0}),Ll=({id_pedido:t})=>s.jsx(ft,{id_pedido:t,isDraft:!1,createDraft:!0}),or=t=>{const{client:n,createDraft:e,draftIdToDelete:r}=t,a=n!=null?Number.parseInt(n):null,{state:o,retry:i}=e?Io(a):Lr(a);return s.jsx(ar,{state:o,retry:i,saveDraft:e,draftIdToDelete:r,editMode:Xe.creating,isDraft:e})},sr=({id_pedido:t,isDraft:n})=>{const e=n?Ao:Hr;return s.jsx(ir,{editMode:Xe.updating,id_pedido:t,isDraft:n,saveDraft:n,fetch:e})},ft=({id_pedido:t,isDraft:n,createDraft:e,deleteOriginal:r})=>{const a=n?e?So:Ro:e?Br:Yr;return s.jsx(ir,{editMode:Xe.copying,id_pedido:t,isDraft:n,saveDraft:e,deleteOriginal:r,fetch:a})},ir=t=>{const{id_pedido:n,fetch:e,isDraft:r,saveDraft:a,editMode:o,deleteOriginal:i}=t,c=n!=null?Number.parseInt(n):null;if(!(Ar(c)&&c>0))return s.jsx(Vc,{isDraft:r});const{state:d,retry:u}=e(c),f=i===!0&&o===Xe.copying&&r?c:void 0;return s.jsx(ar,{state:d,retry:u,saveDraft:a,isDraft:r,editMode:o,draftIdToDelete:f})};export{Fl as C,Sl as U,Ll as a,Wl as b,Rl as c,Al as d,Il as e,Nl as f};
