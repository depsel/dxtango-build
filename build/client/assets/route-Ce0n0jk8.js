import{j as t,u as E,a as C}from"./emotion-element-43c6fea0.browser.esm-CqNy1Myq.js";import{O as a,P as p,U as l,$ as R}from"./auth_context-D_Ll0_5_.js";import{P as D,s as O,L as U,I as y,B as N}from"./app-BNjwh-R8.js";import{u as x}from"./useDXTApiFetch-CRKnsto2.js";import{C as F}from"./CommonErrors-BM3An0iK.js";import{S as G}from"./SettingsFormHeading-DciLG2og.js";import{A as q}from"./ApiErrors-DYa22bq7.js";import{a as v,F as m}from"./FormSkeletons-aHE8cQ3L.js";import{B as T}from"./chunk-PULVB27S-DN5G48t9.js";import{G as _,a as i}from"./chunk-ZPFGWTBB-QYQNJcG8.js";import{T as f}from"./chunk-2OOHT3W5-rJYDzyIb.js";import{c as z,a as B,d as X,o as w}from"./index.esm-DyDUH5B4.js";import{u as $}from"./app_resources-CMr1JJak.js";import{C as u}from"./CommonCard-CX-Bpv2R.js";import{C as k}from"./ControlledTextarea-Ck-yw2fi.js";import{F as V}from"./FormErrors-BLIp7NlZ.js";import{S as H}from"./SettingsFormButtons-o2bbU7aj.js";import{A as M}from"./index-QAlNUwXM.js";import{u as Z}from"./chunk-6RSEZNRH-Buq0qYbG.js";import"./CloseIcon-DhOj6wIL.js";import"./chunk-KRPLQIP4-GMYj1Snt.js";import"./ResponsiveIconButton-z_2CCcCn.js";import"./chunk-VMD3UMGK-qWuXfS6J.js";import"./chunk-6QYXN73V-IdqMEN3a.js";import"./chunk-BL2ZZSHG-DBE7qQ6d.js";import"./chunk-7OLJDQMT-BT6Zjs5s.js";import"./components-F5Cv7EYO.js";import"./chunk-3ASUQ6PA-D--F2Rh3.js";import"./chunk-YQO7BFFX-b6IzIdec.js";import"./chunk-MFVQSVQB-D7PHvhRf.js";import"./chunk-56K2BSAJ-DBk3Visf.js";import"./chunk-H46NUPBZ-DDVxQdKp.js";import"./chunk-3KCBMPN5-CX7IG-95.js";import"./chunk-46CXQZ4E-DkrYgWvl.js";import"./chunk-3Y4YXCR2-CV4cUf14.js";import"./index-CAKzuJDV.js";import"./chunk-QURMB2UJ-MVBYS5yc.js";const K=a("/dxt/articulo/print_list","GET"),Y=a("/dxt/articulo/print_list","POST"),J=a("/dxt/articulo/edit_list","GET"),Q=a("/dxt/articulo/edit_list","POST");a("/dxt/articulo/print_list/ids","GET");const W=async(r,s)=>await p({...Y,data:r,silent:!0},s),tt=async(r,s)=>await p({...Q,data:r,silent:!0},s);function st(){return x({...J,silent:!0})}function rt(){return x({...K,silent:!0})}const et={edit:{api:{getAll:st,post:tt},title:D,description:t.jsxs(t.Fragment,{children:["Ingrese en la lista los códigos de artículo en el órden en que desea que aparezcan durante la edición de un pedido o borrador.",t.jsx("br",{}),t.jsx("br",{}),"Cualquier línea que ingrese, que no contenga ningún código de artículo, será considerada como título de grupo."]})},print:{api:{getAll:rt,post:W},title:O,description:t.jsxs(t.Fragment,{children:["Los pedidos y borradores se guardarán ordenando los artículos según esta lista.",t.jsx("br",{}),t.jsx("br",{}),"Además a cada ítem puede asignarle parámetros adicionales, como la cantidad de unidades por bulto.",t.jsx("br",{}),t.jsx("br",{}),'Por ejemplo, la siguente línea indica el artículo "01 35", y además define que cada bulto posee 12 unidades:',t.jsx("br",{}),t.jsx("br",{}),t.jsx("b",{children:"01 35; b=12"})]})}},ot=r=>{const{typeSettings:s}=r;return t.jsx(T,{width:"full",sx:{mt:8,mb:4},children:t.jsxs(_,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[t.jsx(i,{children:t.jsx(v,{height:"380px"})}),t.jsx(i,{children:t.jsx(f,{fontSize:"sm",children:s.description})}),t.jsx(i,{children:t.jsx(m,{})}),t.jsx(i,{children:t.jsx(m,{})})]})})},it=z({list:B().default("").test("avoid-ARTICLE_GROUP_NO_NAME",`Evite utilizar ${M}`,function(r){return!/(^|[^a-zA-Z0-9])_([^a-zA-Z0-9]|$)/.test(r)})}).required(),at=r=>{const{stateData:s,typeSettings:e}=r,n=$(),o=Z(),{handleSubmit:j,control:g,reset:lt,setError:A,formState:{errors:S,isSubmitting:I,isSubmitSuccessful:P}}=X({defaultValues:{list:s?.join(`\r
`)||""},resolver:w(it)}),c=P||I,L=async b=>{const h={data:b.list.split(`
`)};(await e.api.post(h,n)).map({success:d=>{o({title:U,status:"success"}),n.navigate(l)},error:d=>{o({title:d.errorInfoOrNull()?.error_description??R,status:"error"}),A("root",{message:d.info.error_description})}})};return t.jsx("form",{noValidate:!0,onSubmit:j(L),children:t.jsxs(T,{children:[t.jsx(V,{errors:S}),t.jsx(u,{children:t.jsxs(_,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[t.jsx(i,{children:t.jsx(k,{fieldProps:{name:"list",id:"list",rows:20,fontSize:"sm"},formControlProps:{isDisabled:c},control:g})}),t.jsx(i,{children:t.jsx(f,{fontSize:"sm",children:e.description})})]})}),t.jsx(u,{children:t.jsx(H,{isLoading:c,hideCancelButton:!0})})]})})},nt=r=>{const{typeSettings:s}=r,{state:e,retry:n}=s.api.getAll();return e.map({loading:o=>t.jsx(ot,{typeSettings:s}),error:({error:o})=>t.jsx(q,{error:o,retry:n,cancelAndNavigateTo:l}),success:o=>t.jsx(at,{stateData:o.data,typeSettings:s})})};function Mt(){const r=E(),{type:s}=C(),e=et[s];return s!=null&&e!=null?t.jsxs(t.Fragment,{children:[t.jsx(G,{title:e.title,returnButton:{buttonProps:{onClick:()=>{r(l)}}}}),t.jsx(nt,{typeSettings:e})]}):t.jsx(F,{error:y,buttonProps:{label:N,colorScheme:"gray",onClick:()=>{r(l)}}})}export{Mt as default};
