import{r as H,g as j}from"./emotion-element-43c6fea0.browser.esm-CqNy1Myq.js";import{x as $,y as X,z,B as k,C as F,D as W,E as Y}from"./TextPrice-BlyUi6VX.js";import{J as _,aS as R,aT as c,ar as Z,aU as o,aV as m,aW as A,aX as J,aY as q,aZ as K,V as p,a_ as Q,a$ as l,b0 as f,D as ee,i as re,j as ie,b1 as ae,b2 as te}from"./auth_context-D_Ll0_5_.js";import{V as ne}from"./vo_user_name-BVvoRkhQ.js";class se extends _{constructor(r,i){super(r),this.maxLength=i}validate(r){if(typeof r=="string"){const i=r.trim();if(i!==""&&(this.maxLength==null||i.length<=this.maxLength))return i}this.throwError(r)}}class oe extends _{throwInvalidAddressError(r){this.throwError(r,"Invalid email address")}validate(r){if(typeof r=="string"){const i=r.trim().toLowerCase();if(R.isEmail(i,{domain_specific_validation:!0}))return i}this.throwError(r)}}class g extends _{constructor(r){c.isBuffer(r)&&(r=r.toString("hex")),super(r)}validate(r){let i;if(c.isBuffer(r)&&(i=r.toString("hex")),typeof r=="string"&&(i=r.trim().toLowerCase()),typeof i=="string"&&R.isMD5(i))return i;this.throwError(r)}toBuffer(){return c.from(this.value,"hex")}static random(){const r=Array(16);for(let i=0;i<r.length;i++)r[i]=Z(0,255);return new g(c.from(r))}}function le(e){try{return J(o,e)}catch{throw new m(`Invalid user role value: ${e}`)}}function de(e){try{return q(o,e)}catch{throw new m(`Invalid user role string: ${A(e,!0)}`)}}function ue(e){switch(e){case o.customer:return 0;case o.seller:return 1;case o.admin:return 2}throw new m(`Invalid user role: ${A(e,!0)}`)}function ce(e){switch(e){case 0:return o.customer;case 1:return o.seller;case 2:return o.admin}throw new m(`Invalid user role number: ${A(e,!0)}`)}class fe extends _{validate(r){try{if(typeof r=="string")return de(r);if(K(o,r))return r}catch{}this.throwError(r)}toString(){return le(this.value)}isAdmin(){return this.value.valueOf()==o.admin}isSeller(){return this.value.valueOf()==o.seller}isCustomer(){return this.value.valueOf()==o.customer}}function he(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var O=he(H),Oe=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},_e=function(e,r){var i={};for(var a in e)r.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a]);return i},I=function(r){var i=r.color,a=i===void 0?"currentColor":i,t=r.size,s=t===void 0?24:t;r.children;var d=_e(r,["color","size","children"]),u="mdi-icon "+(d.className||"");return O.createElement("svg",Oe({},d,{className:u,width:s,height:s,fill:a,viewBox:"0 0 24 24"}),O.createElement("path",{d:"M18,3H6V7H18M19,12A1,1 0 0,1 18,11A1,1 0 0,1 19,10A1,1 0 0,1 20,11A1,1 0 0,1 19,12M16,19H8V14H16M19,8H5A3,3 0 0,0 2,11V17H6V21H18V17H22V11A3,3 0 0,0 19,8Z"}))},me=O.memo?O.memo(I):I,ve=me;const Ie=j(ve);var n=(e=>(e[e.INVALIDO=0]="INVALIDO",e[e.INGRESADO=1]="INGRESADO",e[e.APROBADO=2]="APROBADO",e[e.CUMPLIDO=3]="CUMPLIDO",e[e.CERRADO=4]="CERRADO",e[e.ANULADO=5]="ANULADO",e[e.EN_PROGRESO=100]="EN_PROGRESO",e))(n||{});class pe{constructor(r){this.id=r}parentToUnsafe(){return{id:this.id.valueOf()}}}class Ae extends pe{}class h extends Ae{constructor(r){super(new p(r.id));const{username:i,tango_id:a,tango_code:t,habilitado_en_tango:s,screen_name:d,email:u,password_hash:v,role:b,habilitado_en_dxt:P,puede_crear_pedido:N,puede_editar_pedido:C,puede_anular_pedido:T,borrar_pedido_al_anular:S,perfil_facturacion_id:V,aprobar_pedido_al_crear:U,ver_pedidos_cumplidos:x,dia_de_entrega:L,ver_sin_precio:y,mostrar_mensaje_de_advertencia:B,timestamp_modificacion:M,vendedor_id:D,id_lista_adicional:E,bonificacion_lista_adicional:w,universal_id:G}=r;if(this.username=new ne(i),this.screenName=new Q(d),this.email=u!=null?new oe(u):void 0,this.passwordHash=new g(v),this.role=new fe(ce(b)),this.habilitadoEnDXT=new l(P),this.puedeCrearPedido=new l(N),this.puedeEditarPedido=new l(C),this.puedeAnularPedido=new l(T),this.borrarPedidoAlAnular=new l(S),this.perfilFacturacionId=new f(V),this.aprobarPedidoAlCrear=new l(U),this.verPedidosCumplidos=new l(x),this.diaDeEntrega=new p(L),this.verSinPrecio=new l(y),this.mostrarMensajeDeAdvertencia=new l(B),this.timestampModificacion=new p(M),!this.role.isAdmin()&&a==null)throw new ee(new re(ie.UNPROCESSABLE_ENTITY,{extra:"tango_id missing in UserEntity"}));this.tangoId=a!=null?new f(a):void 0,this.tangoCode=t!=null?new se(t):void 0,this.habilitadoEnTango=s!=null?new l(s):void 0,this.vendedorId=D!=null?new f(D):void 0,this.idListaAdicional=E!=null?new f(E):void 0,this.bonificacionListaAdicional=w!=null?new ae(w):void 0,this.universalId=new te(G.replaceAll("-",""))}toUnsafe(){return{...this.parentToUnsafe(),username:this.username.valueOf(),tango_id:this.tangoId?.valueOf(),tango_code:this.tangoCode?.valueOf(),habilitado_en_tango:this.habilitadoEnTango?.valueOf(),screen_name:this.screenName.valueOf(),email:this.email?.valueOf()??null,password_hash:this.passwordHash.valueOf(),role:ue(this.role.valueOf()),vendedor_id:this.vendedorId?.valueOf(),habilitado_en_dxt:this.habilitadoEnDXT.valueOf(),puede_crear_pedido:this.puedeCrearPedido.valueOf(),puede_editar_pedido:this.puedeEditarPedido.valueOf(),puede_anular_pedido:this.puedeAnularPedido.valueOf(),borrar_pedido_al_anular:this.borrarPedidoAlAnular.valueOf(),perfil_facturacion_id:this.perfilFacturacionId.valueOf(),aprobar_pedido_al_crear:this.aprobarPedidoAlCrear.valueOf(),ver_pedidos_cumplidos:this.verPedidosCumplidos.valueOf(),dia_de_entrega:this.diaDeEntrega.valueOf(),ver_sin_precio:this.verSinPrecio.valueOf(),mostrar_mensaje_de_advertencia:this.mostrarMensajeDeAdvertencia.valueOf(),timestamp_modificacion:this.timestampModificacion.valueOf(),id_lista_adicional:this.idListaAdicional?.valueOf(),bonificacion_lista_adicional:this.bonificacionListaAdicional?.valueOf(),universal_id:this.universalId.valueOf()}}tangoUserExists(){return this.habilitadoEnTango!=null}habilitado(){return this.habilitadoEnDXT.valueOf()&&this.habilitadoEnTango!=null&&this.habilitadoEnTango.valueOf()}isAdmin(){return this.role.isAdmin()}isCustomer(){return this.role.isCustomer()}isSeller(){return this.role.isSeller()}hasAdminAccess(){return this.role.isAdmin()}}function Re(e){switch(e){case n.INGRESADO:return Y;case n.APROBADO:return W;case n.CUMPLIDO:return F;case n.CERRADO:return k;case n.ANULADO:return z;case n.EN_PROGRESO:return X;default:return $}}function be(e,r){const{estado:i}=e;if(!(r!=null&&(i==n.APROBADO||i==n.INGRESADO)))return i;for(const t of r){const{a_descontar:s,a_facturar:d,pendiente_descontar:u,pendiente_facturar:v}=t;if(s!=u||d!=v)return n.EN_PROGRESO}return i}function Pe(e,r){if(r==null)return null;let i=0;for(const t of r)i+=(t.cantidad??0)*(t.precio??0);const{descuento:a}=e;return i=i-i*a/100,i}function Ne(e,r){return!((e instanceof h?e.isAdmin():e.role==o.admin)||r!=n.INGRESADO)}function Ce(e,r){const i=e instanceof h?e.isAdmin():e.role==o.admin;if(!(i?!0:e instanceof h?e.puedeAnularPedido.valueOf():e.puede_anular_pedido))return!1;if(r==n.INGRESADO)return!0;const t=e instanceof h?e.aprobarPedidoAlCrear.valueOf():e.aprobar_pedido_al_crear;return!!(r==n.APROBADO&&t||(r==n.EN_PROGRESO||r==n.ANULADO)&&i)}function Te(e,r,i,a,t){const s=[];return e!=null&&e.length>0&&s.push({k:1,v:e}),r!=null&&r.length>0&&s.push({k:2,v:r}),i!=null&&i.length>0&&s.push({k:3,v:i}),a!=null&&a.length>0&&s.push({k:4,v:a}),t!=null&&t.length>0&&s.push({k:5,v:t}),s}export{n as E,Ie as P,Ce as a,Pe as b,Re as g,Ne as i,Te as o,be as r};
