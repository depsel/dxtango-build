import{j as e,r as N,R as me}from"./emotion-element-43c6fea0.browser.esm-CqNy1Myq.js";import{ak as y,al as pe,B as ge,I as ue,am as fe,V as be,an as we}from"./auth_context-D_Ll0_5_.js";import{T as _e,i as C,j as E,k as Ne,l as w,P as Pe,m as ve,n as Te,o as S}from"./TextPrice-BlyUi6VX.js";import{t as ke}from"./utils-DTXYOP_7.js";import{u as Ae}from"./order.api_hooks-Bp7I5Lei.js";import{l as Ie}from"./app-BNjwh-R8.js";import{S as ye,A as Ce}from"./ApiErrors-DYa22bq7.js";import{C as Ee}from"./CommonErrors-BM3An0iK.js";import{B as m}from"./chunk-PULVB27S-DN5G48t9.js";import{T as h,a as j,b as o,c as s}from"./chunk-T2WCTPDH-BFKgSPN_.js";import{o as Se,g as Be,P as Oe}from"./index-BbUF8q4R.js";import{T as Le,a as d}from"./chunk-MGVPL3OH-Bh17YsLa.js";import{G as Fe,a as _}from"./chunk-ZPFGWTBB-QYQNJcG8.js";import{F as Re}from"./chunk-KRPLQIP4-GMYj1Snt.js";import{H as We}from"./chunk-3ASUQ6PA-D--F2Rh3.js";import{S as De}from"./chunk-VTV6N5LE-DE4_BECV.js";import{F as $e}from"./chunk-H46NUPBZ-DDVxQdKp.js";import{u as Ve}from"./components-F5Cv7EYO.js";import"./chunk-2OOHT3W5-rJYDzyIb.js";import"./useDXTApiFetch-CRKnsto2.js";import"./CloseIcon-DhOj6wIL.js";import"./app_resources-CMr1JJak.js";import"./chunk-7OLJDQMT-BT6Zjs5s.js";import"./vo_user_name-BVvoRkhQ.js";import"./chunk-7D6N5TE5-Bhc1xrdf.js";import"./chunk-56K2BSAJ-DBk3Visf.js";import"./index-CAKzuJDV.js";const l=()=>e.jsx(ye,{width:"full",height:"20px"}),Ge=()=>e.jsx(e.Fragment,{children:e.jsxs(m,{width:"full",sx:{backgroundColor:"white"},children:[e.jsx(h,{children:e.jsx(j,{children:e.jsxs(o,{children:[e.jsx(s,{width:"23%",children:e.jsx(l,{})}),e.jsx(s,{width:"18%",children:e.jsx(l,{})}),e.jsx(s,{width:"18%",children:e.jsx(l,{})}),e.jsx(s,{width:"18%",children:e.jsx(l,{})}),e.jsx(s,{width:"23%",children:e.jsx(l,{})})]})})}),e.jsx(h,{children:e.jsx(j,{children:e.jsxs(o,{children:[e.jsx(s,{width:"50%",children:e.jsx(l,{})}),e.jsx(s,{width:"50%",children:e.jsx(l,{})})]})})}),e.jsx(h,{children:e.jsx(j,{children:[...Array(10)].map((n,r)=>e.jsxs(o,{children:[e.jsx(s,{children:e.jsx(l,{})}),e.jsx(s,{children:e.jsx(l,{})}),e.jsx(s,{children:e.jsx(l,{})}),e.jsx(s,{children:e.jsx(l,{})})]},`loading-${r}`))})})]})}),He=({handlePageBreaks:n,pageBreaks:r})=>{const a=()=>{window.print()};return N.useEffect(()=>{const i=()=>{window.scrollTo(0,0)};return window.addEventListener("beforeprint",i),()=>{window.removeEventListener("beforeprint",i)}},[]),e.jsx(Re,{bgColor:"white",className:"hidden-print",justifyContent:"start",sx:{p:4,position:"sticky",top:0,w:"100%",h:20},children:e.jsxs(We,{children:[e.jsx(ge,{onClick:a,boxShadow:"md",size:"sm",pl:6,pr:6,colorScheme:"blue",leftIcon:e.jsx(ue,{as:Oe}),children:fe}),e.jsxs(m,{display:"flex",alignItems:"center",p:1,height:8,borderColor:"blue.500",borderWidth:1,borderRadius:"md",boxShadow:0,children:[e.jsx(De,{id:"page_break",onChange:n,isChecked:r}),e.jsx($e,{display:"block",htmlFor:"page_break",flexShrink:1,ml:2,mb:0,color:"blue.900",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"100%",children:Pe})]})]})})},Ue=n=>{const{orders:r,fixedPageWidth:a}=n,[i,c]=N.useState(1),[t,O]=N.useState(!1),L=()=>{O(!t)};return e.jsxs(m,{sx:{backgroundColor:"white",minHeight:"100vh",transform:`scale(${i})`},children:[e.jsx(He,{handlePageBreaks:L,pageBreaks:t}),r.map((p,P)=>{const{id:v,numero_pedido:F,fecha_hora_ingreso:T,fecha_entrega:g,descuento:x,estado:R,total:W,codigo_cliente:D,nombre_cliente:$,direccion_cliente:V,localidad_cliente:G,telefono_cliente:H,codigo_vendedor:U,nombre_vendedor:K,codigo_transporte:X,nombre_transporte:z,codigo_deposito:q,nombre_deposito:J,leyenda1:M,leyenda2:Q,leyenda3:Y,leyenda4:Z,leyenda5:ee,cliente_exento_iva:se,cliente_exento_ii:re}=p.cabecera,k=Se(M,Q,Y,Z,ee),te=k.length>0,ne=ve(se,re),ie=P>0?e.jsx("div",{style:{pageBreakBefore:"always"}}):e.jsx(e.Fragment,{});return e.jsxs(me.Fragment,{children:[t&&ie,P>0&&e.jsx(m,{className:t?"hidden-print":"",sx:{height:"40px"}}),e.jsx(_e,{sx:{p:2,overflowX:"hidden"},children:e.jsxs(h,{variant:"basicPrintable",children:[e.jsxs(Le,{children:[e.jsx(o,{children:e.jsx(d,{colSpan:5,children:e.jsxs(Fe,{className:"order_print",templateColumns:"min-content auto max-content",gap:4,children:[e.jsx(_,{children:e.jsxs("table",{width:"auto",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Número"}),e.jsx("td",{className:"v",children:e.jsx("strong",{children:F})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Estado"}),e.jsx("td",{className:"v",children:e.jsx("strong",{style:{textTransform:"uppercase"},children:Be(R)})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Ingreso"}),e.jsx("td",{className:"v",children:e.jsx("strong",{children:y(T)})})]}),e.jsxs("tr",{children:[e.jsx("td",{}),e.jsx("td",{className:"v",children:e.jsx("strong",{children:pe(T)})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:g!=null&&e.jsx(e.Fragment,{children:"Entrega"})}),e.jsx("td",{className:"v",children:g!=null&&e.jsx("strong",{children:y(g)})})]})]})}),e.jsx(_,{display:"flex",justifyContent:"center",alignItems:"flex-start",minWidth:"250px",children:e.jsxs("table",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Cliente"}),e.jsx("td",{className:"v word-break-all",children:e.jsx("strong",{children:C(D,$)})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Direccion"}),e.jsx("td",{className:"v word-break-all",children:e.jsx("strong",{children:V??"-"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Localidad"}),e.jsx("td",{className:"v word-break-all",children:e.jsx("strong",{children:G??"-"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Teléfono"}),e.jsx("td",{className:"v word-break-all",children:e.jsx("strong",{children:H??"-"})})]})]})}),e.jsx(_,{width:"fit-content",maxWidth:"250px",children:e.jsxs("table",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Vendedor"}),e.jsx("td",{className:"v word-break-all",children:e.jsx("strong",{children:C(U,K)})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Deposito"}),e.jsx("td",{className:"v word-break-all",children:e.jsx("strong",{children:E(q,J)})}),e.jsx("td",{})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Transporte"}),e.jsx("td",{className:"v word-break-all",children:e.jsx("strong",{children:E(X,z)})})]})]})})]})})}),te&&e.jsx(o,{children:e.jsx(d,{colSpan:5,children:e.jsx("table",{width:"auto",className:"word-break-all",children:k.map((u,A)=>e.jsx("tr",{children:e.jsx("td",{children:u.v})}))})})}),e.jsxs(o,{children:[e.jsx(d,{width:"0px",children:"L"}),e.jsx(d,{children:"Artículo"}),e.jsx(d,{textAlign:"right",width:"100px",children:"Bonificado"}),e.jsx(d,{textAlign:"center",width:"80px",children:"Cantidad"}),e.jsx(d,{textAlign:"right",width:"100px",children:"Subtotal"})]})]}),e.jsxs(j,{children:[p.renglones!=null&&p.renglones.map((u,A)=>{const{id_articulo:le,nombre_articulo:ae,codigo_articulo:oe,descripcion_adicional:de,precio:f,cantidad:b,bulto:ce}=u,I=Te(b,ce),xe=f!=null?f*b:null,he=S(f,x),je=S(xe,x);return e.jsxs(o,{children:[e.jsx(s,{children:A+1}),e.jsx(s,{children:Ne(ae,oe,de)}),e.jsx(s,{textAlign:"right",children:e.jsx(w,{moneda:"$",precio:he})}),e.jsxs(s,{textAlign:"center",children:[b,I!=null&&e.jsxs(e.Fragment,{children:[" [",I,"]"]})]}),e.jsx(s,{textAlign:"right",children:e.jsx(w,{moneda:"$",precio:je})})]},`renglon-${v}_${le}`)}),e.jsxs(o,{children:[e.jsxs(s,{colSpan:4,valign:"top",fontWeight:"bold",children:[e.jsx("p",{children:`TOTAL ${x>0?`CON BONIFICACIÓN DEL ${x}% `:""}`}),e.jsx("p",{children:ne.toLocaleUpperCase()})]}),e.jsx(s,{textAlign:"right",valign:"bottom",fontWeight:"bold",children:e.jsx(w,{moneda:"$",precio:W})})]})]})]})})]},`pedido-${v}`)})]})},Ke=n=>{const{orders:r,fixedPageWidth:a}=n;if(r!=null&&Array.isArray(r)){const i=[];if(r.forEach(c=>{const t=ke(()=>new be(c),null);t!=null&&i.push(t)}),i.length>0)return e.jsx(Xe,{orders:i,fixedPageWidth:a})}return e.jsx(Ee,{error:Ie})},Xe=n=>{const{orders:r,fixedPageWidth:a}=n,{state:i,retry:c}=Ae(r);return i.map({loading:t=>e.jsx(Ge,{}),error:({error:t})=>e.jsx(Ce,{error:t,retry:c,cancelAndNavigateTo:we}),success:t=>(t.data.sort(ze),e.jsx(Ue,{orders:t.data,fixedPageWidth:a}))})};function ze(n,r){const a=n.cabecera.numero_pedido,i=r.cabecera.numero_pedido;return a.localeCompare(i)}const B=1920,_s=()=>[{charset:"utf-8"},{name:"viewport",content:`width=${B}, initial-scale=1.0`}];function Ns(){const[n]=Ve(),r=n.getAll("orderId");return e.jsx(Ke,{orders:r,fixedPageWidth:B})}export{Ns as default,_s as meta};
