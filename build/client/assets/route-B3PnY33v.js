import{r as _,j as t,u as h}from"./emotion-element-5486c51c.browser.esm-CMT9BBIk.js";import{Q as u,R as b,U as d,a1 as A}from"./auth_context-1lRrAoj9.js";import{n as I,o as P}from"./app-DHK1Xtws.js";import{S as R}from"./SettingsFormHeading-pg9uw8W1.js";import{c as T,a as F,d as O,o as v}from"./index.esm-CzxlHhdA.js";import{F as c,a as N,b as D}from"./useDXTApiFetch-DkCgIYCg.js";import{u as L}from"./app_resources-7xCa0BDG.js";import{u as G}from"./useTangoList-apP1YyLy.js";import{C as p}from"./CommonCard-ZsFI_XX0.js";import{C as U}from"./ControlledSelect-P32LK7nc.js";import{F as B}from"./FormErrors-CLM3bwt7.js";import{I as M}from"./InlineError-CYxK_qzh.js";import{S as q}from"./SettingsFormButtons-v13JEq_c.js";import{u as V}from"./chunk-6RSEZNRH-02MJPxwp.js";import{B as Y}from"./chunk-PULVB27S-DtbcLAA3.js";import{G as k,a as l}from"./chunk-ZPFGWTBB-lx3V9y0x.js";import"./ResponsiveIconButton-BxPaX8A-.js";import"./chunk-VMD3UMGK-C_4Hu6X3.js";import"./chunk-6QYXN73V-D4AeCydz.js";import"./chunk-BL2ZZSHG-VTIM7Pff.js";import"./chunk-7OLJDQMT-BCYTowu1.js";import"./chunk-KRPLQIP4-X72JD14b.js";import"./chunk-YQO7BFFX-C0kTL7iy.js";import"./chunk-MFVQSVQB-nS3zYPqC.js";import"./index.esm-Njxra2I5.js";import"./chunk-56K2BSAJ-BQuanzzh.js";import"./chunk-HB6KBUMZ-BCkqSJTL.js";import"./index-BtnUei1e.js";import"./chunk-H46NUPBZ-BIanLneB.js";import"./chunk-3KCBMPN5--NnBMJog.js";import"./chunk-46CXQZ4E-xzSkmIKk.js";import"./chunk-Z6RXEUPO-BIbhqgv7.js";import"./chunk-3Y4YXCR2-CtodgM6Z.js";import"./chunk-QURMB2UJ-DnrdiWvU.js";const w=u("/dictionary","GET"),H=u("/dictionary/active_company","POST"),$=async(r,s)=>await b({...H,params:r,silent:!0},s),Q=T({company:F().required("Seleccione una empresa activa")}).required(),z=()=>{const r=L(),s=V(),{state:o,result:a}=G({endpoint:w,fieldsMap:{label:"name",value:"db_name",selected:"is_active"}}),{handleSubmit:f,control:S,reset:x,setError:y,formState:{errors:C,isSubmitting:g,isSubmitSuccessful:j}}=O({defaultValues:{company:""},resolver:v(Q)}),m=j||g;_.useEffect(()=>{if(o instanceof c){const e=a.findIndex(i=>i.selected===!0);e>=0&&x({company:a[e].value})}},[o]);const E=async e=>{const i={company:e.company};(await $(i,r)).map({success:n=>{s({title:I,status:"success"}),r.navigate(d)},error:n=>{s({title:n.errorInfoOrNull()?.error_description??A,status:"error"}),y("root",{message:n.info.error_description})}})};return t.jsx("form",{noValidate:!0,onSubmit:f(E),children:t.jsxs(Y,{children:[t.jsx(B,{errors:C}),t.jsx(p,{children:t.jsxs(k,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[t.jsxs(l,{children:[t.jsx(U,{fieldProps:{name:"company",placeholder:"Seleccione una empresa",options:a,noOptionsMessage(e){return"No hay empresas disponibles"},selectedOptionStyle:"check",isLoading:o instanceof N},formControlProps:{isDisabled:m||!(o instanceof c)},formControlInnerProps:{label:"Empresa activa"},control:S}),o instanceof D&&t.jsx(M,{error:o.errorOrNull().error})]}),t.jsx(l,{})]})}),t.jsx(p,{children:t.jsx(q,{isLoading:m,hideCancelButton:!0})})]})})};function Ft(){const r=h();return t.jsxs(t.Fragment,{children:[t.jsx(R,{title:P,returnButton:{buttonProps:{onClick:()=>{r(d)}}}}),t.jsx(z,{})]})}export{Ft as default};
