import{j as t,u as h,a as R}from"./emotion-element-43c6fea0.browser.esm-Bukkp3pI.js";import{a4 as u,U as n,R as C}from"./auth_context-By8qlCOz.js";import{A as E,a as D,b as U,c as y}from"./paths-NyFu9ARQ.js";import{P as F,t as N,a as p,L as O,I as q,B as G}from"./app-ChKZjo6p.js";import{u as x}from"./useDXTApiFetch-DMZ_pwG5.js";import{C as v}from"./CommonErrors-CY6v2mJ9.js";import{S as z}from"./SettingsFormHeading-DRaop4b3.js";import{A as X}from"./ApiErrors-CbWmNTke.js";import{a as B,F as d}from"./FormSkeletons-C5bAoHqQ.js";import{G as T,a as i}from"./chunk-ZPFGWTBB-C6BSXP9K.js";import{T as j}from"./chunk-2OOHT3W5-BaTWmMuR.js";import{a as w,o as k}from"./yup-DmufeRdH.js";import{a as V,b as $}from"./app_resources-0MHmsA5u.js";import{C as c}from"./CommonCard-B6Zs7VdS.js";import{C as H}from"./ControlledTextarea-7wwQiiGu.js";import{F as M}from"./FormErrors-DK3bqFxa.js";import{S as Z}from"./SettingsFormButtons-Dtw3fGC3.js";import{A as K}from"./index-DUwQZTzN.js";import{c as Y,a as J}from"./index.esm-DLycO5Xl.js";import"./chunk-3KCBMPN5-BSyM0bpq.js";import"./chunk-QURMB2UJ-DZ-0JI-4.js";import"./chunk-KRPLQIP4-BIcN844u.js";import"./chunk-BL2ZZSHG-CllUrry9.js";import"./chunk-7OLJDQMT-DeTsz2JD.js";import"./chunk-6QYXN73V-e7cXtMTs.js";import"./chunk-3ASUQ6PA-CMDtM4Gu.js";import"./chunk-ZHMYA64R-DxFJ4KrV.js";import"./chunk-56K2BSAJ-HKDUOZgn.js";import"./chunk-3Y4YXCR2-BRX7qSte.js";import"./chunk-YQO7BFFX--iiPSc49.js";import"./chunk-MFVQSVQB-DALUCuvz.js";import"./chunk-46CXQZ4E-3v06V3Zr.js";const Q=async(e,s)=>await u({...E,data:e,silent:!0},s),W=async(e,s)=>await u({...D,data:e,silent:!0},s);function tt(){return x({...U,silent:!0})}function st(){return x({...y,silent:!0})}const et={edit:{api:{getAll:tt,post:W},title:F,description:t.jsxs(t.Fragment,{children:["Ingrese en la lista los códigos de artículo en el órden en que desea que aparezcan durante la edición de un pedido o borrador.",t.jsx("br",{}),t.jsx("br",{}),"Cualquier línea que ingrese, que no contenga ningún código de artículo, será considerada como título de grupo."]})},print:{api:{getAll:st,post:Q},title:N,description:t.jsxs(t.Fragment,{children:["Los pedidos y borradores se guardarán ordenando los artículos según esta lista.",t.jsx("br",{}),t.jsx("br",{}),"Además a cada ítem puede asignarle parámetros adicionales, como la cantidad de unidades por bulto.",t.jsx("br",{}),t.jsx("br",{}),'Por ejemplo, la siguente línea indica el artículo "01 35", y además define que cada bulto posee 12 unidades:',t.jsx("br",{}),t.jsx("br",{}),t.jsx("b",{children:"01 35, b=12"})]})}},rt=e=>{const{typeSettings:s}=e;return t.jsx(p,{width:"full",sx:{mt:8,mb:4},children:t.jsxs(T,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[t.jsx(i,{children:t.jsx(B,{height:"380px"})}),t.jsx(i,{children:t.jsx(j,{fontSize:"sm",children:s.description})}),t.jsx(i,{children:t.jsx(d,{})}),t.jsx(i,{children:t.jsx(d,{})})]})})},ot=Y({list:J().default("").test("avoid-ARTICLE_GROUP_NO_NAME",`Evite utilizar ${K}`,function(e){return!/(^|[^a-zA-Z0-9])_([^a-zA-Z0-9]|$)/.test(e)})}).required(),it=e=>{const{stateData:s,typeSettings:r}=e,a=V(),o=$(),{handleSubmit:f,control:g,reset:nt,setError:_,formState:{errors:A,isSubmitting:I,isSubmitSuccessful:S}}=w({defaultValues:{list:(s==null?void 0:s.join(`\r
`))||""},resolver:k(ot)}),l=S||I,b=async L=>{const P={data:L.list.split(`
`)};(await r.api.post(P,a)).map({success:m=>{o({title:O,status:"success"}),a.navigate(n)},error:m=>{o({title:C,status:"error"}),_("root",{message:m.info.error_description})}})};return t.jsx("form",{noValidate:!0,onSubmit:f(b),children:t.jsxs(p,{children:[t.jsx(M,{errors:A}),t.jsx(c,{children:t.jsxs(T,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[t.jsx(i,{children:t.jsx(H,{fieldProps:{name:"list",id:"list",rows:20,fontSize:"sm"},formControlProps:{isDisabled:l},control:g})}),t.jsx(i,{children:t.jsx(j,{fontSize:"sm",children:r.description})})]})}),t.jsx(c,{children:t.jsx(Z,{isLoading:l,hideCancelButton:!0})})]})})},at=e=>{const{typeSettings:s}=e,{state:r,retry:a}=s.api.getAll();return r.map({loading:o=>t.jsx(rt,{typeSettings:s}),error:({error:o})=>t.jsx(X,{error:o,retry:a,cancelAndNavigateTo:n}),success:o=>t.jsx(it,{stateData:o.data,typeSettings:s})})};function Bt(){const e=h(),{type:s}=R(),r=et[s];return s!=null&&r!=null?t.jsxs(t.Fragment,{children:[t.jsx(z,{title:r.title,returnButton:{buttonProps:{onClick:()=>{e(n)}}}}),t.jsx(at,{typeSettings:r})]}):t.jsx(v,{error:q,buttonProps:{label:G,colorScheme:"green",onClick:()=>{e(n)}}})}export{Bt as default};
