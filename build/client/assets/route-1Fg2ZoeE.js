import{j as e,u as w}from"./emotion-element-43c6fea0.browser.esm-Cuif_eEn.js";import{z as F,aC as R,U as S,a1 as q}from"./auth_context-B-Tcig0k.js";import{a as A,V,s as U}from"./app-BdYyDs5S.js";import{S as H}from"./SettingsFormHeading-oznEKY0V.js";import{b as C,c as I,V as N,d as O,e as G}from"./index-B-BLzzSh.js";import{u as L}from"./useDXTApiFetch-_LSStUNh.js";import{A as k}from"./ApiErrors-GUSgL-Xy.js";import{F as n,a as T}from"./FormSkeletons-CoMZNYRx.js";import{G as g,a as s}from"./chunk-ZPFGWTBB-CfuIyNTX.js";import{D as m}from"./chunk-W7WUSNWJ-CDK2m9PS.js";import{u as z,c as $,a as l,e as D,f as B,d as X,o as Y}from"./index.esm-DXKbKlYo.js";import{u as J,a as K}from"./app_resources-CDkSSx5t.js";import{C as f}from"./CommonCard-BQfjnTT7.js";import{F as Q,a as W}from"./chunk-56K2BSAJ-r8NF7IGV.js";import{F as Z}from"./chunk-KRPLQIP4-DRGOXS8W.js";import{C as ee}from"./chunk-CWVAJCXJ-BEmBpbZv.js";import{C as d}from"./ControlledInput-DsnpheB0.js";import{C as M}from"./ControlledTextarea-acTj6uTp.js";import{F as se}from"./FormErrors-DgI5zxIH.js";import{S as re}from"./SettingsFormButtons-Cbuywpud.js";import{y as v}from"./utils-DihYaFf6.js";import{H as y}from"./chunk-7OLJDQMT-DB_eYbVs.js";import"./ResponsiveIconButton-Ccujq6NG.js";import"./chunk-ZHMYA64R-Cq5LpG9O.js";import"./chunk-VMD3UMGK-BOiy-z46.js";import"./chunk-6QYXN73V-B1Nx9szV.js";import"./chunk-BL2ZZSHG-DP_ZXxbw.js";import"./chunk-3ASUQ6PA-ByZtqmzd.js";import"./chunk-2OOHT3W5-y4h3Shmy.js";import"./chunk-3Y4YXCR2-CiP0t4s6.js";import"./chunk-ALC6QPCI-C2jRzl9i.js";import"./chunk-3KCBMPN5-CdY7cck7.js";import"./chunk-QURMB2UJ-BoOQBYSq.js";import"./chunk-YQO7BFFX-CEG2A-0c.js";import"./chunk-MFVQSVQB-gRsUJlZr.js";import"./chunk-7D6N5TE5-D0DQFTJl.js";import"./chunk-H46NUPBZ-Cf5o4NPi.js";import"./chunk-6CVSDS6C-B4Ua9FB8.js";import"./chunk-46CXQZ4E-bCSOgkek.js";class te extends F{validate(a){let t=a;if(typeof t=="string"&&(t=t.trim().toLowerCase(),R(t)))return t;this.throwError(a)}}const oe=()=>e.jsx(A,{width:"full",sx:{mt:8,mb:4},children:e.jsxs(g,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"center",gap:4,children:[e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(m,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(m,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(n,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(T,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(m,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(n,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(T,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})})]})}),ie=i=>{const{fieldProps:a,formControlProps:t,formControlInnerProps:p,control:c}=i,{text:o,helperText:u,helperAction:x}=p||{},{field:{ref:j,onChange:h,value:_},fieldState:{invalid:r},formState:{errors:b}}=z({name:a.name,control:c});return e.jsxs(Q,{...t,isInvalid:r,ref:j,children:[e.jsxs(Z,{alignItems:"center",children:[e.jsx(ee,{...a,onChange:h,isChecked:_,children:o}),x]}),u!=null&&e.jsx(W,{children:u})]})},ne=$({smtp_host:l().required("Ingrese el host SMTP").test("valid-host","Ingrese un host SMTP válido",i=>v(te,i)),smtp_username:l().required("Ingrese el usuario SMTP"),smtp_password:l().required("Ingrese la contraseña SMTP"),smtp_port:D().required("Ingrese el puerto SMTP").typeError("Ingrese un número de puerto SMTP válido").test("is-port","Ingrese un puerto SMTP válido",i=>v(N,i)),smtp_use_tls:B().required(),auth_expiration_days:D().min(C,`El tiempo de espera debe ser mayor a ${C}`).max(I,`El tiempo de espera debe ser menor a ${I}`).required("Ingrese el tiempo de espera para logout").typeError("Ingrese el tiempo de espera para logout"),admin_email:l().required("Ingrese el correo electrónico del Administrador").email("Ingrese un correo electrónico válido"),user_warning_message_title:l().required("Ingrese el título del mensaje de advertencia"),user_warning_message_content:l().required("Ingrese el contenido del mensaje de advertencia"),user_disabled_message_title:l().required("Ingrese el título del mensaje de inhabilitación"),user_disabled_message_content:l().required("Ingrese el contenido del mensaje de inhabilitación")}).required(),ae=i=>{const{stateData:a}=i,t=J(),p=K(),{handleSubmit:c,control:o,reset:u,setError:x,formState:{errors:j,isSubmitting:h,isSubmitSuccessful:_}}=X({defaultValues:a,resolver:Y(ne)}),r=_||h,b=async E=>{(await O(E,t)).map({success:P=>{p({title:V,status:"success"}),t.navigate(S)},error:P=>{p({title:q}),x("root",{message:P.info.error_description})}})};return e.jsx("form",{noValidate:!0,onSubmit:c(b),children:e.jsxs(A,{children:[e.jsx(se,{errors:j}),e.jsx(f,{children:e.jsxs(g,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[e.jsx(s,{colSpan:{md:2},children:e.jsx(y,{size:"sm",textTransform:"uppercase",children:"Servidor de Correos"})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"smtp_host",id:"smtp_host",type:"text",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Hostname SMTP"},control:o})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"smtp_username",id:"smtp_username",type:"text",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Usuario SMTP"},control:o})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"smtp_password",id:"smtp_password",type:"text",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Contraseña SMTP"},control:o})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"smtp_port",id:"smtp_port",type:"number",inputMode:"tel",htmlSize:5,maxLength:5,width:"auto",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Puerto SMTP"},control:o})}),e.jsx(s,{children:e.jsx(ie,{control:o,fieldProps:{id:"smtp_use_tls",name:"smtp_use_tls"},formControlInnerProps:{text:"Usar TLS"}})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(m,{})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"auth_expiration_days",id:"auth_expiration_days",type:"number",inputMode:"tel",htmlSize:5,maxLength:5,width:"auto",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Tiempo de espera para logout",helperText:"Expresado en días"},control:o})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"admin_email",id:"admin_email",type:"text",inputMode:"email",htmlSize:30,width:"auto",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Correo electrónico Administrador"},control:o})})]})}),e.jsx(f,{children:e.jsxs(g,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[e.jsx(s,{colSpan:{md:2},children:e.jsx(y,{size:"sm",textTransform:"uppercase",children:"Mensajes"})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(d,{fieldProps:{name:"user_warning_message_title",id:"user_warning_message_title",type:"text",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Título del mensaje de advertencia"},control:o})}),e.jsx(s,{colSpan:{md:2},children:"Contenido del mensaje de advertencia"}),e.jsx(s,{colSpan:{md:2},children:e.jsx(M,{fieldProps:{name:"user_warning_message_content",id:"user_warning_message_content",isDisabled:r},formControlProps:{isDisabled:r},control:o})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(m,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(d,{fieldProps:{name:"user_disabled_message_title",id:"user_disabled_message_title",type:"text",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Título del mensaje de inhabilitación"},control:o})}),e.jsx(s,{colSpan:{md:2},children:"Contenido del mensaje de inhabilitación"}),e.jsx(s,{colSpan:{md:2},children:e.jsx(M,{fieldProps:{name:"user_disabled_message_content",id:"user_disabled_message_content",isDisabled:r},formControlProps:{isDisabled:r},control:o})})]})}),e.jsx(f,{children:e.jsx(re,{isLoading:r,hideCancelButton:!0})})]})})},le=()=>{const{state:i,retry:a}=L({...G,silent:!0});return i.map({loading:t=>e.jsx(oe,{}),error:({error:t})=>e.jsx(k,{error:t,retry:a,cancelAndNavigateTo:S}),success:t=>e.jsx(ae,{stateData:t.data})})};function Ke(){const i=w();return e.jsxs(e.Fragment,{children:[e.jsx(H,{title:U,returnButton:{buttonProps:{onClick:()=>{i(S)}}}}),e.jsx(le,{})]})}export{Ke as default};
