import{r as E}from"./emotion-element-43c6fea0.browser.esm-Bukkp3pI.js";import{z as g,E as F,F as y,H as R,J as A,K as k}from"./auth_context-By8qlCOz.js";class p{constructor(t){this.originalRequest=t}mapOrElse(t){const{loading:s,success:r,error:e,orElse:o}=t;return this instanceof u&&s?s(this):this instanceof d&&r?r(this):this instanceof c&&e?e(this):o(this)}map(t){const{loading:s,success:r,error:e}=t;return this.mapOrElse({loading:s,success:r,error:e,orElse:o=>{throw Error("Invalid useAxiosFetch state")}})}isLoading(){return this instanceof u}isSuccess(){return this instanceof d}isError(){return this instanceof c}errorOrNull(){return this instanceof c?this.error:null}callIfLoading(t){return this instanceof u?t(this)??!1:!1}callIfSuccess(t){return this instanceof d?t(this)??!1:!1}callIfError(t){return this instanceof c?t(this)??!1:!1}}class u extends p{constructor(t){super(t)}}class c extends p{constructor(t,s){super(s),this.error=t}}class d extends p{constructor(t,s){super(s),this.data=t}}function m(n,...t){const[s,r]=E.useState(new u(n)),e=async()=>{r(new u(s.originalRequest)),await l()},o=async()=>{s.isSuccess()||r(new u(s.originalRequest)),await l()},l=async()=>{var f;const i=s.originalRequest;try{const a=await g(i),h=((f=a==null?void 0:a.data)==null?void 0:f.data)??(a==null?void 0:a.data);r(new d(h,i))}catch(a){if(a instanceof F){const h=a,[S]=t,w=S?S(h):h,x=new c(w,i);r(x)}else throw a}};return E.useEffect(()=>{l()},[]),{state:s,reload:o,retry:e}}function I(n){const t=y(),s=t.retryCallback,r=R(t,n),{state:e,retry:o,reload:l}=m(r,i=>k(i));return E.useEffect(()=>{(async()=>{if(((n==null?void 0:n.silent)??!1)||!(e instanceof c))return;const f=e.error;await A(t,f.status)||s&&await s({message:f.error_description})&&o()})()},[e]),{state:e,retry:o,reload:l}}export{u as F,d as a,c as b,I as u};
