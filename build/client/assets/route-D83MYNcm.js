import{j as t,u as E,a as C}from"./emotion-element-43c6fea0.browser.esm-Cuif_eEn.js";import{a4 as a,S as p,U as l,a1 as R}from"./auth_context-B-Tcig0k.js";import{P as D,u as U,a as x,L as O,I as y,B as F}from"./app-BdYyDs5S.js";import{u as T}from"./useDXTApiFetch-_LSStUNh.js";import{C as N}from"./CommonErrors-Cf1BB0Pn.js";import{S as G}from"./SettingsFormHeading-oznEKY0V.js";import{A as q}from"./ApiErrors-GUSgL-Xy.js";import{a as v,F as u}from"./FormSkeletons-CoMZNYRx.js";import{G as _,a as i}from"./chunk-ZPFGWTBB-CfuIyNTX.js";import{T as j}from"./chunk-2OOHT3W5-y4h3Shmy.js";import{c as z,a as X,d as B,o as w}from"./index.esm-DXKbKlYo.js";import{u as k,a as V}from"./app_resources-CDkSSx5t.js";import{C as m}from"./CommonCard-BQfjnTT7.js";import{C as $}from"./ControlledTextarea-acTj6uTp.js";import{F as H}from"./FormErrors-DgI5zxIH.js";import{S as M}from"./SettingsFormButtons-Cbuywpud.js";import{A as Z}from"./index-DtHspM0R.js";import"./chunk-3KCBMPN5-CdY7cck7.js";import"./chunk-ALC6QPCI-C2jRzl9i.js";import"./ResponsiveIconButton-Ccujq6NG.js";import"./chunk-ZHMYA64R-Cq5LpG9O.js";import"./chunk-VMD3UMGK-BOiy-z46.js";import"./chunk-6QYXN73V-B1Nx9szV.js";import"./chunk-KRPLQIP4-DRGOXS8W.js";import"./chunk-BL2ZZSHG-DP_ZXxbw.js";import"./chunk-7OLJDQMT-DB_eYbVs.js";import"./chunk-3ASUQ6PA-ByZtqmzd.js";import"./chunk-3Y4YXCR2-CiP0t4s6.js";import"./chunk-QURMB2UJ-BoOQBYSq.js";import"./chunk-YQO7BFFX-CEG2A-0c.js";import"./chunk-MFVQSVQB-gRsUJlZr.js";import"./chunk-56K2BSAJ-r8NF7IGV.js";import"./chunk-H46NUPBZ-Cf5o4NPi.js";import"./chunk-46CXQZ4E-bCSOgkek.js";const K=a("/dxt/articulo/print_list","GET"),Y=a("/dxt/articulo/print_list","POST"),J=a("/dxt/articulo/edit_list","GET"),Q=a("/dxt/articulo/edit_list","POST");a("/dxt/articulo/print_list/ids","GET");const W=async(r,s)=>await p({...Y,data:r,silent:!0},s),tt=async(r,s)=>await p({...Q,data:r,silent:!0},s);function st(){return T({...J,silent:!0})}function rt(){return T({...K,silent:!0})}const et={edit:{api:{getAll:st,post:tt},title:D,description:t.jsxs(t.Fragment,{children:["Ingrese en la lista los códigos de artículo en el órden en que desea que aparezcan durante la edición de un pedido o borrador.",t.jsx("br",{}),t.jsx("br",{}),"Cualquier línea que ingrese, que no contenga ningún código de artículo, será considerada como título de grupo."]})},print:{api:{getAll:rt,post:W},title:U,description:t.jsxs(t.Fragment,{children:["Los pedidos y borradores se guardarán ordenando los artículos según esta lista.",t.jsx("br",{}),t.jsx("br",{}),"Además a cada ítem puede asignarle parámetros adicionales, como la cantidad de unidades por bulto.",t.jsx("br",{}),t.jsx("br",{}),'Por ejemplo, la siguente línea indica el artículo "01 35", y además define que cada bulto posee 12 unidades:',t.jsx("br",{}),t.jsx("br",{}),t.jsx("b",{children:"01 35; b=12"})]})}},ot=r=>{const{typeSettings:s}=r;return t.jsx(x,{width:"full",sx:{mt:8,mb:4},children:t.jsxs(_,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[t.jsx(i,{children:t.jsx(v,{height:"380px"})}),t.jsx(i,{children:t.jsx(j,{fontSize:"sm",children:s.description})}),t.jsx(i,{children:t.jsx(u,{})}),t.jsx(i,{children:t.jsx(u,{})})]})})},it=z({list:X().default("").test("avoid-ARTICLE_GROUP_NO_NAME",`Evite utilizar ${Z}`,function(r){return!/(^|[^a-zA-Z0-9])_([^a-zA-Z0-9]|$)/.test(r)})}).required(),at=r=>{const{stateData:s,typeSettings:e}=r,n=k(),o=V(),{handleSubmit:g,control:f,reset:lt,setError:S,formState:{errors:A,isSubmitting:I,isSubmitSuccessful:P}}=B({defaultValues:{list:(s==null?void 0:s.join(`\r
`))||""},resolver:w(it)}),d=P||I,L=async b=>{const h={data:b.list.split(`
`)};(await e.api.post(h,n)).map({success:c=>{o({title:O,status:"success"}),n.navigate(l)},error:c=>{o({title:R,status:"error"}),S("root",{message:c.info.error_description})}})};return t.jsx("form",{noValidate:!0,onSubmit:g(L),children:t.jsxs(x,{children:[t.jsx(H,{errors:A}),t.jsx(m,{children:t.jsxs(_,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[t.jsx(i,{children:t.jsx($,{fieldProps:{name:"list",id:"list",rows:20,fontSize:"sm"},formControlProps:{isDisabled:d},control:f})}),t.jsx(i,{children:t.jsx(j,{fontSize:"sm",children:e.description})})]})}),t.jsx(m,{children:t.jsx(M,{isLoading:d,hideCancelButton:!0})})]})})},nt=r=>{const{typeSettings:s}=r,{state:e,retry:n}=s.api.getAll();return e.map({loading:o=>t.jsx(ot,{typeSettings:s}),error:({error:o})=>t.jsx(q,{error:o,retry:n,cancelAndNavigateTo:l}),success:o=>t.jsx(at,{stateData:o.data,typeSettings:s})})};function Vt(){const r=E(),{type:s}=C(),e=et[s];return s!=null&&e!=null?t.jsxs(t.Fragment,{children:[t.jsx(G,{title:e.title,returnButton:{buttonProps:{onClick:()=>{r(l)}}}}),t.jsx(nt,{typeSettings:e})]}):t.jsx(N,{error:y,buttonProps:{label:F,colorScheme:"green",onClick:()=>{r(l)}}})}export{Vt as default};
