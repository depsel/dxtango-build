var Dr=Object.defineProperty;var Pr=(t,n,e)=>n in t?Dr(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var g=(t,n,e)=>Pr(t,typeof n!="symbol"?n+"":n,e);import{j as s,r as y,g as _e,u as gn,R as yn}from"./emotion-element-5486c51c.browser.esm-CMT9BBIk.js";import{p as Xe,f as xe,c as je,d as we,R as Se,W as J,bY as Ke,I as Or,aA as Cr,ax as bn,bZ as Ut,b_ as tt,m as xn,o as wn,au as vn,b$ as Tr,ay as _r,af as jr,c0 as Mr,c1 as kr,c2 as Er,c3 as Nr,c4 as Ir,c5 as Ar,c6 as Sr,ab as Rr,g as pe,ac as Fr,av as Hr,B as Te,aB as Wr,c7 as Lr,bp as Fe,a2 as le,b7 as Br,c8 as Me,c9 as nt,ap as ot,a6 as rt,bc as st,b9 as $r,j as Yr,ca as qr}from"./auth_context-CCfWU2Jo.js";import{a as Vr,b as zr,c as Qr,d as Gr,e as Ur,f as Xr,g as Kr,h as Zr}from"./order.api_hooks-DBtEYjHv.js";import{g as $e,c as Xt,h as Kt,b as Jr,f as De,i as ea,a as he,u as ta,j as He,d as na,o as ra,F as aa}from"./index.esm-CzxlHhdA.js";import{u as Dn,O as Pn,c as oa,b as sa,e as ia,f as ca}from"./OrdersContainer-lqr2uFIj.js";import{u as St}from"./app_resources-Di8KxAHS.js";import{S as la,u as da}from"./SearchField-gbhuOeMX.js";import{R as ua,W as fa,X as ha,Y as ma,Z as pa,_ as ga,$ as ya,a0 as ba,a1 as xa,a2 as at,a3 as wa,a4 as va}from"./app-DHK1Xtws.js";import{m as On,T as Cn,o as Rt,l as ge,a5 as Tn,a6 as Da,a7 as Pa,a8 as Oa,a9 as Ca,aa as Ta,ab as _a,ac as ja,ad as Ma,ae as ka}from"./TextPrice-pYuEWncP.js";import{F as Ea}from"./FormErrors-COO1VgQ3.js";import{n as Na,N as _n}from"./Navbar-DANenbq-.js";import{R as qe}from"./ResponsiveIconButton-CQwgfxML.js";import{F as Tt}from"./chunk-KRPLQIP4-Duu5zv9H.js";import{H as jn}from"./chunk-3ASUQ6PA-BkEgKCWb.js";import{u as Ia,M as Aa}from"./MessageToUserDialog-CPklsPmb.js";import{T as Mn,a as kn,b as En,c as Nn}from"./chunk-T2WCTPDH-B3SegIkI.js";import{T as Sa}from"./chunk-2OOHT3W5-CC38uFWT.js";import{b as ke}from"./useTangoList-Dsh644eR.js";import{C as _t}from"./CommonCard-CfkzH5Am.js";import{G as Ge,a as N}from"./chunk-ZPFGWTBB-Bu2gzu07.js";import{m as In,S as Ra,B as ye}from"./chunk-PULVB27S-C1tz_n3L.js";import{V as Fa}from"./chunk-NTCQBYKE-BqJT1CcA.js";import{H as de}from"./chunk-7OLJDQMT-DqhdIuo6.js";import{D as jt}from"./chunk-W7WUSNWJ-CwvPeB9a.js";import{g as Ha,h as Wa,i as La,j as Ba,k as $a,l as Ya,m as qa,n as Va,o as vt}from"./chunk-HB6KBUMZ-BghbaEwP.js";import{a as za}from"./chunk-6CVSDS6C-BMnlnkqH.js";import{F as Qa,a as Ga}from"./chunk-56K2BSAJ-Bys-b2nt.js";import{F as Ua}from"./chunk-H46NUPBZ-CGUTFX_3.js";import{C as Dt}from"./ControlledInput-BKce-7V6.js";import{C as Ee}from"./ControlledSelect-DDMsMwex.js";import{C as Xa}from"./ControlledTextarea-CtVdSOvZ.js";import{A as Ka}from"./index-CoXMS8wA.js";import{u as Pt}from"./index-BtnUei1e.js";import{I as Za}from"./chunk-6QYXN73V-tPml5wjb.js";import{A as Ja}from"./chunk-3KCBMPN5-D8G8ZRLu.js";import{A as eo}from"./chunk-QURMB2UJ-Dpy63TOY.js";import{B as to}from"./chunk-Z6RXEUPO-CxfasoKf.js";import{u as no}from"./chunk-6RSEZNRH-p2hFl890.js";import{A as ro}from"./ApiErrors-Blpol96Y.js";import{F as ao,a as Ne}from"./FormSkeletons-Ch1cmlVo.js";import{C as oo}from"./CommonErrors-Dv5kaEHh.js";var[so,gt]=Xe({name:"AccordionStylesContext",hookName:"useAccordionStyles",providerName:"<Accordion />"}),[io,Ft]=Xe({name:"AccordionItemContext",hookName:"useAccordionItemContext",providerName:"<AccordionItem />"}),[co,ad,lo,uo]=Ha(),An=xe(function(n,e){const{getButtonProps:r}=Ft(),a=r(n,e),i={display:"flex",alignItems:"center",width:"100%",outline:0,...gt().button};return s.jsx(je.button,{...a,className:we("chakra-accordion__button",n.className),__css:i})});An.displayName="AccordionButton";function fo(t){const{value:n,defaultValue:e,onChange:r,shouldUpdate:a=(b,p)=>b!==p}=t,o=Pt(r),i=Pt(a),[c,f]=y.useState(e),d=n!==void 0,l=d?n:c,u=Pt(b=>{const w=typeof b=="function"?b(l):b;i(l,w)&&(d||f(w),o(w))},[d,o,l,i]);return[l,u]}function ho(t){const{onChange:n,defaultIndex:e,index:r,allowMultiple:a,allowToggle:o,...i}=t;go(t),yo(t);const c=lo(),[f,d]=y.useState(-1);y.useEffect(()=>()=>{d(-1)},[]);const[l,u]=fo({value:r,defaultValue(){return a?e??[]:e??-1},onChange:n});return{index:l,setIndex:u,htmlProps:i,getAccordionItemProps:p=>{let w=!1;return p!==null&&(w=Array.isArray(l)?l.includes(p):l===p),{isOpen:w,onChange:m=>{if(p!==null)if(a&&Array.isArray(l)){const x=m?l.concat(p):l.filter(D=>D!==p);u(x)}else m?u(p):o&&u(-1)}}},focusedIndex:f,setFocusedIndex:d,descendants:c}}var[mo,Ht]=Xe({name:"AccordionContext",hookName:"useAccordionContext",providerName:"Accordion"});function po(t){const{isDisabled:n,isFocusable:e,id:r,...a}=t,{getAccordionItemProps:o,setFocusedIndex:i}=Ht(),c=y.useRef(null),f=y.useId(),d=r??f,l=`accordion-button-${d}`,u=`accordion-panel-${d}`;bo(t);const{register:b,index:p,descendants:w}=uo({disabled:n&&!e}),{isOpen:h,onChange:m}=o(p===-1?null:p);xo({isOpen:h,isDisabled:n});const x=()=>{m?.(!0)},D=()=>{m?.(!1)},_=y.useCallback(()=>{m?.(!h),i(p)},[p,i,h,m]),C=y.useCallback(P=>{const V={ArrowDown:()=>{const M=w.nextEnabled(p);M?.node.focus()},ArrowUp:()=>{const M=w.prevEnabled(p);M?.node.focus()},Home:()=>{const M=w.firstEnabled();M?.node.focus()},End:()=>{const M=w.lastEnabled();M?.node.focus()}}[P.key];V&&(P.preventDefault(),V(P))},[w,p]),A=y.useCallback(()=>{i(p)},[i,p]),S=y.useCallback(function(L={},V=null){return{...L,type:"button",ref:Se(b,c,V),id:l,disabled:!!n,"aria-expanded":!!h,"aria-controls":u,onClick:J(L.onClick,_),onFocus:J(L.onFocus,A),onKeyDown:J(L.onKeyDown,C)}},[l,n,h,_,A,C,u,b]),$=y.useCallback(function(L={},V=null){return{...L,ref:V,role:"region",id:u,"aria-labelledby":l,hidden:!h}},[l,h,u]);return{isOpen:h,isDisabled:n,isFocusable:e,onOpen:x,onClose:D,getButtonProps:S,getPanelProps:$,htmlProps:a}}function go(t){const n=t.index||t.defaultIndex,e=n!=null&&!Array.isArray(n)&&t.allowMultiple;Ke({condition:!!e,message:`If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: ${typeof n},`})}function yo(t){Ke({condition:!!(t.allowMultiple&&t.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}function bo(t){Ke({condition:!!(t.isFocusable&&!t.isDisabled),message:`Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.
    `})}function xo(t){Ke({condition:t.isOpen&&!!t.isDisabled,message:"Cannot open a disabled accordion item"})}function Sn(t){const{isOpen:n,isDisabled:e}=Ft(),{reduceMotion:r}=Ht(),a=we("chakra-accordion__icon",t.className),o=gt(),i={opacity:e?.4:1,transform:n?"rotate(-180deg)":void 0,transition:r?void 0:"transform 0.2s",transformOrigin:"center",...o.icon};return s.jsx(Or,{viewBox:"0 0 24 24","aria-hidden":!0,className:a,__css:i,...t,children:s.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})})}Sn.displayName="AccordionIcon";var Rn=xe(function(n,e){const{children:r,className:a}=n,{htmlProps:o,...i}=po(n),f={...gt().container,overflowAnchor:"none"},d=y.useMemo(()=>i,[i]);return s.jsx(io,{value:d,children:s.jsx(je.div,{ref:e,...o,className:we("chakra-accordion__item",a),__css:f,children:typeof r=="function"?r({isExpanded:!!i.isOpen,isDisabled:!!i.isDisabled}):r})})});Rn.displayName="AccordionItem";var wo=t=>t!=null&&parseInt(t.toString(),10)>0,Zt={exit:{height:{duration:.2,ease:tt.ease},opacity:{duration:.3,ease:tt.ease}},enter:{height:{duration:.3,ease:tt.ease},opacity:{duration:.4,ease:tt.ease}}},vo={exit:({animateOpacity:t,startingHeight:n,transition:e,transitionEnd:r,delay:a})=>{var o;return{...t&&{opacity:wo(n)?1:0},height:n,transitionEnd:r?.exit,transition:(o=e?.exit)!=null?o:Ut.exit(Zt.exit,a)}},enter:({animateOpacity:t,endingHeight:n,transition:e,transitionEnd:r,delay:a})=>{var o;return{...t&&{opacity:1},height:n,transitionEnd:r?.enter,transition:(o=e?.enter)!=null?o:Ut.enter(Zt.enter,a)}}},Wt=y.forwardRef((t,n)=>{const{in:e,unmountOnExit:r,animateOpacity:a=!0,startingHeight:o=0,endingHeight:i="auto",style:c,className:f,transition:d,transitionEnd:l,...u}=t,[b,p]=y.useState(!1);y.useEffect(()=>{const D=setTimeout(()=>{p(!0)});return()=>clearTimeout(D)},[]),Ke({condition:Number(o)>0&&!!r,message:"startingHeight and unmountOnExit are mutually exclusive. You can't use them together"});const w=parseFloat(o.toString())>0,h={startingHeight:o,endingHeight:i,animateOpacity:a,transition:b?d:{enter:{duration:0}},transitionEnd:{enter:l?.enter,exit:r?l?.exit:{...l?.exit,display:w?"block":"none"}}},m=r?e:!0,x=e||r?"enter":"exit";return s.jsx(Cr,{initial:!1,custom:h,children:m&&s.jsx(bn.div,{ref:n,...u,className:we("chakra-collapse",f),style:{overflow:"hidden",display:"block",...c},custom:h,variants:vo,initial:r?"exit":!1,animate:x,exit:"exit"})})});Wt.displayName="Collapse";var Fn=xe(function(n,e){const{className:r,motionProps:a,...o}=n,{reduceMotion:i}=Ht(),{getPanelProps:c,isOpen:f}=Ft(),d=c(o,e),l=we("chakra-accordion__panel",r),u=gt();i||delete d.hidden;const b=s.jsx(je.div,{...d,__css:u.panel,className:l});return i?b:s.jsx(Wt,{in:f,...a,children:b})});Fn.displayName="AccordionPanel";var Hn=xe(function({children:n,reduceMotion:e,...r},a){const o=xn("Accordion",r),i=wn(r),{htmlProps:c,descendants:f,...d}=ho(i),l=y.useMemo(()=>({...d,reduceMotion:!!e}),[d,e]);return s.jsx(co,{value:f,children:s.jsx(mo,{value:l,children:s.jsx(so,{value:o,children:s.jsx(je.div,{ref:a,...c,className:we("chakra-accordion",r.className),__css:o.root,children:n})})})})});Hn.displayName="Accordion";function Do(t){return"current"in t}var Wn=()=>typeof window<"u";function Po(){var t;const n=navigator.userAgentData;return(t=n?.platform)!=null?t:navigator.platform}var Oo=t=>Wn()&&t.test(navigator.vendor),Co=t=>Wn()&&t.test(Po()),To=()=>Co(/mac|iphone|ipad|ipod/i),_o=()=>To()&&Oo(/apple/i);function jo(t){const{ref:n,elements:e,enabled:r}=t,a=()=>{var o,i;return(i=(o=n.current)==null?void 0:o.ownerDocument)!=null?i:document};Wa(a,"pointerdown",o=>{if(!_o()||!r)return;const i=o.target,f=(e??[n]).some(d=>{const l=Do(d)?d.current:d;return l?.contains(i)||l===i});a().activeElement!==i&&f&&(o.preventDefault(),i.focus())})}var Ln={exports:{}},Mo="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ko=Mo,Eo=ko;function Bn(){}function $n(){}$n.resetWarningCache=Bn;var No=function(){function t(r,a,o,i,c,f){if(f!==Eo){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function n(){return t}var e={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:n,element:t,elementType:t,instanceOf:n,node:t,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:$n,resetWarningCache:Bn};return e.PropTypes=e,e};Ln.exports=No();var Io=Ln.exports;const Z=_e(Io);var Yn=xe(function(n,e){const{columns:r,spacingX:a,spacingY:o,spacing:i,minChildWidth:c,...f}=n,d=vn(),l=c?So(c,d):Ro(r);return s.jsx(Ge,{ref:e,gap:i,columnGap:a,rowGap:o,templateColumns:l,...f})});Yn.displayName="SimpleGrid";function Ao(t){return typeof t=="number"?`${t}px`:t}function So(t,n){return In(t,e=>{const r=Tr("sizes",e,Ao(e))(n);return e===null?null:`repeat(auto-fit, minmax(${r}, 1fr))`})}function Ro(t){return In(t,n=>n===null?null:`repeat(${n}, minmax(0, 1fr))`)}var[Fo,Ze]=Xe({name:"PopoverContext",errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"}),[Ho,qn]=Xe({name:"PopoverStylesContext",errorMessage:`usePopoverStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Popover />" `});function Mt(t){const n=y.Children.only(t.children),{getTriggerProps:e}=Ze();return y.cloneElement(n,e(n.props,n.ref))}Mt.displayName="PopoverTrigger";var Ie={click:"click",hover:"hover"};function Wo(t={}){const{closeOnBlur:n=!0,closeOnEsc:e=!0,initialFocusRef:r,id:a,returnFocusOnClose:o=!0,autoFocus:i=!0,arrowSize:c,arrowShadowColor:f,trigger:d=Ie.click,openDelay:l=200,closeDelay:u=200,isLazy:b,lazyBehavior:p="unmount",computePositionOnMount:w,...h}=t,{isOpen:m,onClose:x,onOpen:D,onToggle:_}=La(t),C=y.useRef(null),A=y.useRef(null),S=y.useRef(null),$=y.useRef(!1),P=y.useRef(!1);m&&(P.current=!0);const[L,V]=y.useState(!1),[M,X]=y.useState(!1),ve=y.useId(),ue=a??ve,[fe,ne,re,ae]=["popover-trigger","popover-content","popover-header","popover-body"].map(j=>`${j}-${ue}`),{referenceRef:K,getArrowProps:G,getPopperProps:k,getArrowInnerProps:E,forceUpdate:v}=Ba({...h,enabled:m||!!w}),z=$a({isOpen:m,ref:S});jo({enabled:m,ref:A}),Ya(S,{focusRef:A,visible:m,shouldFocus:o&&d===Ie.click}),qa(S,{focusRef:r,visible:m,shouldFocus:i&&d===Ie.click});const U=Va({wasSelected:P.current,enabled:b,mode:p,isSelected:z.present}),ee=y.useCallback((j={},te=null)=>{const Q={...j,style:{...j.style,transformOrigin:vt.transformOrigin.varRef,[vt.arrowSize.var]:c?`${c}px`:void 0,[vt.arrowShadowColor.var]:f},ref:Se(S,te),children:U?j.children:null,id:ne,tabIndex:-1,role:"dialog",onKeyDown:J(j.onKeyDown,ce=>{e&&ce.key==="Escape"&&x()}),onBlur:J(j.onBlur,ce=>{const et=Jt(ce),wt=Ot(S.current,et),vr=Ot(A.current,et);m&&n&&(!wt&&!vr)&&x()}),"aria-labelledby":L?re:void 0,"aria-describedby":M?ae:void 0};return d===Ie.hover&&(Q.role="tooltip",Q.onMouseEnter=J(j.onMouseEnter,()=>{$.current=!0}),Q.onMouseLeave=J(j.onMouseLeave,ce=>{ce.nativeEvent.relatedTarget!==null&&($.current=!1,setTimeout(()=>x(),u))})),Q},[U,ne,L,re,M,ae,d,e,x,m,n,u,f,c]),ie=y.useCallback((j={},te=null)=>k({...j,style:{visibility:m?"visible":"hidden",...j.style}},te),[m,k]),B=y.useCallback((j,te=null)=>({...j,ref:Se(te,C,K)}),[C,K]),Y=y.useRef(),xt=y.useRef(),Gt=y.useCallback(j=>{C.current==null&&K(j)},[K]),br=y.useCallback((j={},te=null)=>{const Q={...j,ref:Se(A,te,Gt),id:fe,"aria-haspopup":"dialog","aria-expanded":m,"aria-controls":ne};return d===Ie.click&&(Q.onClick=J(j.onClick,_)),d===Ie.hover&&(Q.onFocus=J(j.onFocus,()=>{Y.current===void 0&&D()}),Q.onBlur=J(j.onBlur,ce=>{const et=Jt(ce),wt=!Ot(S.current,et);m&&n&&wt&&x()}),Q.onKeyDown=J(j.onKeyDown,ce=>{ce.key==="Escape"&&x()}),Q.onMouseEnter=J(j.onMouseEnter,()=>{$.current=!0,Y.current=window.setTimeout(()=>D(),l)}),Q.onMouseLeave=J(j.onMouseLeave,()=>{$.current=!1,Y.current&&(clearTimeout(Y.current),Y.current=void 0),xt.current=window.setTimeout(()=>{$.current===!1&&x()},u)})),Q},[fe,m,ne,d,Gt,_,D,n,x,l,u]);y.useEffect(()=>()=>{Y.current&&clearTimeout(Y.current),xt.current&&clearTimeout(xt.current)},[]);const xr=y.useCallback((j={},te=null)=>({...j,id:re,ref:Se(te,Q=>{V(!!Q)})}),[re]),wr=y.useCallback((j={},te=null)=>({...j,id:ae,ref:Se(te,Q=>{X(!!Q)})}),[ae]);return{forceUpdate:v,isOpen:m,onAnimationComplete:z.onComplete,onClose:x,getAnchorProps:B,getArrowProps:G,getArrowInnerProps:E,getPopoverPositionerProps:ie,getPopoverProps:ee,getTriggerProps:br,getHeaderProps:xr,getBodyProps:wr}}function Ot(t,n){return t===n||t?.contains(n)}function Jt(t){var n;const e=t.currentTarget.ownerDocument.activeElement;return(n=t.relatedTarget)!=null?n:e}function Vn(t){const n=xn("Popover",t),{children:e,...r}=wn(t),a=vn(),o=Wo({...r,direction:a.direction});return s.jsx(Fo,{value:o,children:s.jsx(Ho,{value:n,children:_r(e,{isOpen:o.isOpen,onClose:o.onClose,forceUpdate:o.forceUpdate})})})}Vn.displayName="Popover";function zn(t){const n=y.Children.only(t.children),{getAnchorProps:e}=Ze();return y.cloneElement(n,e(n.props,n.ref))}zn.displayName="PopoverAnchor";var Qn=xe(function(n,e){const{getBodyProps:r}=Ze(),a=qn();return s.jsx(je.div,{...r(n,e),className:we("chakra-popover__body",n.className),__css:a.body})});Qn.displayName="PopoverBody";function Lo(t){if(t)return{enter:{...t.enter,visibility:"visible"},exit:{...t.exit,transitionEnd:{visibility:"hidden"}}}}var Bo={exit:{opacity:0,scale:.95,transition:{duration:.1,ease:[.4,0,1,1]}},enter:{scale:1,opacity:1,transition:{duration:.15,ease:[0,0,.2,1]}}},$o=je(bn.section),Gn=xe(function(n,e){const{variants:r=Bo,...a}=n,{isOpen:o}=Ze();return s.jsx($o,{ref:e,variants:Lo(r),initial:!1,animate:o?"enter":"exit",...a})});Gn.displayName="PopoverTransition";var Un=xe(function(n,e){const{rootProps:r,motionProps:a,...o}=n,{getPopoverProps:i,getPopoverPositionerProps:c,onAnimationComplete:f}=Ze(),d=qn(),l={position:"relative",display:"flex",flexDirection:"column",...d.content};return s.jsx(je.div,{...c(r),__css:d.popper,className:"chakra-popover__popper",children:s.jsx(Gn,{...a,...i(o,e),onAnimationComplete:jr(f,o.onAnimationComplete),className:we("chakra-popover__content",n.className),__css:l})})});Un.displayName="PopoverContent";const Yo=t=>Vr(t,!0),qo=t=>zr(t,!0),Vo=t=>Qr(t,!0),zo=t=>Gr(t,!0);function q(t){const n=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&n==="[object Date]"?new t.constructor(+t):typeof t=="number"||n==="[object Number]"||typeof t=="string"||n==="[object String]"?new Date(t):new Date(NaN)}function R(t,n){return t instanceof Date?new t.constructor(n):new Date(n)}function Xn(t,n){const e=q(t);return isNaN(n)?R(t,NaN):(n&&e.setDate(e.getDate()+n),e)}const Kn=6048e5,Qo=864e5,Go=6e4,Uo=36e5,Xo=1e3;let Ko={};function Ye(){return Ko}function be(t,n){const e=Ye(),r=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,a=q(t),o=a.getDay(),i=(o<r?7:0)+o-r;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function We(t){return be(t,{weekStartsOn:1})}function Zn(t){const n=q(t),e=n.getFullYear(),r=R(t,0);r.setFullYear(e+1,0,4),r.setHours(0,0,0,0);const a=We(r),o=R(t,0);o.setFullYear(e,0,4),o.setHours(0,0,0,0);const i=We(o);return n.getTime()>=a.getTime()?e+1:n.getTime()>=i.getTime()?e:e-1}function kt(t){const n=q(t);return n.setHours(0,0,0,0),n}function it(t){const n=q(t),e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),+t-+e}function Zo(t,n){const e=kt(t),r=kt(n),a=+e-it(e),o=+r-it(r);return Math.round((a-o)/Qo)}function Jo(t){const n=Zn(t),e=R(t,0);return e.setFullYear(n,0,4),e.setHours(0,0,0,0),We(e)}function Jn(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function es(t){if(!Jn(t)&&typeof t!="number")return!1;const n=q(t);return!isNaN(Number(n))}function ts(t){const n=q(t),e=R(t,0);return e.setFullYear(n.getFullYear(),0,1),e.setHours(0,0,0,0),e}const ns={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},rs=(t,n,e)=>{let r;const a=ns[t];return typeof a=="string"?r=a:n===1?r=a.one:r=a.other.replace("{{count}}",n.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+r:r+" ago":r};function Ct(t){return(n={})=>{const e=n.width?String(n.width):t.defaultWidth;return t.formats[e]||t.formats[t.defaultWidth]}}const as={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},os={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ss={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},is={date:Ct({formats:as,defaultWidth:"full"}),time:Ct({formats:os,defaultWidth:"full"}),dateTime:Ct({formats:ss,defaultWidth:"full"})},cs={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ls=(t,n,e,r)=>cs[t];function Ve(t){return(n,e)=>{const r=e?.context?String(e.context):"standalone";let a;if(r==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,c=e?.width?String(e.width):i;a=t.formattingValues[c]||t.formattingValues[i]}else{const i=t.defaultWidth,c=e?.width?String(e.width):t.defaultWidth;a=t.values[c]||t.values[i]}const o=t.argumentCallback?t.argumentCallback(n):n;return a[o]}}const ds={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},us={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},fs={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},hs={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ms={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ps={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},gs=(t,n)=>{const e=Number(t),r=e%100;if(r>20||r<10)switch(r%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},ys={ordinalNumber:gs,era:Ve({values:ds,defaultWidth:"wide"}),quarter:Ve({values:us,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ve({values:fs,defaultWidth:"wide"}),day:Ve({values:hs,defaultWidth:"wide"}),dayPeriod:Ve({values:ms,defaultWidth:"wide",formattingValues:ps,defaultFormattingWidth:"wide"})};function ze(t){return(n,e={})=>{const r=e.width,a=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=n.match(a);if(!o)return null;const i=o[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],f=Array.isArray(c)?xs(c,u=>u.test(i)):bs(c,u=>u.test(i));let d;d=t.valueCallback?t.valueCallback(f):f,d=e.valueCallback?e.valueCallback(d):d;const l=n.slice(i.length);return{value:d,rest:l}}}function bs(t,n){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&n(t[e]))return e}function xs(t,n){for(let e=0;e<t.length;e++)if(n(t[e]))return e}function ws(t){return(n,e={})=>{const r=n.match(t.matchPattern);if(!r)return null;const a=r[0],o=n.match(t.parsePattern);if(!o)return null;let i=t.valueCallback?t.valueCallback(o[0]):o[0];i=e.valueCallback?e.valueCallback(i):i;const c=n.slice(a.length);return{value:i,rest:c}}}const vs=/^(\d+)(th|st|nd|rd)?/i,Ds=/\d+/i,Ps={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Os={any:[/^b/i,/^(a|c)/i]},Cs={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ts={any:[/1/i,/2/i,/3/i,/4/i]},_s={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},js={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ms={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ks={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Es={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Is={ordinalNumber:ws({matchPattern:vs,parsePattern:Ds,valueCallback:t=>parseInt(t,10)}),era:ze({matchPatterns:Ps,defaultMatchWidth:"wide",parsePatterns:Os,defaultParseWidth:"any"}),quarter:ze({matchPatterns:Cs,defaultMatchWidth:"wide",parsePatterns:Ts,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ze({matchPatterns:_s,defaultMatchWidth:"wide",parsePatterns:js,defaultParseWidth:"any"}),day:ze({matchPatterns:Ms,defaultMatchWidth:"wide",parsePatterns:ks,defaultParseWidth:"any"}),dayPeriod:ze({matchPatterns:Es,defaultMatchWidth:"any",parsePatterns:Ns,defaultParseWidth:"any"})},er={code:"en-US",formatDistance:rs,formatLong:is,formatRelative:ls,localize:ys,match:Is,options:{weekStartsOn:0,firstWeekContainsDate:1}};function As(t){const n=q(t);return Zo(n,ts(n))+1}function tr(t){const n=q(t),e=+We(n)-+Jo(n);return Math.round(e/Kn)+1}function Lt(t,n){const e=q(t),r=e.getFullYear(),a=Ye(),o=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,i=R(t,0);i.setFullYear(r+1,0,o),i.setHours(0,0,0,0);const c=be(i,n),f=R(t,0);f.setFullYear(r,0,o),f.setHours(0,0,0,0);const d=be(f,n);return e.getTime()>=c.getTime()?r+1:e.getTime()>=d.getTime()?r:r-1}function Ss(t,n){const e=Ye(),r=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??e.firstWeekContainsDate??e.locale?.options?.firstWeekContainsDate??1,a=Lt(t,n),o=R(t,0);return o.setFullYear(a,0,r),o.setHours(0,0,0,0),be(o,n)}function nr(t,n){const e=q(t),r=+be(e,n)-+Ss(e,n);return Math.round(r/Kn)+1}function T(t,n){const e=t<0?"-":"",r=Math.abs(t).toString().padStart(n,"0");return e+r}const me={y(t,n){const e=t.getFullYear(),r=e>0?e:1-e;return T(n==="yy"?r%100:r,n.length)},M(t,n){const e=t.getMonth();return n==="M"?String(e+1):T(e+1,2)},d(t,n){return T(t.getDate(),n.length)},a(t,n){const e=t.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(t,n){return T(t.getHours()%12||12,n.length)},H(t,n){return T(t.getHours(),n.length)},m(t,n){return T(t.getMinutes(),n.length)},s(t,n){return T(t.getSeconds(),n.length)},S(t,n){const e=n.length,r=t.getMilliseconds(),a=Math.trunc(r*Math.pow(10,e-3));return T(a,n.length)}},Ae={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},en={G:function(t,n,e){const r=t.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return e.era(r,{width:"abbreviated"});case"GGGGG":return e.era(r,{width:"narrow"});case"GGGG":default:return e.era(r,{width:"wide"})}},y:function(t,n,e){if(n==="yo"){const r=t.getFullYear(),a=r>0?r:1-r;return e.ordinalNumber(a,{unit:"year"})}return me.y(t,n)},Y:function(t,n,e,r){const a=Lt(t,r),o=a>0?a:1-a;if(n==="YY"){const i=o%100;return T(i,2)}return n==="Yo"?e.ordinalNumber(o,{unit:"year"}):T(o,n.length)},R:function(t,n){const e=Zn(t);return T(e,n.length)},u:function(t,n){const e=t.getFullYear();return T(e,n.length)},Q:function(t,n,e){const r=Math.ceil((t.getMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return T(r,2);case"Qo":return e.ordinalNumber(r,{unit:"quarter"});case"QQQ":return e.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,n,e){const r=Math.ceil((t.getMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return T(r,2);case"qo":return e.ordinalNumber(r,{unit:"quarter"});case"qqq":return e.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,n,e){const r=t.getMonth();switch(n){case"M":case"MM":return me.M(t,n);case"Mo":return e.ordinalNumber(r+1,{unit:"month"});case"MMM":return e.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(r,{width:"wide",context:"formatting"})}},L:function(t,n,e){const r=t.getMonth();switch(n){case"L":return String(r+1);case"LL":return T(r+1,2);case"Lo":return e.ordinalNumber(r+1,{unit:"month"});case"LLL":return e.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(r,{width:"wide",context:"standalone"})}},w:function(t,n,e,r){const a=nr(t,r);return n==="wo"?e.ordinalNumber(a,{unit:"week"}):T(a,n.length)},I:function(t,n,e){const r=tr(t);return n==="Io"?e.ordinalNumber(r,{unit:"week"}):T(r,n.length)},d:function(t,n,e){return n==="do"?e.ordinalNumber(t.getDate(),{unit:"date"}):me.d(t,n)},D:function(t,n,e){const r=As(t);return n==="Do"?e.ordinalNumber(r,{unit:"dayOfYear"}):T(r,n.length)},E:function(t,n,e){const r=t.getDay();switch(n){case"E":case"EE":case"EEE":return e.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(r,{width:"short",context:"formatting"});case"EEEE":default:return e.day(r,{width:"wide",context:"formatting"})}},e:function(t,n,e,r){const a=t.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return T(o,2);case"eo":return e.ordinalNumber(o,{unit:"day"});case"eee":return e.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(a,{width:"short",context:"formatting"});case"eeee":default:return e.day(a,{width:"wide",context:"formatting"})}},c:function(t,n,e,r){const a=t.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return T(o,n.length);case"co":return e.ordinalNumber(o,{unit:"day"});case"ccc":return e.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(a,{width:"narrow",context:"standalone"});case"cccccc":return e.day(a,{width:"short",context:"standalone"});case"cccc":default:return e.day(a,{width:"wide",context:"standalone"})}},i:function(t,n,e){const r=t.getDay(),a=r===0?7:r;switch(n){case"i":return String(a);case"ii":return T(a,n.length);case"io":return e.ordinalNumber(a,{unit:"day"});case"iii":return e.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(r,{width:"short",context:"formatting"});case"iiii":default:return e.day(r,{width:"wide",context:"formatting"})}},a:function(t,n,e){const a=t.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,n,e){const r=t.getHours();let a;switch(r===12?a=Ae.noon:r===0?a=Ae.midnight:a=r/12>=1?"pm":"am",n){case"b":case"bb":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,n,e){const r=t.getHours();let a;switch(r>=17?a=Ae.evening:r>=12?a=Ae.afternoon:r>=4?a=Ae.morning:a=Ae.night,n){case"B":case"BB":case"BBB":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,n,e){if(n==="ho"){let r=t.getHours()%12;return r===0&&(r=12),e.ordinalNumber(r,{unit:"hour"})}return me.h(t,n)},H:function(t,n,e){return n==="Ho"?e.ordinalNumber(t.getHours(),{unit:"hour"}):me.H(t,n)},K:function(t,n,e){const r=t.getHours()%12;return n==="Ko"?e.ordinalNumber(r,{unit:"hour"}):T(r,n.length)},k:function(t,n,e){let r=t.getHours();return r===0&&(r=24),n==="ko"?e.ordinalNumber(r,{unit:"hour"}):T(r,n.length)},m:function(t,n,e){return n==="mo"?e.ordinalNumber(t.getMinutes(),{unit:"minute"}):me.m(t,n)},s:function(t,n,e){return n==="so"?e.ordinalNumber(t.getSeconds(),{unit:"second"}):me.s(t,n)},S:function(t,n){return me.S(t,n)},X:function(t,n,e){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(n){case"X":return nn(r);case"XXXX":case"XX":return Pe(r);case"XXXXX":case"XXX":default:return Pe(r,":")}},x:function(t,n,e){const r=t.getTimezoneOffset();switch(n){case"x":return nn(r);case"xxxx":case"xx":return Pe(r);case"xxxxx":case"xxx":default:return Pe(r,":")}},O:function(t,n,e){const r=t.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+tn(r,":");case"OOOO":default:return"GMT"+Pe(r,":")}},z:function(t,n,e){const r=t.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+tn(r,":");case"zzzz":default:return"GMT"+Pe(r,":")}},t:function(t,n,e){const r=Math.trunc(t.getTime()/1e3);return T(r,n.length)},T:function(t,n,e){const r=t.getTime();return T(r,n.length)}};function tn(t,n=""){const e=t>0?"-":"+",r=Math.abs(t),a=Math.trunc(r/60),o=r%60;return o===0?e+String(a):e+String(a)+n+T(o,2)}function nn(t,n){return t%60===0?(t>0?"-":"+")+T(Math.abs(t)/60,2):Pe(t,n)}function Pe(t,n=""){const e=t>0?"-":"+",r=Math.abs(t),a=T(Math.trunc(r/60),2),o=T(r%60,2);return e+a+n+o}const rn=(t,n)=>{switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},rr=(t,n)=>{switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Rs=(t,n)=>{const e=t.match(/(P+)(p+)?/)||[],r=e[1],a=e[2];if(!a)return rn(t,n);let o;switch(r){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",rn(r,n)).replace("{{time}}",rr(a,n))},Et={p:rr,P:Rs},Fs=/^D+$/,Hs=/^Y+$/,Ws=["D","DD","YY","YYYY"];function ar(t){return Fs.test(t)}function or(t){return Hs.test(t)}function Nt(t,n,e){const r=Ls(t,n,e);if(console.warn(r),Ws.includes(t))throw new RangeError(r)}function Ls(t,n,e){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${n}\`) for formatting ${r} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Bs=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$s=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ys=/^'([^]*?)'?$/,qs=/''/g,Vs=/[a-zA-Z]/;function Oe(t,n,e){const r=Ye(),a=r.locale??er,o=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,i=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,c=q(t);if(!es(c))throw new RangeError("Invalid time value");let f=n.match($s).map(l=>{const u=l[0];if(u==="p"||u==="P"){const b=Et[u];return b(l,a.formatLong)}return l}).join("").match(Bs).map(l=>{if(l==="''")return{isToken:!1,value:"'"};const u=l[0];if(u==="'")return{isToken:!1,value:zs(l)};if(en[u])return{isToken:!0,value:l};if(u.match(Vs))throw new RangeError("Format string contains an unescaped latin alphabet character `"+u+"`");return{isToken:!1,value:l}});a.localize.preprocessor&&(f=a.localize.preprocessor(c,f));const d={firstWeekContainsDate:o,weekStartsOn:i,locale:a};return f.map(l=>{if(!l.isToken)return l.value;const u=l.value;(or(u)||ar(u))&&Nt(u,n,String(t));const b=en[u[0]];return b(c,u,a.localize,d)}).join("")}function zs(t){const n=t.match(Ys);return n?n[1].replace(qs,"'"):t}function Qs(){return Object.assign({},Ye())}function Gs(t){let e=q(t).getDay();return e===0&&(e=7),e}function Us(t,n){const e=n instanceof Date?R(n,0):new n(0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),e}const Xs=10;class sr{constructor(){g(this,"subPriority",0)}validate(n,e){return!0}}class Ks extends sr{constructor(n,e,r,a,o){super(),this.value=n,this.validateValue=e,this.setValue=r,this.priority=a,o&&(this.subPriority=o)}validate(n,e){return this.validateValue(n,this.value,e)}set(n,e,r){return this.setValue(n,e,this.value,r)}}class Zs extends sr{constructor(){super(...arguments);g(this,"priority",Xs);g(this,"subPriority",-1)}set(e,r){return r.timestampIsSet?e:R(e,Us(e,Date))}}class O{run(n,e,r,a){const o=this.parse(n,e,r,a);return o?{setter:new Ks(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(n,e,r){return!0}}class Js extends O{constructor(){super(...arguments);g(this,"priority",140);g(this,"incompatibleTokens",["R","u","t","T"])}parse(e,r,a){switch(r){case"G":case"GG":case"GGG":return a.era(e,{width:"abbreviated"})||a.era(e,{width:"narrow"});case"GGGGG":return a.era(e,{width:"narrow"});case"GGGG":default:return a.era(e,{width:"wide"})||a.era(e,{width:"abbreviated"})||a.era(e,{width:"narrow"})}}set(e,r,a){return r.era=a,e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}const H={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},oe={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function W(t,n){return t&&{value:n(t.value),rest:t.rest}}function I(t,n){const e=n.match(t);return e?{value:parseInt(e[0],10),rest:n.slice(e[0].length)}:null}function se(t,n){const e=n.match(t);if(!e)return null;if(e[0]==="Z")return{value:0,rest:n.slice(1)};const r=e[1]==="+"?1:-1,a=e[2]?parseInt(e[2],10):0,o=e[3]?parseInt(e[3],10):0,i=e[5]?parseInt(e[5],10):0;return{value:r*(a*Uo+o*Go+i*Xo),rest:n.slice(e[0].length)}}function ir(t){return I(H.anyDigitsSigned,t)}function F(t,n){switch(t){case 1:return I(H.singleDigit,n);case 2:return I(H.twoDigits,n);case 3:return I(H.threeDigits,n);case 4:return I(H.fourDigits,n);default:return I(new RegExp("^\\d{1,"+t+"}"),n)}}function ct(t,n){switch(t){case 1:return I(H.singleDigitSigned,n);case 2:return I(H.twoDigitsSigned,n);case 3:return I(H.threeDigitsSigned,n);case 4:return I(H.fourDigitsSigned,n);default:return I(new RegExp("^-?\\d{1,"+t+"}"),n)}}function Bt(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function cr(t,n){const e=n>0,r=e?n:1-n;let a;if(r<=50)a=t||100;else{const o=r+50,i=Math.trunc(o/100)*100,c=t>=o%100;a=t+i-(c?100:0)}return e?a:1-a}function lr(t){return t%400===0||t%4===0&&t%100!==0}class ei extends O{constructor(){super(...arguments);g(this,"priority",130);g(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,r,a){const o=i=>({year:i,isTwoDigitYear:r==="yy"});switch(r){case"y":return W(F(4,e),o);case"yo":return W(a.ordinalNumber(e,{unit:"year"}),o);default:return W(F(r.length,e),o)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,a){const o=e.getFullYear();if(a.isTwoDigitYear){const c=cr(a.year,o);return e.setFullYear(c,0,1),e.setHours(0,0,0,0),e}const i=!("era"in r)||r.era===1?a.year:1-a.year;return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}class ti extends O{constructor(){super(...arguments);g(this,"priority",130);g(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,r,a){const o=i=>({year:i,isTwoDigitYear:r==="YY"});switch(r){case"Y":return W(F(4,e),o);case"Yo":return W(a.ordinalNumber(e,{unit:"year"}),o);default:return W(F(r.length,e),o)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,a,o){const i=Lt(e,o);if(a.isTwoDigitYear){const f=cr(a.year,i);return e.setFullYear(f,0,o.firstWeekContainsDate),e.setHours(0,0,0,0),be(e,o)}const c=!("era"in r)||r.era===1?a.year:1-a.year;return e.setFullYear(c,0,o.firstWeekContainsDate),e.setHours(0,0,0,0),be(e,o)}}class ni extends O{constructor(){super(...arguments);g(this,"priority",130);g(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,r){return ct(r==="R"?4:r.length,e)}set(e,r,a){const o=R(e,0);return o.setFullYear(a,0,4),o.setHours(0,0,0,0),We(o)}}class ri extends O{constructor(){super(...arguments);g(this,"priority",130);g(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,r){return ct(r==="u"?4:r.length,e)}set(e,r,a){return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class ai extends O{constructor(){super(...arguments);g(this,"priority",120);g(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,a){switch(r){case"Q":case"QQ":return F(r.length,e);case"Qo":return a.ordinalNumber(e,{unit:"quarter"});case"QQQ":return a.quarter(e,{width:"abbreviated",context:"formatting"})||a.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(e,{width:"wide",context:"formatting"})||a.quarter(e,{width:"abbreviated",context:"formatting"})||a.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=1&&r<=4}set(e,r,a){return e.setMonth((a-1)*3,1),e.setHours(0,0,0,0),e}}class oi extends O{constructor(){super(...arguments);g(this,"priority",120);g(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,a){switch(r){case"q":case"qq":return F(r.length,e);case"qo":return a.ordinalNumber(e,{unit:"quarter"});case"qqq":return a.quarter(e,{width:"abbreviated",context:"standalone"})||a.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(e,{width:"wide",context:"standalone"})||a.quarter(e,{width:"abbreviated",context:"standalone"})||a.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=1&&r<=4}set(e,r,a){return e.setMonth((a-1)*3,1),e.setHours(0,0,0,0),e}}class si extends O{constructor(){super(...arguments);g(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);g(this,"priority",110)}parse(e,r,a){const o=i=>i-1;switch(r){case"M":return W(I(H.month,e),o);case"MM":return W(F(2,e),o);case"Mo":return W(a.ordinalNumber(e,{unit:"month"}),o);case"MMM":return a.month(e,{width:"abbreviated",context:"formatting"})||a.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(e,{width:"wide",context:"formatting"})||a.month(e,{width:"abbreviated",context:"formatting"})||a.month(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=11}set(e,r,a){return e.setMonth(a,1),e.setHours(0,0,0,0),e}}class ii extends O{constructor(){super(...arguments);g(this,"priority",110);g(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,r,a){const o=i=>i-1;switch(r){case"L":return W(I(H.month,e),o);case"LL":return W(F(2,e),o);case"Lo":return W(a.ordinalNumber(e,{unit:"month"}),o);case"LLL":return a.month(e,{width:"abbreviated",context:"standalone"})||a.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(e,{width:"wide",context:"standalone"})||a.month(e,{width:"abbreviated",context:"standalone"})||a.month(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=11}set(e,r,a){return e.setMonth(a,1),e.setHours(0,0,0,0),e}}function ci(t,n,e){const r=q(t),a=nr(r,e)-n;return r.setDate(r.getDate()-a*7),r}class li extends O{constructor(){super(...arguments);g(this,"priority",100);g(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,r,a){switch(r){case"w":return I(H.week,e);case"wo":return a.ordinalNumber(e,{unit:"week"});default:return F(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,a,o){return be(ci(e,a,o),o)}}function di(t,n){const e=q(t),r=tr(e)-n;return e.setDate(e.getDate()-r*7),e}class ui extends O{constructor(){super(...arguments);g(this,"priority",100);g(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,r,a){switch(r){case"I":return I(H.week,e);case"Io":return a.ordinalNumber(e,{unit:"week"});default:return F(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,a){return We(di(e,a))}}const fi=[31,28,31,30,31,30,31,31,30,31,30,31],hi=[31,29,31,30,31,30,31,31,30,31,30,31];class mi extends O{constructor(){super(...arguments);g(this,"priority",90);g(this,"subPriority",1);g(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,r,a){switch(r){case"d":return I(H.date,e);case"do":return a.ordinalNumber(e,{unit:"date"});default:return F(r.length,e)}}validate(e,r){const a=e.getFullYear(),o=lr(a),i=e.getMonth();return o?r>=1&&r<=hi[i]:r>=1&&r<=fi[i]}set(e,r,a){return e.setDate(a),e.setHours(0,0,0,0),e}}class pi extends O{constructor(){super(...arguments);g(this,"priority",90);g(this,"subpriority",1);g(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,r,a){switch(r){case"D":case"DD":return I(H.dayOfYear,e);case"Do":return a.ordinalNumber(e,{unit:"date"});default:return F(r.length,e)}}validate(e,r){const a=e.getFullYear();return lr(a)?r>=1&&r<=366:r>=1&&r<=365}set(e,r,a){return e.setMonth(0,a),e.setHours(0,0,0,0),e}}function $t(t,n,e){const r=Ye(),a=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,o=q(t),i=o.getDay(),f=(n%7+7)%7,d=7-a,l=n<0||n>6?n-(i+d)%7:(f+d)%7-(i+d)%7;return Xn(o,l)}class gi extends O{constructor(){super(...arguments);g(this,"priority",90);g(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,r,a){switch(r){case"E":case"EE":case"EEE":return a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return a.day(e,{width:"wide",context:"formatting"})||a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,a,o){return e=$t(e,a,o),e.setHours(0,0,0,0),e}}class yi extends O{constructor(){super(...arguments);g(this,"priority",90);g(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,r,a,o){const i=c=>{const f=Math.floor((c-1)/7)*7;return(c+o.weekStartsOn+6)%7+f};switch(r){case"e":case"ee":return W(F(r.length,e),i);case"eo":return W(a.ordinalNumber(e,{unit:"day"}),i);case"eee":return a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"eeeee":return a.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return a.day(e,{width:"wide",context:"formatting"})||a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,a,o){return e=$t(e,a,o),e.setHours(0,0,0,0),e}}class bi extends O{constructor(){super(...arguments);g(this,"priority",90);g(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,r,a,o){const i=c=>{const f=Math.floor((c-1)/7)*7;return(c+o.weekStartsOn+6)%7+f};switch(r){case"c":case"cc":return W(F(r.length,e),i);case"co":return W(a.ordinalNumber(e,{unit:"day"}),i);case"ccc":return a.day(e,{width:"abbreviated",context:"standalone"})||a.day(e,{width:"short",context:"standalone"})||a.day(e,{width:"narrow",context:"standalone"});case"ccccc":return a.day(e,{width:"narrow",context:"standalone"});case"cccccc":return a.day(e,{width:"short",context:"standalone"})||a.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return a.day(e,{width:"wide",context:"standalone"})||a.day(e,{width:"abbreviated",context:"standalone"})||a.day(e,{width:"short",context:"standalone"})||a.day(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=6}set(e,r,a,o){return e=$t(e,a,o),e.setHours(0,0,0,0),e}}function xi(t,n){const e=q(t),r=Gs(e),a=n-r;return Xn(e,a)}class wi extends O{constructor(){super(...arguments);g(this,"priority",90);g(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,r,a){const o=i=>i===0?7:i;switch(r){case"i":case"ii":return F(r.length,e);case"io":return a.ordinalNumber(e,{unit:"day"});case"iii":return W(a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"}),o);case"iiiii":return W(a.day(e,{width:"narrow",context:"formatting"}),o);case"iiiiii":return W(a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"}),o);case"iiii":default:return W(a.day(e,{width:"wide",context:"formatting"})||a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"}),o)}}validate(e,r){return r>=1&&r<=7}set(e,r,a){return e=xi(e,a),e.setHours(0,0,0,0),e}}class vi extends O{constructor(){super(...arguments);g(this,"priority",80);g(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,r,a){switch(r){case"a":case"aa":case"aaa":return a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(e,{width:"wide",context:"formatting"})||a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,a){return e.setHours(Bt(a),0,0,0),e}}class Di extends O{constructor(){super(...arguments);g(this,"priority",80);g(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,r,a){switch(r){case"b":case"bb":case"bbb":return a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(e,{width:"wide",context:"formatting"})||a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,a){return e.setHours(Bt(a),0,0,0),e}}class Pi extends O{constructor(){super(...arguments);g(this,"priority",80);g(this,"incompatibleTokens",["a","b","t","T"])}parse(e,r,a){switch(r){case"B":case"BB":case"BBB":return a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(e,{width:"wide",context:"formatting"})||a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,a){return e.setHours(Bt(a),0,0,0),e}}class Oi extends O{constructor(){super(...arguments);g(this,"priority",70);g(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,r,a){switch(r){case"h":return I(H.hour12h,e);case"ho":return a.ordinalNumber(e,{unit:"hour"});default:return F(r.length,e)}}validate(e,r){return r>=1&&r<=12}set(e,r,a){const o=e.getHours()>=12;return o&&a<12?e.setHours(a+12,0,0,0):!o&&a===12?e.setHours(0,0,0,0):e.setHours(a,0,0,0),e}}class Ci extends O{constructor(){super(...arguments);g(this,"priority",70);g(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,r,a){switch(r){case"H":return I(H.hour23h,e);case"Ho":return a.ordinalNumber(e,{unit:"hour"});default:return F(r.length,e)}}validate(e,r){return r>=0&&r<=23}set(e,r,a){return e.setHours(a,0,0,0),e}}class Ti extends O{constructor(){super(...arguments);g(this,"priority",70);g(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,r,a){switch(r){case"K":return I(H.hour11h,e);case"Ko":return a.ordinalNumber(e,{unit:"hour"});default:return F(r.length,e)}}validate(e,r){return r>=0&&r<=11}set(e,r,a){return e.getHours()>=12&&a<12?e.setHours(a+12,0,0,0):e.setHours(a,0,0,0),e}}class _i extends O{constructor(){super(...arguments);g(this,"priority",70);g(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,r,a){switch(r){case"k":return I(H.hour24h,e);case"ko":return a.ordinalNumber(e,{unit:"hour"});default:return F(r.length,e)}}validate(e,r){return r>=1&&r<=24}set(e,r,a){const o=a<=24?a%24:a;return e.setHours(o,0,0,0),e}}class ji extends O{constructor(){super(...arguments);g(this,"priority",60);g(this,"incompatibleTokens",["t","T"])}parse(e,r,a){switch(r){case"m":return I(H.minute,e);case"mo":return a.ordinalNumber(e,{unit:"minute"});default:return F(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,a){return e.setMinutes(a,0,0),e}}class Mi extends O{constructor(){super(...arguments);g(this,"priority",50);g(this,"incompatibleTokens",["t","T"])}parse(e,r,a){switch(r){case"s":return I(H.second,e);case"so":return a.ordinalNumber(e,{unit:"second"});default:return F(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,a){return e.setSeconds(a,0),e}}class ki extends O{constructor(){super(...arguments);g(this,"priority",30);g(this,"incompatibleTokens",["t","T"])}parse(e,r){const a=o=>Math.trunc(o*Math.pow(10,-r.length+3));return W(F(r.length,e),a)}set(e,r,a){return e.setMilliseconds(a),e}}class Ei extends O{constructor(){super(...arguments);g(this,"priority",10);g(this,"incompatibleTokens",["t","T","x"])}parse(e,r){switch(r){case"X":return se(oe.basicOptionalMinutes,e);case"XX":return se(oe.basic,e);case"XXXX":return se(oe.basicOptionalSeconds,e);case"XXXXX":return se(oe.extendedOptionalSeconds,e);case"XXX":default:return se(oe.extended,e)}}set(e,r,a){return r.timestampIsSet?e:R(e,e.getTime()-it(e)-a)}}class Ni extends O{constructor(){super(...arguments);g(this,"priority",10);g(this,"incompatibleTokens",["t","T","X"])}parse(e,r){switch(r){case"x":return se(oe.basicOptionalMinutes,e);case"xx":return se(oe.basic,e);case"xxxx":return se(oe.basicOptionalSeconds,e);case"xxxxx":return se(oe.extendedOptionalSeconds,e);case"xxx":default:return se(oe.extended,e)}}set(e,r,a){return r.timestampIsSet?e:R(e,e.getTime()-it(e)-a)}}class Ii extends O{constructor(){super(...arguments);g(this,"priority",40);g(this,"incompatibleTokens","*")}parse(e){return ir(e)}set(e,r,a){return[R(e,a*1e3),{timestampIsSet:!0}]}}class Ai extends O{constructor(){super(...arguments);g(this,"priority",20);g(this,"incompatibleTokens","*")}parse(e){return ir(e)}set(e,r,a){return[R(e,a),{timestampIsSet:!0}]}}const Si={G:new Js,y:new ei,Y:new ti,R:new ni,u:new ri,Q:new ai,q:new oi,M:new si,L:new ii,w:new li,I:new ui,d:new mi,D:new pi,E:new gi,e:new yi,c:new bi,i:new wi,a:new vi,b:new Di,B:new Pi,h:new Oi,H:new Ci,K:new Ti,k:new _i,m:new ji,s:new Mi,S:new ki,X:new Ei,x:new Ni,t:new Ii,T:new Ai},Ri=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Fi=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Hi=/^'([^]*?)'?$/,Wi=/''/g,Li=/\S/,Bi=/[a-zA-Z]/;function dr(t,n,e,r){const a=Qs(),o=a.locale??er,i=a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,c=a.weekStartsOn??a.locale?.options?.weekStartsOn??0;if(n==="")return t===""?q(e):R(e,NaN);const f={firstWeekContainsDate:i,weekStartsOn:c,locale:o},d=[new Zs],l=n.match(Fi).map(h=>{const m=h[0];if(m in Et){const x=Et[m];return x(h,o.formatLong)}return h}).join("").match(Ri),u=[];for(let h of l){or(h)&&Nt(h,n,t),ar(h)&&Nt(h,n,t);const m=h[0],x=Si[m];if(x){const{incompatibleTokens:D}=x;if(Array.isArray(D)){const C=u.find(A=>D.includes(A.token)||A.token===m);if(C)throw new RangeError(`The format string mustn't contain \`${C.fullToken}\` and \`${h}\` at the same time`)}else if(x.incompatibleTokens==="*"&&u.length>0)throw new RangeError(`The format string mustn't contain \`${h}\` and any other token at the same time`);u.push({token:m,fullToken:h});const _=x.run(t,h,o.match,f);if(!_)return R(e,NaN);d.push(_.setter),t=_.rest}else{if(m.match(Bi))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");if(h==="''"?h="'":m==="'"&&(h=$i(h)),t.indexOf(h)===0)t=t.slice(h.length);else return R(e,NaN)}}if(t.length>0&&Li.test(t))return R(e,NaN);const b=d.map(h=>h.priority).sort((h,m)=>m-h).filter((h,m,x)=>x.indexOf(h)===m).map(h=>d.filter(m=>m.priority===h).sort((m,x)=>x.subPriority-m.subPriority)).map(h=>h[0]);let p=q(e);if(isNaN(p.getTime()))return R(e,NaN);const w={};for(const h of b){if(!h.validate(p,f))return R(e,NaN);const m=h.set(p,w,f);Array.isArray(m)?(p=m[0],Object.assign(w,m[1])):p=m}return R(e,p)}function $i(t){return t.match(Hi)[1].replace(Wi,"'")}function Yi(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var lt=Yi(y),qi=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Vi=function(t,n){var e={};for(var r in t)n.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},an=function(n){var e=n.color,r=e===void 0?"currentColor":e,a=n.size,o=a===void 0?24:a;n.children;var i=Vi(n,["color","size","children"]),c="mdi-icon "+(i.className||"");return lt.createElement("svg",qi({},i,{className:c,width:o,height:o,fill:r,viewBox:"0 0 24 24"}),lt.createElement("path",{d:"M21,19V17H8V19H21M21,13V11H8V13H21M8,7H21V5H8V7M4,5V7H6V5H4M3,5A1,1 0 0,1 4,4H6A1,1 0 0,1 7,5V7A1,1 0 0,1 6,8H4A1,1 0 0,1 3,7V5M4,11V13H6V11H4M3,11A1,1 0 0,1 4,10H6A1,1 0 0,1 7,11V13A1,1 0 0,1 6,14H4A1,1 0 0,1 3,13V11M4,17V19H6V17H4M3,17A1,1 0 0,1 4,16H6A1,1 0 0,1 7,17V19A1,1 0 0,1 6,20H4A1,1 0 0,1 3,19V17Z"}))},zi=lt.memo?lt.memo(an):an,Qi=zi;const Gi=_e(Qi);function Ui(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var dt=Ui(y),Xi=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Ki=function(t,n){var e={};for(var r in t)n.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},on=function(n){var e=n.color,r=e===void 0?"currentColor":e,a=n.size,o=a===void 0?24:a;n.children;var i=Ki(n,["color","size","children"]),c="mdi-icon "+(i.className||"");return dt.createElement("svg",Xi({},i,{className:c,width:o,height:o,fill:r,viewBox:"0 0 24 24"}),dt.createElement("path",{d:"M21,9L17,5V8H10V10H17V13M7,11L3,15L7,19V16H14V14H7V11Z"}))},Zi=dt.memo?dt.memo(on):on,Ji=Zi;const sn=_e(Ji);function ec(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var ut=ec(y),tc=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},nc=function(t,n){var e={};for(var r in t)n.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},cn=function(n){var e=n.color,r=e===void 0?"currentColor":e,a=n.size,o=a===void 0?24:a;n.children;var i=nc(n,["color","size","children"]),c="mdi-icon "+(i.className||"");return ut.createElement("svg",tc({},i,{className:c,width:o,height:o,fill:r,viewBox:"0 0 24 24"}),ut.createElement("path",{d:"M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z"}))},rc=ut.memo?ut.memo(cn):cn,ac=rc;const oc=_e(ac);function sc(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var ft=sc(y),ic=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},cc=function(t,n){var e={};for(var r in t)n.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ln=function(n){var e=n.color,r=e===void 0?"currentColor":e,a=n.size,o=a===void 0?24:a;n.children;var i=cc(n,["color","size","children"]),c="mdi-icon "+(i.className||"");return ft.createElement("svg",ic({},i,{className:c,width:o,height:o,fill:r,viewBox:"0 0 24 24"}),ft.createElement("path",{d:"M2,21L23,12L2,3V10L17,12L2,14V21Z"}))},lc=ft.memo?ft.memo(ln):ln,dc=lc;const uc=_e(dc),fc=t=>{gn();const{handleSubmit:n}=$e(),{isDraft:e,isUpdating:r,isCopying:a,isDisabled:o,handlePedidoAction:i,handleDraftAction:c,handlePedidoSummary:f,setIsDraft:d,...l}=t;return s.jsx(s.Fragment,{children:s.jsxs(Tt,{flex:1,alignItems:"center",justifyContent:"space-between",sx:{mx:4},children:[s.jsxs(jn,{spacing:{base:2,sm:3},alignItems:"center",children:[e?s.jsxs(s.Fragment,{children:[s.jsx(qe,{icon:oc,text:r?Nr:Ir,sharedProps:{size:"md",fontWeight:"400",colorScheme:e?"deepOrange":"orange",variant:e?"outline":"solid",isDisabled:o,onClick:()=>{n(async u=>{await c(u)})()}},iconProps:{boxSize:{base:5,md:4}}}),!r&&s.jsx(qe,{icon:sn,text:Ar,sharedProps:{size:"md",fontWeight:"400",colorScheme:"green",variant:e?"outline":"solid",isDisabled:o,onClick:()=>{d(!1)}},iconProps:{boxSize:{base:5,md:4}}})]}):s.jsxs(s.Fragment,{children:[s.jsx(qe,{icon:uc,text:r?Mr:kr,sharedProps:{size:"md",fontWeight:"400",colorScheme:"orange",isDisabled:o,onClick:()=>{n(async u=>{await i(u)})()}},iconProps:{boxSize:{base:5,md:4}}}),!r&&s.jsx(qe,{icon:sn,text:Er,sharedProps:{size:"md",fontWeight:"400",colorScheme:"green",isDisabled:o,onClick:()=>{d(!0)}},iconProps:{boxSize:{base:5,md:4}}})]}),s.jsx(qe,{icon:Gi,text:Sr,breakpoint:"lg",sharedProps:{size:"md",fontWeight:"400",colorScheme:"blue",variant:e?"outline":"solid",isDisabled:o,onClick:()=>f()},iconProps:{boxSize:{base:5,md:4}}})]}),s.jsx(Tt,{alignItems:"center",sx:{ms:{base:2,sm:3}},children:s.jsx(la,{...l})})]})})},hc=({app:t,cabecera:n,renglones:e,total:r,bonificacionGlobal:a,title:o,emptyResultText:i,onResolve:c})=>{const f=()=>{c(0)},d=t.authState.isCustomer(),l=pe("var(--chakra-colors-gray-200)","var(--chakra-colors-black)"),u=pe("var(--chakra-colors-gray-400)","var(--chakra-colors-black)"),b=n.usuario_exento_iva,p=n.usuario_exento_ii,h=!b&&!p?"":`(${On(b,p).toLocaleUpperCase()})`,m=s.jsx(Sa,{textAlign:"center",children:i}),x=s.jsx(Cn,{sx:{p:0,m:0},children:s.jsx(Mn,{variant:"stripedOverCard",colorScheme:"gray",size:"md",sx:{borderCollapse:"separate"},children:s.jsx(kn,{children:s.jsx(En,{children:s.jsx(Nn,{sx:{p:0},children:s.jsxs("table",{width:"100%",cellPadding:8,cellSpacing:4,style:{fontSize:"0.8rem",border:`1px solid ${u}`},children:[s.jsx("thead",{style:{backgroundColor:`${l}`,textTransform:"uppercase"},children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left",style:{width:"70%"},children:"Artículo"}),s.jsx("th",{className:"text-center",style:{width:"15%"},children:"Cantidad"}),s.jsx("th",{className:"text-right",style:{width:"15%"},children:"Subtotal"})]})}),s.jsxs("tbody",{children:[e.map((D,_)=>{const{id:C,codigo:A,nombre:S,cantidad:$,precio:P,bonificacion_lista_de_precios:L}=D,V=Rt(P??0,L??a),M=($??0)*(V??0);return s.jsxs("tr",{children:[s.jsxs("td",{className:"word-break-all",children:[A," - ",S]}),s.jsx("td",{className:"text-center",children:$}),s.jsx("td",{className:"text-right",children:s.jsx(ge,{precio:M,moneda:"$"})})]},`pedido-row-${C}`)}),s.jsxs("tr",{children:[s.jsx("td",{colSpan:2,children:s.jsxs("strong",{children:["TOTAL"," ",a>0?s.jsxs(s.Fragment,{children:[!d&&s.jsxs(s.Fragment,{children:[` -${a}%`," "]}),s.jsx("span",{children:h})]}):s.jsxs("span",{children:[" ",h]})]})}),s.jsx("td",{className:"text-right",children:s.jsx("strong",{children:s.jsx(ge,{precio:r??0,moneda:"$"})})})]})]})]})})})})})});return s.jsx(Fr,{isOpen:!0,dialogTitle:o,dialogSize:{base:"full",sm:"md",md:"3xl"},dialogContents:e.length?x:m,handleCancel:f,handleCancelWording:Hr})};function mc(){return Rr(hc)}const Re=60,It=120,ur=240;function dn(t,n){return Jn(n)?n:dr(n,"yyyy-MM-dd",new Date)}const pc=t=>{const n="La leyenda no debe superar los ${max} caracteres",e=Xt({fecha_alta:Kt().transform(dn).typeError("Ingrese una fecha de alta válida").required("Ingrese una fecha de alta válida"),fecha_entrega:Kt().transform(dn).min(Jr("fecha_alta"),"La fecha de entrega no puede ser anterior a la fecha de alta").typeError("Ingrese una fecha de entrega válida").required("Ingrese una fecha de alta válida"),id_condicion:De().required("Seleccione la condición de venta"),id_asiento:De().required("Seleccione el tipo de asiento"),id_transporte:De().required("Seleccione el transporte"),id_talonario:De().required("Seleccione el talonario"),id_deposito:De().required("Seleccione el depósito"),id_direccion:De().required("Seleccione una dirección"),bonificacion:De().required("Ingrese bonificación").typeError("Ingrese una bonificación válida").min(0,"La bonificación debe encontrarse entre 0 y 100%").max(100,"La bonificación debe encontrarse entre 0 y 100%"),quantities:ea().test("at-least-one-quantity","Ingrese al menos una cantidad",function(r){return r==null||r.length===0?!1:r.some(a=>a!=null&&a>0)}).required("Ingrese al menos una cantidad"),leyenda1:he().default("").max(Re,n),leyenda2:he().default("").max(Re,n),leyenda3:he().default("").max(Re,n),leyenda4:he().default("").max(Re,n),leyenda5:he().default("").max(Re,n),descripcion:he().default("").max(It,"La descripción no puede superar los ${max} caracteres"),mensaje_interno:he().default("").max(ur,"El mensaje interno no puede superar los ${max} caracteres")}).required();if(t){const r=Xt({descripcion:he().required("Ingrese una descripción").max(It,"La descripción no puede superar los ${max} caracteres")});return e.concat(r)}return e},gc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],yc=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Ue(){return Ue=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Ue.apply(this,arguments)}function Yt(t,n){if(t==null)return{};var e={},r=Object.keys(t),a,o;for(o=0;o<r.length;o++)a=r[o],!(n.indexOf(a)>=0)&&(e[a]=t[a]);return e}function bc(t){if(t===null||t===!0||t===!1)return NaN;var n=Number(t);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}function Le(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&n==="[object Date]"?new Date(t.getTime()):typeof t=="number"||n==="[object Number]"?new Date(t):((typeof t=="string"||n==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function yt(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Le(t),r=bc(n);return e.setDate(e.getDate()+r),e}function Be(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Le(t),r=Le(n);return e.getTime()<r.getTime()}function Ce(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Le(t);return n.setHours(0,0,0,0),n}function xc(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Ce(t),r=Ce(n);return e.getTime()===r.getTime()}function wc(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return xc(t,Date.now())}function fr(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Le(t),r=Le(n),a=e.getFullYear()-r.getFullYear(),o=e.getMonth()-r.getMonth();return a*12+o}function qt(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return function(r){for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];return n.some(function(c){return c&&c.apply(void 0,[r].concat(o)),r.defaultPrevented})}}function Vt(t,n){throw new Error('The property "'+n+'" is required in "'+t+'"')}function vc(t){var n=t.calendars,e=t.offset,r=t.minDate;if(e>1&&r){var a=n[0].firstDayOfMonth,o=fr(a,r);o<e&&(e=o)}return e}function Dc(t){var n=t.calendars,e=t.offset,r=t.maxDate;if(e>1&&r){var a=n[n.length-1].lastDayOfMonth,o=fr(r,a);o<e&&(e=o)}return e}function Pc(t){var n=t.calendars,e=t.minDate;if(!e)return!1;var r=n[0].firstDayOfMonth,a=yt(r,-1);return!!Be(a,e)}function Oc(t){var n=t.calendars,e=t.maxDate;if(!e)return!1;var r=n[n.length-1].lastDayOfMonth,a=yt(r,1);return!!Be(e,a)}function Cc(t){for(var n=t.date,e=t.selected,r=t.monthsToDisplay,a=t.offset,o=t.minDate,i=t.maxDate,c=t.firstDayOfWeek,f=t.showOutsideDays,d=[],l=Tc(n,o,i),u=0;u<r;u++){var b=_c({month:l.getMonth()+u+a,year:l.getFullYear(),selectedDates:e,minDate:o,maxDate:i,firstDayOfWeek:c,showOutsideDays:f});d.push(b)}return d}function Tc(t,n,e){var r=Ce(t);if(n){var a=Ce(n);Be(r,a)&&(r=a)}if(e){var o=Ce(e);Be(o,r)&&(r=o)}return r}function _c(t){var n=t.month,e=t.year,r=t.selectedDates,a=t.minDate,o=t.maxDate,i=t.firstDayOfWeek,c=t.showOutsideDays,f=kc(n,e),d=f.daysInMonth;n=f.month,e=f.year;for(var l=[],u=1;u<=d;u++){var b=new Date(e,n,u),p={date:b,selected:zt(r,b),selectable:Qt(a,o,b),today:wc(b),prevMonth:!1,nextMonth:!1};l.push(p)}var w=new Date(e,n,1),h=new Date(e,n,d),m=jc({firstDayOfMonth:w,minDate:a,maxDate:o,selectedDates:r,firstDayOfWeek:i,showOutsideDays:c}),x=Mc({lastDayOfMonth:h,minDate:a,maxDate:o,selectedDates:r,firstDayOfWeek:i,showOutsideDays:c});l.unshift.apply(l,m),l.push.apply(l,x);var D=Ec(l);return{firstDayOfMonth:w,lastDayOfMonth:h,month:n,year:e,weeks:D}}function jc(t){var n=t.firstDayOfMonth,e=t.minDate,r=t.maxDate,a=t.selectedDates,o=t.firstDayOfWeek,i=t.showOutsideDays,c=[],f=(n.getDay()+7-o)%7;if(i)for(var d=yt(n,-1),l=d.getDate(),u=d.getMonth(),b=d.getFullYear(),p=0;p<f;){var w=new Date(b,u,l-p),h={date:w,selected:zt(a,w),selectable:Qt(e,r,w),today:!1,prevMonth:!0,nextMonth:!1};c.unshift(h),p++}else for(;f>0;)c.unshift(""),f--;return c}function Mc(t){var n=t.lastDayOfMonth,e=t.minDate,r=t.maxDate,a=t.selectedDates,o=t.firstDayOfWeek,i=t.showOutsideDays,c=[],f=(n.getDay()+7-o)%7;if(i)for(var d=yt(n,1),l=d.getMonth(),u=d.getFullYear(),b=0;b<6-f;){var p=new Date(u,l,1+b),w={date:p,selected:zt(a,p),selectable:Qt(e,r,p),today:!1,prevMonth:!1,nextMonth:!0};c.push(w),b++}else for(;f<6;)c.push(""),f++;return c}function kc(t,n){var e=new Date(n,t,1);t=e.getMonth(),n=e.getFullYear();var r=32-new Date(n,t,32).getDate();return{daysInMonth:r,month:t,year:n}}function Ec(t){for(var n=Math.ceil(t.length/7),e=[],r=0;r<n;r++){e[r]=[];for(var a=0;a<7;a++)e[r].push(t[r*7+a])}return e}function zt(t,n){return t=Array.isArray(t)?t:[t],t.some(function(e){return e instanceof Date&&Ce(e).getTime()===Ce(n).getTime()})}function Qt(t,n,e){return!(t&&Be(e,t)||n&&Be(n,e))}function hr(t){return t!==void 0}function Nc(t,n){return hr(t)?t:n}function Ic(t,n){var e=n===void 0?{}:n,r=e.onClick,a=e.dateObj,o=a===void 0?Vt("getDateProps","dateObj"):a,i=Yt(e,["onClick","dateObj"]);return Ue({onClick:qt(r,function(c){t(o,c)}),disabled:!o.selectable,"aria-label":o.date.toDateString(),"aria-pressed":o.selected,role:"button"},i)}function Ac(t,n){var e=t.minDate,r=t.offsetMonth,a=t.handleOffsetChanged,o=n===void 0?{}:n,i=o.onClick,c=o.offset,f=c===void 0?1:c,d=o.calendars,l=d===void 0?Vt("getBackProps","calendars"):d,u=Yt(o,["onClick","offset","calendars"]);return Ue({onClick:qt(i,function(){a(r-vc({calendars:l,offset:f,minDate:e}))}),disabled:Pc({calendars:l,offset:f,minDate:e}),"aria-label":"Go back "+f+" month"+(f===1?"":"s")},u)}function Sc(t,n){var e=t.maxDate,r=t.offsetMonth,a=t.handleOffsetChanged,o=n===void 0?{}:n,i=o.onClick,c=o.offset,f=c===void 0?1:c,d=o.calendars,l=d===void 0?Vt("getForwardProps","calendars"):d,u=Yt(o,["onClick","offset","calendars"]);return Ue({onClick:qt(i,function(){a(r+Dc({calendars:l,offset:f,maxDate:e}))}),disabled:Oc({calendars:l,offset:f,maxDate:e}),"aria-label":"Go forward "+f+" month"+(f===1?"":"s")},u)}function Rc(t){var n=t.date,e=n===void 0?new Date:n,r=t.maxDate,a=t.minDate,o=t.monthsToDisplay,i=o===void 0?1:o,c=t.firstDayOfWeek,f=c===void 0?0:c,d=t.showOutsideDays,l=d===void 0?!1:d,u=t.offset,b=t.onDateSelected,p=t.onOffsetChanged,w=p===void 0?function(){}:p,h=t.selected,m=y.useState(0),x=m[0],D=m[1],_=Nc(u,x);function C(S){hr(u)||D(S),w(S)}var A=Cc({date:e,selected:h,monthsToDisplay:i,minDate:a,maxDate:r,offset:_,firstDayOfWeek:f,showOutsideDays:l});return{calendars:A,getDateProps:Ic.bind(null,b),getBackProps:Ac.bind(null,{minDate:a,offsetMonth:_,handleOffsetChanged:C}),getForwardProps:Sc.bind(null,{maxDate:r,offsetMonth:_,handleOffsetChanged:C})}}Z.func,Z.func,Z.instanceOf(Date),Z.instanceOf(Date),Z.instanceOf(Date),Z.number,Z.number,Z.bool,Z.number,Z.func.isRequired,Z.func,Z.oneOfType([Z.arrayOf(Date),Z.instanceOf(Date)]);class Fc{constructor(n){this.config=n}getEvents(){return{onKeyDown:n=>{switch(n.key){case"ArrowDown":this.config.down&&this.config.down();break;case"ArrowLeft":this.config.left&&this.config.left();break;case"ArrowRight":this.config.right&&this.config.right();break;case"ArrowUp":this.config.up&&this.config.up();break}}}}}const ht={variant:"ghost",size:"sm"},Hc=t=>{const{calendars:n,getBackProps:e}=t,r=t.propsConfigs?.dateNavBtnProps;return s.jsxs(y.Fragment,{children:[s.jsx(Te,{...e({calendars:n,offset:12}),...ht,...r,children:"<<"}),s.jsx(Te,{...e({calendars:n}),...ht,...r,children:"<"})]})},Wc=t=>{const{calendars:n,getForwardProps:e}=t,r=t.propsConfigs?.dateNavBtnProps;return s.jsxs(y.Fragment,{children:[s.jsx(Te,{...e({calendars:n}),...ht,...r,children:">"}),s.jsx(Te,{...e({calendars:n,offset:12}),...ht,...r,children:">>"})]})},Qe=.125,Lc=({dateObj:t,propsConfigs:n,isInRange:e,disabledDates:r,renderProps:a,onMouseEnter:o})=>{const{date:i,selected:c,selectable:f,today:d}=t,{getDateProps:l}=a,{defaultBtnProps:u,isInRangeBtnProps:b,selectedBtnProps:p,todayBtnProps:w}=n?.dayOfMonthBtnProps||{},h=!f||!!(r!=null&&r.has(i.getTime())),m=y.useMemo(()=>({defaultBtnProps:{size:"sm",variant:"ghost",...u,_after:{content:"''",position:"absolute",top:`-${Qe}rem`,left:`-${Qe}rem`,bottom:`-${Qe}rem`,right:`-${Qe}rem`,borderWidth:`${Qe}rem`,borderColor:"transparent",...u?._after},_hover:{bg:"purple.400",...u?._hover,_disabled:{bg:"gray.100",...u?._hover?._disabled}}},isInRangeBtnProps:{background:"purple.200",...b},selectedBtnProps:{background:"purple.200",...p},todayBtnProps:{borderColor:"blue.400",...w}}),[u,b,p,w]);return s.jsx(Te,{...l({dateObj:t,disabled:h,onMouseEnter:o}),isDisabled:h,...m.defaultBtnProps,...e===!0&&!h&&m.isInRangeBtnProps,...c&&!h&&m.selectedBtnProps,...d&&m.todayBtnProps,children:i.getDate()})},Bc=({dayzedHookProps:t,configs:n,propsConfigs:e,disabledDates:r,onMouseEnterHighlight:a,isInRange:o})=>{const i=Rc(t),{calendars:c,getBackProps:f,getForwardProps:d}=i,l=y.useMemo(()=>{const p=n.firstDayOfWeek,w=n.dayNames;return p&&p>0?n.dayNames.slice(p,w.length).concat(w.slice(0,p)):w},[n.firstDayOfWeek,n.dayNames]),u=y.useCallback(p=>{const w=document.activeElement;let h=document.querySelectorAll("button");h.forEach((m,x)=>{const D=x+p;m===w&&(D<=h.length-1&&D>=0?h[D].focus():h[0].focus())})},[]),b=new Fc({left:()=>{u(-1)},right:()=>{u(1)},up:()=>{u(-7)},down:()=>{u(7)}});return c.length<=0?null:s.jsx(Ra,{className:"datepicker-calendar",direction:["column","column","row"],...e?.calendarPanelProps?.wrapperProps,...b.getEvents(),children:c.map((p,w)=>s.jsxs(Fa,{height:"100%",borderWidth:"1px",padding:"0.5rem 0.75rem",...e?.calendarPanelProps?.contentProps,children:[s.jsxs(jn,{...e?.calendarPanelProps?.headerProps,children:[s.jsx(Hc,{calendars:c,getBackProps:f,propsConfigs:e}),s.jsxs(de,{size:"sm",minWidth:"5rem",textAlign:"center",...e?.dateHeadingProps,children:[n.monthNames[p.month]," ",p.year]}),s.jsx(Wc,{calendars:c,getForwardProps:d,propsConfigs:e})]}),s.jsx(jt,{...e?.calendarPanelProps?.dividerProps}),s.jsxs(Yn,{columns:7,spacing:1,textAlign:"center",...e?.calendarPanelProps?.bodyProps,children:[l.map((h,m)=>s.jsx(ye,{fontSize:"sm",fontWeight:"semibold",...e?.weekdayLabelProps,children:h},m)),p.weeks.map((h,m)=>h.map((x,D)=>{const _=`${p.month}-${p.year}-${m}-${D}`;if(x=="")return s.jsx(ye,{},_);const{date:C}=x;return s.jsx(Lc,{dateObj:x,propsConfigs:e,renderProps:i,isInRange:o&&o(C),disabledDates:r,onMouseEnter:()=>{a&&a(C)}},_)}))]})]},w))})},$c=()=>s.jsx("svg",{viewBox:"0 0 14 14",width:"14px",height:"14px",focusable:"false",children:s.jsx("path",{fill:"currentColor",d:"M10.8889,5.5 L3.11111,5.5 L3.11111,7.05556 L10.8889,7.05556 L10.8889,5.5 Z M12.4444,1.05556 L11.6667,1.05556 L11.6667,0 L10.1111,0 L10.1111,1.05556 L3.88889,1.05556 L3.88889,0 L2.33333,0 L2.33333,1.05556 L1.55556,1.05556 C0.692222,1.05556 0.00777777,1.75556 0.00777777,2.61111 L0,12.5 C0,13.3556 0.692222,14 1.55556,14 L12.4444,14 C13.3,14 14,13.3556 14,12.5 L14,2.61111 C14,1.75556 13.3,1.05556 12.4444,1.05556 Z M12.4444,12.5 L1.55556,12.5 L1.55556,3.94444 L12.4444,3.94444 L12.4444,12.5 Z M8.55556,8.61111 L3.11111,8.61111 L3.11111,10.1667 L8.55556,10.1667 L8.55556,8.61111 Z"})}),Yc={dateFormat:"yyyy-MM-dd",monthNames:gc,dayNames:yc,firstDayOfWeek:0,monthsToDisplay:1},qc={defaultIsOpen:!1,closeOnSelect:!0,triggerVariant:"default"},Vc=t=>{const n={...qc,...t},{date:e,name:r,disabled:a,onDateChange:o,isReadOnly:i,id:c,minDate:f,maxDate:d,configs:l,usePortal:u,portalRef:b,disabledDates:p,defaultIsOpen:w,triggerVariant:h,propsConfigs:m,closeOnSelect:x,children:D}=n,[_,C]=y.useState(e),[A,S]=y.useState(0),$=y.useRef(),{onOpen:P,onClose:L,isOpen:V}=Dn({defaultIsOpen:w}),M=n.triggerVariant==="input"&&n.triggerIcon!==void 0?n.triggerIcon:s.jsx($c,{}),X={...Yc,...l},[ve,ue]=y.useState(e?Oe(e,X.dateFormat):""),fe=()=>{L(),C(e),S(0)},ne=({selectable:K,date:G})=>{if(K&&G instanceof Date&&!isNaN(G.getTime())){o(G),x&&L();return}},re=K=>{ue(K.target.value),$.current&&clearTimeout($.current),$.current=setTimeout(()=>{const G=dr(K.target.value,X.dateFormat,new Date);if(!(G instanceof Date&&!isNaN(G.getTime()))){o("");return}p?.has(kt(G).getTime())!==!0&&o(G)},500)},ae=u===!0?Wr:yn.Fragment;return y.useEffect(()=>{e&&ue(Oe(e,X.dateFormat))},[e,X.dateFormat]),s.jsxs(Vn,{id:c,placement:"bottom-start",variant:"responsive",isOpen:V,onOpen:P,onClose:fe,isLazy:!0,children:[!D&&h==="default"?s.jsx(Mt,{children:s.jsx(Te,{type:"button",variant:"outline",lineHeight:1,paddingX:"1rem",disabled:a,fontSize:"sm",...m?.triggerBtnProps,children:e?Oe(e,X.dateFormat):""})}):null,!D&&h==="input"?s.jsxs(s.Fragment,{children:[s.jsx(zn,{children:s.jsx(za,{id:c,autoComplete:"off",disabled:a,isDisabled:a,name:r,value:ve,onChange:re,width:"full",...m?.inputProps})}),s.jsx(Mt,{children:s.jsx(Te,{position:"absolute",variant:"ghost",right:"0",size:"sm",marginRight:"5px",zIndex:1,type:"button",isDisabled:a===!0||i,padding:"8px",...m?.triggerIconBtnProps,children:M})})]}):null,D?D(e):null,s.jsx(ae,{...u===!0?{containerRef:b}:{},children:s.jsx(Un,{width:"100%",...m?.popoverCompProps?.popoverContentProps,children:s.jsx(Qn,{...m?.popoverCompProps?.popoverBodyProps,children:s.jsx(Lr,{children:s.jsx(Bc,{dayzedHookProps:{showOutsideDays:!0,monthsToDisplay:X.monthsToDisplay,onDateSelected:ne,selected:e,date:_,minDate:f,maxDate:d,offset:A,onOffsetChanged:S,firstDayOfWeek:X.firstDayOfWeek},configs:X,propsConfigs:m,disabledDates:p})})})})})]})},un=t=>{const{fieldProps:n,formControlProps:e,formControlInnerProps:r,control:a}=t,o=pe("gray.50","gray.800"),{field:{ref:i,onChange:c,value:f},fieldState:{invalid:d},formState:{errors:l}}=ta({name:n.name,control:a}),{label:u,helperText:b}=r||{};return s.jsxs(Qa,{...e,isInvalid:d,children:[u!=null&&s.jsx(Ua,{htmlFor:`popover-trigger-${n.id}`,children:u}),s.jsx(Tt,{gap:"1rem",alignItems:"center",children:s.jsx(Vc,{...n,closeOnSelect:!0,onDateChange:c,date:f,triggerVariant:"input",propsConfigs:{triggerBtnProps:{sx:{fontWeight:"normal"}},popoverCompProps:{popoverContentProps:{backgroundColor:o,rootProps:{sx:{zIndex:9999}}}},dayOfMonthBtnProps:{defaultBtnProps:{_hover:{backgroundColor:"green.200"}},selectedBtnProps:{backgroundColor:"green.400",color:"white"}}},configs:{dateFormat:ua,dayNames:fa,monthNames:ha}})}),b!=null&&s.jsx(Ga,{children:b})]})};function fn(t){const n=new Date(t);return n.setHours(0,0,0,0),n}const zc=({prices:t,exentoIVA:n,exentoII:e})=>{St().authState.isCustomer();const{control:a}=$e(),o=He({control:a,name:"quantities"}),i=He({control:a,name:"bonificacion"}),c=Tn(o,t,i),d=!n&&!e?"":`${On(n,e).toLocaleUpperCase()}`,l=`TOTAL ${i>0?`-${i}%`:""}`;return s.jsxs(s.Fragment,{children:[s.jsx(de,{size:"xs",children:s.jsxs(s.Fragment,{children:[s.jsx("div",{children:l}),s.jsx("div",{children:d})]})}),s.jsx(de,{size:"md",textTransform:"uppercase",sx:{mt:1,color:"green.400",fontWeight:"bolder"},children:s.jsx(ge,{precio:c??0,moneda:"$"})})]})},Qc=t=>{const{isDraft:n,cabecera:e,disableForm:r,prices:a}=t,o=St(),i=o.authState.isSeller(),c=o.authState.isCustomer(),f=!c,{isOpen:d,onToggle:l}=Dn({defaultIsOpen:!0}),{control:u,reset:b,watch:p,formState:{isSubmitted:w,isSubmitting:h}}=$e(),m=p("fecha_alta");y.useEffect(()=>{const v=()=>{d&&l()};return Fe.on("togglePedidoCategory",v),()=>{Fe.removeListener("togglePedidoCategory",v)}},[]);const x={label:"name",value:"id",selected:"selected"},D=ke({data:e.transportes,fieldsMap:x}),_=ke({data:e.condiciones,fieldsMap:x}),C=ke({data:e.asientos,fieldsMap:x}),A=ke({data:e.talonarios,fieldsMap:x}),S=ke({data:e.depositos,fieldsMap:x}),$=ke({data:e.direcciones,fieldsMap:{label:["name","calle_numero"],value:"id",selected:"habitual"}}),P=e.fecha_alta_visible,L=e.fecha_entrega_visible,V=!c&&e.condicion_visible,M=e.transporte_visible,X=e.deposito_visible,ve=e.direccion_visible,ue=i||e.bonificacion_editable||e.bonificacion>0,fe=!c&&e.asiento_editable&&C.length>0,ne=e.talonario_visible,re=e.usuario_exento_iva,ae=e.usuario_exento_ii,K=!n&&e.numero_pedido!=null,G=[];for(let v=1;v<=5;v++)G.push(s.jsx(N,{colSpan:{md:2},children:s.jsx(Dt,{fieldProps:{name:`leyenda${v}`,id:`leyenda${v}`,type:"string",maxLength:Re,inputMode:"text",htmlSize:5,textAlign:"left"},formControlProps:{isDisabled:r},formControlInnerProps:{label:v==1?"Leyendas":void 0},control:u})},v));const k=e.es_favorito,E={borderStyle:n?"dashed":void 0,borderWidth:n?"3px":"0px",borderColor:n?k?"orange.500":"blue.500":void 0,borderRadius:n?"8px":void 0,p:0};return s.jsx(s.Fragment,{children:s.jsxs(ye,{children:[n&&s.jsx(_t,{cardProps:{variant:"filled"},cardBodyProps:E,children:s.jsxs(Ge,{templateColumns:"1fr",alignItems:"center",gap:4,sx:{p:4},children:[s.jsx(N,{children:s.jsx(de,{size:"sm",textTransform:"uppercase",children:"Descripción del borrador"})}),s.jsx(N,{children:s.jsx(Dt,{fieldProps:{name:"descripcion",id:"descripcion",maxLength:It},formControlProps:{isDisabled:r},control:u})})]})}),s.jsxs(_t,{cardProps:{variant:"filled"},cardBodyProps:E,children:[s.jsxs(Ge,{templateColumns:{base:"1fr",md:K?"repeat(3,1fr)":"repeat(2,1fr)"},alignItems:"center",gap:4,onClick:l,cursor:"pointer",sx:{p:4},children:[s.jsxs(N,{children:[s.jsxs(de,{size:"xs",children:["Cliente ",e.codigo_cliente]}),s.jsx(de,{size:"md",textTransform:"uppercase",sx:{mt:1},children:e.nombre_cliente})]}),K&&s.jsxs(N,{textAlign:{md:"center"},children:[s.jsx(de,{size:"xs",children:"Número de pedido"}),s.jsx(de,{size:"md",textTransform:"uppercase",sx:{mt:1},children:e.numero_pedido})]}),s.jsx(N,{textAlign:{md:"end"},children:s.jsx(zc,{prices:a,exentoIVA:re,exentoII:ae})})]}),s.jsx(Wt,{in:d,style:{overflow:"inherit"},children:s.jsxs(Ge,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"center",gap:4,sx:{p:4,pt:0},children:[!n&&P&&s.jsx(N,{children:s.jsx(un,{fieldProps:{name:"fecha_alta",id:"fecha_alta",minDate:fn(new Date),isReadOnly:!e.fecha_alta_editable},formControlProps:{isDisabled:r,isReadOnly:!e.fecha_alta_editable},formControlInnerProps:{label:"Alta"},control:u})}),!n&&L&&s.jsx(N,{children:s.jsx(un,{fieldProps:{name:"fecha_entrega",id:"fecha_entrega",minDate:fn(m),isReadOnly:!e.fecha_entrega_editable},formControlProps:{isDisabled:r,isReadOnly:!e.fecha_entrega_editable},formControlInnerProps:{label:"Entrega"},control:u})}),V&&s.jsx(N,{children:s.jsx(Ee,{fieldProps:{name:"id_condicion",id:"id_condicion",placeholder:"Seleccione una condición",options:_,noOptionsMessage(v){return"No hay condiciones disponibles"},selectedOptionStyle:"check",isSearchable:e.condicion_editable},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Condición de venta"},control:u})}),fe&&s.jsx(N,{children:s.jsx(Ee,{fieldProps:{name:"id_asiento",id:"id_asiento",placeholder:"Seleccione un tipo de asiento",options:C,noOptionsMessage(v){return"No hay tipos disponibles"},selectedOptionStyle:"check",isSearchable:e.asiento_editable},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Tipo de asiento"},control:u})}),M&&s.jsx(N,{children:s.jsx(Ee,{fieldProps:{name:"id_transporte",id:"id_transporte",placeholder:"Seleccione un transporte",options:D,noOptionsMessage(v){return"No hay transportes disponibles"},selectedOptionStyle:"check",isSearchable:e.transporte_editable},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Transporte"},control:u})}),ne&&s.jsx(N,{children:s.jsx(Ee,{fieldProps:{name:"id_talonario",id:"id_talonario",placeholder:"Seleccione un talonario",options:A,noOptionsMessage(v){return"No hay talonarios disponibles"},selectedOptionStyle:"check",isSearchable:e.talonario_editable},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Talonario"},control:u})}),X&&s.jsx(N,{children:s.jsx(Ee,{fieldProps:{name:"id_deposito",id:"id_deposito",placeholder:"Seleccione un depósito",options:S,noOptionsMessage(v){return"No hay depósitos disponibles"},selectedOptionStyle:"check",isSearchable:e.deposito_editable},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Depósito"},control:u})}),ve&&s.jsx(N,{children:s.jsx(Ee,{fieldProps:{name:"id_direccion",id:"id_direccion",placeholder:"Seleccione una dirección",options:$,noOptionsMessage(v){return"No hay direcciones disponibles"},selectedOptionStyle:"check",isSearchable:e.direccion_editable},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Dirección"},control:u})}),ue&&s.jsx(N,{children:s.jsx(Dt,{fieldProps:{name:"bonificacion",id:"bonificacion",type:"number",inputMode:"decimal",min:0,max:100,htmlSize:5,maxLength:5,width:"100px",textAlign:"left",onKeyDown:v=>{/^(,|-|\+)$/.test(v.key)&&v.preventDefault()},onFocus:v=>{v.target.select()},onChange:v=>{if(v.target.value==="")return;const z=parseFloat(v.target.value);z||(v.target.value="0"),z<0&&(v.target.value="0"),z>100&&(v.target.value="100")},isReadOnly:!e.bonificacion_editable},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Bonificación (%)"},control:u})}),G,s.jsx(N,{colSpan:{md:2},children:f&&s.jsx(Xa,{fieldProps:{name:"mensaje_interno",id:"mensaje_interno",maxLength:ur,rows:3,minHeight:"40px",maxHeight:"100px"},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Mensaje interno"},control:u})})]})})]})]})})},Gc=t=>{const{product:n,bonificacionGlobal:e,showPriceColumn:r}=t,{id:a,codigo:o,nombre:i,descripcion_adicional:c,precio:f,bonificacion_lista_de_precios:d}=n,l=pe("var(--chakra-colors-yellow-200)","var(--chakra-colors-green-900)"),u=pe("var(--chakra-colors-blackAlpha-600)","var(--chakra-colors-whiteAlpha-300)"),b=pe("var(--chakra-colors-white)","var(--chakra-colors-gray-800)"),{control:p,register:w,formState:{isSubmitSuccessful:h,isSubmitting:m}}=$e(),x=Rt(f??0,d??e),_=(He({control:p,name:`quantities.${a}`})??0)*(x??0),C=P=>{P.preventDefault()},A={type:"number",min:0,inputMode:"tel",size:5,onKeyDown:P=>{(P.key==="ArrowDown"||P.key==="ArrowUp")&&P.preventDefault()},onKeyPress:P=>{P.key>="0"&&P.key<="9"||P.key=="Tab"||P.key=="Enter"||P.preventDefault()},onChange:P=>parseInt(P.target.value),onFocus:P=>{P.target.addEventListener("mousewheel",C),P.target.select()},onBlur:P=>{P.target.addEventListener("mousewheel",C)},onClick:P=>{P.currentTarget.select()},className:"quantity",style:{borderColor:u,backgroundColor:b},disabled:h||m,autoComplete:"off"},S=r?"text-right":"text-right hidden-on-base",$=r?"hidden-on-base":"text-center";return s.jsxs("tr",{style:{height:"46px",..._&&{backgroundColor:l}},children:[s.jsxs("td",{className:"word-break-all",children:[o," - ",Da(i,c)]}),s.jsx("td",{className:"text-right hidden-on-base",children:f!=null&&(d==null?s.jsx(ge,{precio:f,moneda:"$"}):s.jsx(Pa,{}))}),s.jsx("td",{className:S,children:f!=null&&s.jsx(ge,{precio:x,moneda:"$"})}),s.jsx("td",{className:$,children:s.jsx("input",{...A,...w(`quantities.${a}`)})}),s.jsx("td",{className:"text-right white-space-nowrap",children:_!=null&&s.jsx(ge,{precio:_,moneda:"$"})})]})},Uc=t=>{const{codigo:n,nombre:e}=t.product;return s.jsxs("tr",{style:{height:"46px"},children:[s.jsxs("td",{className:"word-break-all crossed-text",style:{color:"grey"},children:[n," - ",e]}),s.jsx("td",{className:"hidden-on-base"}),s.jsx("td",{className:"hidden-on-base"}),s.jsx("td",{}),s.jsx("td",{className:"text-right white-space-nowrap",style:{color:"grey"},children:s.jsx(ge,{})})]})},Xc=y.memo(function({articulos:n,showPriceColumn:e}){const{control:r}=$e(),a=He({control:r,name:"bonificacion"}),o=pe("var(--chakra-colors-gray-200)","var(--chakra-colors-black)"),i=pe("var(--chakra-colors-gray-400)","var(--chakra-colors-black)"),c=e?"text-right":"text-right hidden-on-base",f=e?"hidden-on-base":"text-center";return s.jsx(Fn,{sx:{p:4,pt:0},children:s.jsx(Cn,{sx:{p:0,m:0},children:s.jsx(Mn,{variant:"stripedOverCard",colorScheme:"gray",size:"md",sx:{borderCollapse:"separate"},children:s.jsx(kn,{children:s.jsx(En,{children:s.jsx(Nn,{sx:{p:0},children:s.jsxs("table",{width:"100%",cellPadding:8,cellSpacing:4,style:{fontSize:"0.8rem",border:`1px solid ${i}`},children:[s.jsx("thead",{style:{backgroundColor:`${o}`,textTransform:"uppercase"},children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left",style:{width:"55%"},children:"Artículo"}),s.jsx("th",{className:"text-right hidden-on-base",style:{width:"10%"},children:"Precio"}),s.jsx("th",{className:c,style:{width:"10%"},children:"Bonificado"}),s.jsx("th",{className:f,style:{width:"12%"},children:"Cantidad"}),s.jsx("th",{className:"text-right",style:{width:"13%"},children:"Subtotal"})]})}),s.jsx("tbody",{children:n.map((d,l)=>d.precio==null||d.precio==0?s.jsx(Uc,{product:d},d.id):s.jsx(Gc,{product:d,bonificacionGlobal:a,showPriceColumn:e},d.id))})]})})})})})})})});function Kc(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var mt=Kc(y),Zc=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Jc=function(t,n){var e={};for(var r in t)n.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},hn=function(n){var e=n.color,r=e===void 0?"currentColor":e,a=n.size,o=a===void 0?24:a;n.children;var i=Jc(n,["color","size","children"]),c="mdi-icon "+(i.className||"");return mt.createElement("svg",Zc({},i,{className:c,width:o,height:o,fill:r,viewBox:"0 0 24 24"}),mt.createElement("path",{d:"M7,2H17A2,2 0 0,1 19,4V20A2,2 0 0,1 17,22H7A2,2 0 0,1 5,20V4A2,2 0 0,1 7,2M7,4V8H17V4H7M7,10V12H9V10H7M11,10V12H13V10H11M15,10V12H17V10H15M7,14V16H9V14H7M11,14V16H13V14H11M15,14V16H17V14H15M7,18V20H9V18H7M11,18V20H13V18H11M15,18V20H17V18H15Z"}))},el=mt.memo?mt.memo(hn):hn,tl=el;const nl=_e(tl);function rl(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var pt=rl(y),al=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},ol=function(t,n){var e={};for(var r in t)n.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},mn=function(n){var e=n.color,r=e===void 0?"currentColor":e,a=n.size,o=a===void 0?24:a;n.children;var i=ol(n,["color","size","children"]),c="mdi-icon "+(i.className||"");return pt.createElement("svg",al({},i,{className:c,width:o,height:o,fill:r,viewBox:"0 0 24 24"}),pt.createElement("path",{d:"M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z"}))},sl=pt.memo?pt.memo(mn):mn,il=sl;const cl=_e(il),At="priceDisplayEvent",ll=()=>{const[t,n]=y.useState(!1),e=()=>{n(!t),Fe.emit(At,{show:!t})};return s.jsx(ye,{sx:{display:{base:"block",md:"none"},position:"fixed",right:4,bottom:3},children:s.jsx(Za,{isRound:!0,size:"lg",variant:"solid",boxShadow:"dark-lg",colorScheme:"blue","aria-label":"Mostrar Precio / Cantidad",onClick:e,icon:t?s.jsx(nl,{}):s.jsx(cl,{})})})},dl=t=>{const{control:n}=$e(),{categoryName:e,articulos:r}=t,a=He({control:n,name:"bonificacion"});let o;return r?.forEach(({id:i,precio:c,bonificacion_lista_de_precios:f})=>{const d=He({control:n,name:`quantities.${i}`});if(d>0){const l=Rt(c??0,f??a);o=(o??0)+(d??0)*(l??0)}}),s.jsxs(An,{sx:{p:4,_hover:{bg:"none"}},children:[s.jsx(Sn,{sx:{me:2}}),s.jsx(ye,{as:"span",flex:"1",textAlign:"left",children:s.jsx(de,{size:["sm","md"],sx:{textTransform:"uppercase"},children:e})}),o!=null&&s.jsx(ye,{children:s.jsx(to,{variant:"outline",colorScheme:"orange",fontSize:"md",sx:{py:1,px:2},children:s.jsx(ge,{precio:o,moneda:"$"})})})]})},ul=t=>{const{isDraft:n,isFavorite:e,unfilteredProducts:r,filteredProducts:a,isFiltering:o}=t,[i,c]=y.useState(null),[f,d]=y.useState(!1),l=y.useRef([]),u=le.keys(a).length,b=le.keys(le.pickBy(a,h=>Array.isArray(h)&&h.length>0));if(y.useEffect(()=>{c(o?le.range(u):null)},[o]),y.useEffect(()=>{i!=null&&Fe.emit("togglePedidoCategory")},[i]),y.useEffect(()=>{const h=({show:m})=>{d(m)};return Fe.on(At,h),()=>{Fe.removeListener(At,h)}},[]),y.useEffect(()=>{i!=null&&!Array.isArray(i)&&setTimeout(()=>{l.current[i]&&l.current[i].scrollIntoView({behavior:"smooth",block:"start"})},400)},[i]),!b.length)return s.jsxs(Ja,{status:"info",children:[s.jsx(eo,{}),Br]});var p=0;const w=Na+5;return s.jsx(Hn,{allowToggle:!0,reduceMotion:!0,...u===1?{defaultIndex:[0]}:{},...i!=null&&{index:i},onChange:c,children:le.map(a,(h,m)=>{const x=m===Ka?Oa:m;return h.length?s.jsx(Rn,{sx:{border:"none",scrollMarginTop:`${w}px`},ref:D=>l.current[p++]=D,children:({isExpanded:D})=>s.jsxs(_t,{cardProps:{borderStyle:n?"dashed":void 0,borderWidth:n?"3px":"0px",borderColor:n?e?"orange.500":"blue.500":void 0,borderRadius:n?"8px":void 0},cardBodyProps:{p:0},children:[s.jsx(dl,{categoryName:x,articulos:r[m]}),D&&s.jsx(Xc,{articulos:h,showPriceColumn:f})]})},`accordion-${m}`):s.jsx(yn.Fragment,{},`accordion-${m}`)})})};var Je=(t=>(t[t.creating=0]="creating",t[t.copying=1]="copying",t[t.updating=2]="updating",t))(Je||{});const fl=t=>{const{saveDraft:n,pedidoState:e,draftIdToDelete:r}=t,{renglones_con_precio_desconocido:a}=e,o=Ia();y.useEffect(()=>{if(a!=null?a.length>0:!1){const E=a?.map(z=>`${z.codigo_articulo} - ${z.nombre_articulo}`),v=`${Ca}

${E?.join(`
`)}

${Ta}`;o({message:s.jsx(Aa,{type:"warning",content:v})})}},[a]);const i=t.editMode===2,c=t.editMode===1,[f,d]=y.useState(n),l=St(),u=no(),b=mc(),p=pc(f),w=[],h={};le.forOwn(e.articulos,k=>{k.forEach(E=>{h[E.id]={amount:E.precio??0,discount:E.bonificacion_lista_de_precios},w[E.id]=E.cantidad??0})});const m=na({defaultValues:{fecha_alta:e.cabecera.fecha_alta!=null?new Date(e.cabecera.fecha_alta):void 0,fecha_entrega:e.cabecera.fecha_entrega!=null?new Date(e.cabecera.fecha_entrega):void 0,bonificacion:e.cabecera.bonificacion,id_transporte:Me(e.cabecera.transportes)??void 0,id_condicion:Me(e.cabecera.condiciones)??void 0,id_deposito:Me(e.cabecera.depositos)??void 0,id_talonario:Me(e.cabecera.talonarios)??void 0,id_asiento:Me(e.cabecera.asientos)??void 0,id_direccion:Me(e.cabecera.direcciones,"habitual")??void 0,quantities:w,descripcion:e.cabecera.descripcion,leyenda1:e.cabecera.leyenda1,leyenda2:e.cabecera.leyenda2,leyenda3:e.cabecera.leyenda3,leyenda4:e.cabecera.leyenda4,leyenda5:e.cabecera.leyenda5,mensaje_interno:e.cabecera.mensaje_interno??void 0},resolver:ra(p)}),{setError:x,formState:D,watch:_}=m,{errors:C,isSubmitting:A,isSubmitSuccessful:S,isDirty:$}=D,P=_("bonificacion"),L=_("quantities"),V=S||A,M=k=>{const E=[];return k.forEach((v,z)=>{v!=null&&v>0&&E.push({id:z,quantity:v})}),E},X=async k=>{const E=M(k.quantities.map(B=>nt(B))),{quantities:v,descripcion:z,...U}=k,ee={...U,fecha_alta:Oe(U.fecha_alta,at),fecha_entrega:Oe(U.fecha_entrega,at),id_cliente:e.cabecera.id_cliente,renglones:E,draft_id_to_delete:r};(await oa(ee,l)).map({success:B=>{pn(ma,B.data,u),l.navigate(ot)},error:B=>{u({title:B.errorInfoOrNull()?.error_description??rt,status:"error"}),x("root",{message:B.info.error_description})}})},ve=async k=>{if(e.cabecera.id_pedido==null)throw Error("Invalid pedidoState.cabecera.id_pedido");const E=M(k.quantities.map(B=>nt(B))),{quantities:v,descripcion:z,...U}=k,ee={...U,fecha_alta:Oe(U.fecha_alta,at),fecha_entrega:Oe(U.fecha_entrega,at),id_pedido:e.cabecera.id_pedido,renglones:E};(await sa(ee.id_pedido,ee,l)).map({success:B=>{pn(pa,B.data,u),l.navigate(ot)},error:B=>{u({title:B.errorInfoOrNull()?.error_description??rt,status:"error"}),x("root",{message:B.info.error_description})}})},ue=async k=>{const E=M(k.quantities.map(Y=>nt(Y))),{quantities:v,fecha_alta:z,fecha_entrega:U,...ee}=k,ie={...ee,id_cliente:e.cabecera.id_cliente,es_favorito:!1,renglones:E};(await ia(ie,l)).map({success:Y=>{u({title:ga,description:ya.replace("{{descripcion}}",k.descripcion.toLocaleUpperCase()),status:"success"}),l.navigate(st)},error:Y=>{u({title:Y.errorInfoOrNull()?.error_description??rt,status:"error"}),x("root",{message:Y.info.error_description})}})},fe=async k=>{if(e.cabecera.id_pedido==null)throw Error("Invalid pedidoState.cabecera.id_pedido");const E=M(k.quantities.map(Y=>nt(Y))),{quantities:v,fecha_alta:z,fecha_entrega:U,...ee}=k,ie={...ee,id_pedido:e.cabecera.id_pedido,es_favorito:e.cabecera.es_favorito,renglones:E};(await ca(ie.id_pedido,ie,l)).map({success:Y=>{u({title:ba,description:xa.replace("{{descripcion}}",k.descripcion.toLocaleUpperCase()),status:"success"}),l.navigate(st)},error:Y=>{u({title:Y.errorInfoOrNull()?.error_description??rt,status:"error"}),x("root",{message:Y.info.error_description})}})};y.useEffect(()=>{Object.keys(C).length==1&&C.quantities&&window.scrollTo(0,0)},[D]);const ne=()=>{const k=M(L),E=e.articulos,v=Tn(L,h,P),z=[];le.each(k,U=>{le.each(E,(ee,ie)=>{const B=le.find(ee,{id:U.id});B!==void 0&&z.push({...B,cantidad:U.quantity})})}),b({app:l,cabecera:e.cabecera,renglones:z,bonificacionGlobal:P,total:v,title:f?ja:_a,emptyResultText:f?ka:Ma})},re=e.cabecera.es_favorito,{filteredData:ae,handleSearchInputChange:K,isFiltering:G}=da(e.articulos,["codigo","nombre"]);return s.jsx(s.Fragment,{children:s.jsx(aa,{...m,children:s.jsxs("form",{noValidate:!0,children:[s.jsx(_n,{children:s.jsx(fc,{isDraft:f,isUpdating:i,isCopying:c,isDisabled:V,setIsDraft:d,handleSearchInputChange:K,handlePedidoAction:i?ve:X,handleDraftAction:i?fe:ue,handlePedidoSummary:ne})}),s.jsx(Pn,{children:s.jsxs(ye,{sx:{my:4,pb:{base:5,md:void 0}},children:[s.jsx(Ea,{errors:C}),s.jsx(Qc,{isDraft:f,cabecera:e.cabecera,disableForm:V,prices:h}),s.jsx(ul,{isDraft:f,isFavorite:re,disableForm:V,unfilteredProducts:e.articulos,filteredProducts:ae,isFiltering:G}),s.jsx(ll,{})]})})]})})})};function pn(t,n,e){const{message_to_user:r,numero_pedido:a}=n,o=t.replace("{{numero_pedido}}",a);e({title:o,description:r!=null?s.jsxs(s.Fragment,{children:[s.jsx(jt,{mt:2,mb:1}),s.jsx("b",{children:r}),s.jsx(jt,{mt:1,mb:2})]}):void 0,status:"success"})}const hl=()=>s.jsxs(s.Fragment,{children:[s.jsx(_n,{}),s.jsx(Pn,{children:s.jsx(ye,{width:"full",sx:{mt:8,mb:4},children:s.jsxs(Ge,{templateColumns:"1fr",alignItems:"center",gap:4,children:[s.jsx(N,{children:s.jsx(ao,{})}),s.jsx(N,{children:s.jsx(Ne,{height:"120px"})}),s.jsx(N,{children:s.jsx(Ne,{height:"120px"})}),s.jsx(N,{children:s.jsx(Ne,{height:"120px"})}),s.jsx(N,{children:s.jsx(Ne,{height:"120px"})}),s.jsx(N,{children:s.jsx(Ne,{height:"120px"})}),s.jsx(N,{children:s.jsx(Ne,{height:"120px"})})]})})})]}),mr=t=>{const{state:n,retry:e,isDraft:r,saveDraft:a,draftIdToDelete:o,editMode:i}=t;return n.map({loading:c=>s.jsx(hl,{}),error:({error:c})=>s.jsx(ro,{error:c,retry:e,cancelAndNavigateTo:r?st:ot}),success:c=>s.jsx(fl,{pedidoState:c.data,saveDraft:a,editMode:i,draftIdToDelete:o})})},ml=({isDraft:t})=>{const n=gn();return s.jsx(oo,{error:$r(Yr.INVALID_PARAMETER),buttonProps:{label:t?wa:va,colorScheme:"green",onClick:()=>{n(t?ot:st)}}})},od=({client:t})=>s.jsx(pr,{client:t,createDraft:!1}),sd=({client:t})=>s.jsx(pr,{client:t,createDraft:!0}),id=({id_pedido:t})=>s.jsx(gr,{id_pedido:t,isDraft:!1}),cd=({id_pedido:t})=>s.jsx(gr,{id_pedido:t,isDraft:!0}),ld=({id_pedido:t})=>s.jsx(bt,{id_pedido:t,isDraft:!1,createDraft:!1}),dd=({id_pedido:t,deleteOriginal:n})=>s.jsx(bt,{id_pedido:t,isDraft:!0,createDraft:!1,deleteOriginal:n}),ud=({id_pedido:t})=>s.jsx(bt,{id_pedido:t,isDraft:!0,createDraft:!0}),fd=({id_pedido:t})=>s.jsx(bt,{id_pedido:t,isDraft:!1,createDraft:!0}),pr=t=>{const{client:n,createDraft:e,draftIdToDelete:r}=t,a=n!=null?Number.parseInt(n):null,{state:o,retry:i}=e?Yo(a):Ur(a);return s.jsx(mr,{state:o,retry:i,saveDraft:e,draftIdToDelete:r,editMode:Je.creating,isDraft:e})},gr=({id_pedido:t,isDraft:n})=>{const e=n?qo:Xr;return s.jsx(yr,{editMode:Je.updating,id_pedido:t,isDraft:n,saveDraft:n,useFetch:e})},bt=({id_pedido:t,isDraft:n,createDraft:e,deleteOriginal:r})=>{const a=n?e?Vo:zo:e?Kr:Zr;return s.jsx(yr,{editMode:Je.copying,id_pedido:t,isDraft:n,saveDraft:e,deleteOriginal:r,useFetch:a})},yr=t=>{const{id_pedido:n,useFetch:e,isDraft:r,saveDraft:a,editMode:o,deleteOriginal:i}=t,c=n!=null?Number.parseInt(n):null;if(!(qr(c)&&c>0))return s.jsx(ml,{isDraft:r});const{state:d,retry:l}=e(c),u=i===!0&&o===Je.copying&&r?c:void 0;return s.jsx(mr,{state:d,retry:l,saveDraft:a,isDraft:r,editMode:o,draftIdToDelete:u})};export{dd as C,cd as U,fd as a,ud as b,ld as c,id as d,sd as e,od as f};
