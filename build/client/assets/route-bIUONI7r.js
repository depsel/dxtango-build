import{r as j,j as r}from"./emotion-element-5486c51c.browser.esm-CMT9BBIk.js";import{k as C}from"./app-DHK1Xtws.js";import{N as P}from"./Navbar-Dz6d1sX-.js";import{S as g}from"./SettingsFormHeading-pg9uw8W1.js";import{c as A,a as m,b as R,d as b,o as V}from"./index.esm-CzxlHhdA.js";import{_ as E,Z as I,$ as F,a0 as N,a1 as O}from"./auth_context-1lRrAoj9.js";import{u as y}from"./app_resources-7xCa0BDG.js";import{A as q}from"./refresh_all-BF-tDFF2.js";import{C as l}from"./CommonCard-ZsFI_XX0.js";import{F as D}from"./FormErrors-CLM3bwt7.js";import{d as v,V as G,P as p}from"./vo_dxt_password-CL3l4ykX.js";import{S as B}from"./SettingsFormButtons-v13JEq_c.js";import{y as H}from"./utils-DQu-C9ov.js";import{u as T}from"./chunk-6RSEZNRH-02MJPxwp.js";import{B as W}from"./chunk-PULVB27S-DtbcLAA3.js";import{G as $,a as d}from"./chunk-ZPFGWTBB-lx3V9y0x.js";import{C as L}from"./ColorModeSelector-j0gj2PXA.js";import"./chunk-QURMB2UJ-DnrdiWvU.js";import"./chunk-3KCBMPN5--NnBMJog.js";import"./chunk-KRPLQIP4-X72JD14b.js";import"./program_config.consts-tkpR5RSB.js";import"./order_settings.consts-BS2ZOo_e.js";import"./index-CIB9SwPf.js";import"./chunk-HB6KBUMZ-BCkqSJTL.js";import"./index-BtnUei1e.js";import"./chunk-3ASUQ6PA-0kQqFn_h.js";import"./chunk-6QYXN73V-D4AeCydz.js";import"./chunk-2OOHT3W5-rFMCTWJa.js";import"./chunk-BL2ZZSHG-VTIM7Pff.js";import"./ResponsiveIconButton-BxPaX8A-.js";import"./chunk-VMD3UMGK-C_4Hu6X3.js";import"./chunk-7OLJDQMT-BCYTowu1.js";import"./chunk-YQO7BFFX-C0kTL7iy.js";import"./chunk-MFVQSVQB-nS3zYPqC.js";import"./chunk-46CXQZ4E-xzSkmIKk.js";import"./ControlledInput-D8DKSpFc.js";import"./chunk-56K2BSAJ-BQuanzzh.js";import"./chunk-H46NUPBZ-BIanLneB.js";import"./chunk-6CVSDS6C-DQNwoFo1.js";import"./chunk-2ZHRCML3-siIePHBt.js";import"./chunk-Z6RXEUPO-BIbhqgv7.js";import"./chunk-3Y4YXCR2-CtodgM6Z.js";const U=()=>{const[s,t]=j.useState(null);return{yupValidationSchema:A({old_password:m().required("Ingrese su contaseña actual"),new_password:m().required("Ingrese su nueva contraseña").test("password","Formato de contraseña no válido",o=>{if(o!=""&&o!=null){let a=v(o);return E.isEqual(s,a)||t(a),H(G,o)}return!0}),new_password_repeat:m().required("Repita su nueva contraseña").oneOf([R("new_password")],"Las contraseñas deben coincidir")}).required(),passwordStatus:s}},k=()=>{const s=y(),t=T(),{yupValidationSchema:u,passwordStatus:o}=U(),{handleSubmit:a,control:n,reset:M,setError:c,formState:{errors:w,isSubmitting:f,isSubmitSuccessful:_}}=b({defaultValues:{old_password:"",new_password:"",new_password_repeat:""},resolver:V(u)}),e=_||f,x=async S=>{const{new_password_repeat:X,...h}=S;(await I(h,s)).map({success:i=>{t({title:F,status:"success"}),s.authDispatch(new q(i.data.user)),s.navigate(N)},error:i=>{t({title:i.errorInfoOrNull()?.error_description??O,status:"error"}),c("root",{message:i.info.error_description})}})};return r.jsx("form",{noValidate:!0,onSubmit:a(x),children:r.jsxs(W,{children:[r.jsx(D,{errors:w}),r.jsx(l,{children:r.jsxs($,{templateColumns:"1fr",alignItems:"start",gap:4,children:[r.jsx(d,{children:r.jsx(p,{fieldProps:{name:"old_password",id:"old_password"},formControlInnerProps:{label:"Contraseña Actual"},disableForm:e,control:n})}),r.jsx(d,{children:r.jsx(p,{fieldProps:{name:"new_password",id:"new_password"},formControlInnerProps:{label:"Nueva contraseña"},passwordStatus:o,disableForm:e,control:n})}),r.jsx(d,{children:r.jsx(p,{fieldProps:{name:"new_password_repeat",id:"new_password_repeat"},formControlInnerProps:{label:"Confirmar nueva contraseña"},disableForm:e,control:n})})]})}),r.jsx(l,{children:r.jsx(B,{isLoading:e,hideCancelButton:!0})})]})})};function Br(){return r.jsxs(r.Fragment,{children:[r.jsx(P,{}),r.jsxs(L,{maxW:"2xl",sx:{my:4},children:[r.jsx(g,{title:C}),r.jsx(k,{})]})]})}export{Br as default};
