import{j as r,r as P,R as V}from"./emotion-element-43c6fea0.browser.esm-CqNy1Myq.js";import{aj as w,B as W,I as G,ak as K,V as z,al as X}from"./auth_context-BcmIMa0H.js";import{T as q,i as J,j as M,k as Q,l as p,m as Y,P as Z,n as rr}from"./TextPrice-LTUXzWuW.js";import{t as er}from"./utils-DTXYOP_7.js";import{u as sr}from"./order.api_hooks-mmBq3Dj8.js";import{l as ir}from"./app-B1a_okyL.js";import{S as tr,A as nr}from"./ApiErrors-BofVVWwq.js";import{C as or}from"./CommonErrors-Ca1Fo25T.js";import{B as x}from"./chunk-PULVB27S-DFGZ_FhU.js";import{T as l,a as c,b as d,c as e}from"./chunk-T2WCTPDH-D-1yuUFr.js";import{g as ar,P as dr}from"./index-BReOA4XD.js";import{T as lr,a as h}from"./chunk-MGVPL3OH-DUt6-qa1.js";import{F as cr}from"./chunk-KRPLQIP4-22zt2_dG.js";import{H as hr}from"./chunk-3ASUQ6PA-C9U3rhNA.js";import{S as xr}from"./chunk-VTV6N5LE-CVRITHBR.js";import{F as jr}from"./chunk-H46NUPBZ-DZttvycU.js";import{u as mr}from"./components-DVk_p40a.js";import"./chunk-2OOHT3W5-Ci3F40nI.js";import"./useDXTApiFetch-DCIa93_N.js";import"./CloseIcon-DhOj6wIL.js";import"./app_resources-DBlOodC1.js";import"./chunk-7OLJDQMT-mUIp5tuF.js";import"./vo_user_name-C34O4LAA.js";import"./chunk-7D6N5TE5-BJ4T9Sem.js";import"./chunk-56K2BSAJ-C8tXkxw9.js";import"./index-CAKzuJDV.js";const n=()=>r.jsx(tr,{width:"full",height:"20px"}),pr=()=>r.jsx(r.Fragment,{children:r.jsxs(x,{width:"full",sx:{backgroundColor:"white"},children:[r.jsx(l,{children:r.jsx(c,{children:r.jsxs(d,{children:[r.jsx(e,{width:"23%",children:r.jsx(n,{})}),r.jsx(e,{width:"18%",children:r.jsx(n,{})}),r.jsx(e,{width:"18%",children:r.jsx(n,{})}),r.jsx(e,{width:"18%",children:r.jsx(n,{})}),r.jsx(e,{width:"23%",children:r.jsx(n,{})})]})})}),r.jsx(l,{children:r.jsx(c,{children:r.jsxs(d,{children:[r.jsx(e,{width:"50%",children:r.jsx(n,{})}),r.jsx(e,{width:"50%",children:r.jsx(n,{})})]})})}),r.jsx(l,{children:r.jsx(c,{children:[...Array(10)].map((t,s)=>r.jsxs(d,{children:[r.jsx(e,{children:r.jsx(n,{})}),r.jsx(e,{children:r.jsx(n,{})}),r.jsx(e,{children:r.jsx(n,{})}),r.jsx(e,{children:r.jsx(n,{})})]},`loading-${s}`))})})]})}),gr=({handlePageBreaks:t,pageBreaks:s})=>{const i=()=>{window.print()};return P.useEffect(()=>{const o=()=>{window.scrollTo(0,0)};return window.addEventListener("beforeprint",o),()=>{window.removeEventListener("beforeprint",o)}},[]),r.jsx(cr,{bgColor:"white",className:"hidden-print",justifyContent:"start",sx:{p:4,position:"sticky",top:0,w:"100%",h:20},children:r.jsxs(hr,{children:[r.jsx(W,{onClick:i,boxShadow:"md",size:"sm",pl:6,pr:6,colorScheme:"blue",leftIcon:r.jsx(G,{as:dr}),children:K}),r.jsxs(x,{display:"flex",alignItems:"center",p:1,height:8,borderColor:"blue.500",borderWidth:1,borderRadius:"md",boxShadow:0,children:[r.jsx(xr,{id:"page_break",onChange:t,isChecked:s}),r.jsx(jr,{display:"block",htmlFor:"page_break",flexShrink:1,ml:2,mb:0,color:"blue.900",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"100%",children:Z})]})]})})},ur=t=>{const{orders:s}=t,[i,o]=P.useState(!1),a=()=>{o(!i)};return r.jsxs(x,{sx:{backgroundColor:"white",minHeight:"100vh"},children:[r.jsx(gr,{handlePageBreaks:a,pageBreaks:i}),s.map((j,g)=>{const{id:u,numero_pedido:_,fecha_alta:A,fecha_entrega:T,descuento:m,estado:k,total:C,codigo_cliente:E,nombre_cliente:B,codigo_transporte:I,nombre_transporte:O,sin_iva:y,sin_ii:S}=j.cabecera,v=g>0?r.jsx("div",{style:{pageBreakBefore:"always"}}):r.jsx(r.Fragment,{});return r.jsxs(V.Fragment,{children:[i&&v,g>0&&r.jsx(x,{className:i?"hidden-print":"",sx:{height:"40px"}}),r.jsxs(q,{sx:{p:2,overflowX:"hidden"},children:[r.jsx(l,{variant:"basicPrintable",children:r.jsx(c,{children:r.jsxs(d,{children:[r.jsxs(e,{width:"23%",children:["Pedido: ",r.jsx("strong",{children:_})]}),r.jsxs(e,{width:"18%",children:["Emisión: ",r.jsx("strong",{children:w(A)})]}),r.jsxs(e,{width:"18%",children:["Entrega: ",r.jsx("strong",{children:w(T)})]}),r.jsx(e,{width:"18%",children:m!=0&&r.jsxs(r.Fragment,{children:["Bonificación: ",r.jsxs("strong",{children:[m,"%"]})]})}),r.jsxs(e,{width:"23%",children:["Estado: ",r.jsx("strong",{style:{textTransform:"uppercase"},children:ar(k)})]})]})})}),r.jsx(l,{variant:"basicPrintable",children:r.jsx(c,{children:r.jsxs(d,{children:[r.jsxs(e,{width:"50%",children:["Cliente: ",r.jsx("strong",{children:J(E,B)})]}),r.jsxs(e,{width:"50%",children:["Transporte: ",r.jsx("strong",{children:M(I,O)})]})]})})}),j.renglones!=null&&r.jsxs(l,{variant:"basicPrintable",children:[r.jsx(lr,{children:r.jsxs(d,{children:[r.jsx(h,{children:"Artículo"}),r.jsx(h,{textAlign:"center",width:"80px",children:"Cantidad"}),r.jsx(h,{textAlign:"right",width:"100px",children:"Precio Unitario"}),r.jsx(h,{textAlign:"right",width:"100px",children:"Importe"})]})}),r.jsxs(c,{children:[j.renglones.map(F=>{const{id_articulo:N,nombre_articulo:R,codigo_articulo:L,descripcion_adicional:$,precio:U,cantidad:f,bulto:D,subtotal:H}=F,b=rr(f,D);return r.jsxs(d,{children:[r.jsx(e,{children:Q(R,L,$)}),r.jsxs(e,{textAlign:"center",children:[f,b!=null&&r.jsxs(r.Fragment,{children:[" [",b,"]"]})]}),r.jsx(e,{textAlign:"right",children:r.jsx(p,{moneda:"$",precio:U})}),r.jsx(e,{textAlign:"right",children:r.jsx(p,{moneda:"$",precio:H})})]},`renglon-${u}_${N}`)}),r.jsxs(d,{children:[r.jsx(e,{colSpan:3,fontWeight:"bold",children:`TOTAL ${m>0?"BONIFICADO ":""} (${Y(y,S).toLocaleUpperCase()})`}),r.jsx(e,{textAlign:"right",fontWeight:"bold",children:r.jsx(p,{moneda:"$",precio:C})})]})]})]})]})]},`pedido-${u}`)})]})},fr=t=>{const{orders:s}=t;if(s!=null&&Array.isArray(s)){const i=[];if(s.forEach(o=>{const a=er(()=>new z(o),null);a!=null&&i.push(a)}),i.length>0)return r.jsx(br,{orders:i})}return r.jsx(or,{error:ir})},br=t=>{const{orders:s}=t,{state:i,retry:o}=sr(s);return i.map({loading:a=>r.jsx(pr,{}),error:({error:a})=>r.jsx(nr,{error:a,retry:o,cancelAndNavigateTo:X}),success:a=>(a.data.sort(wr),r.jsx(ur,{orders:a.data}))})};function wr(t,s){const i=t.cabecera.numero_pedido,o=s.cabecera.numero_pedido;return i.localeCompare(o)}function Xr(){const[t]=mr(),s=t.getAll("orderId");return r.jsx(fr,{orders:s})}export{Xr as default};
