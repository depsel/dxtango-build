import{r as j,j as s}from"./emotion-element-43c6fea0.browser.esm-Cuif_eEn.js";import{a as C,l as P}from"./app-BdYyDs5S.js";import{N as g}from"./Navbar-BPoDUv4m.js";import{S as A}from"./SettingsFormHeading-oznEKY0V.js";import{c as R,a as m,b,d as V,o as E}from"./index.esm-DXKbKlYo.js";import{_ as F,Z as I,$ as y,a0 as N,a1 as O}from"./auth_context-B-Tcig0k.js";import{u as q,a as D}from"./app_resources-CDkSSx5t.js";import{A as v}from"./refresh_all-Bi1PYNQW.js";import{C as l}from"./CommonCard-BQfjnTT7.js";import{F as G}from"./FormErrors-DgI5zxIH.js";import{d as H,V as T,P as p}from"./vo_dxt_password-DAHb5cpG.js";import{S as W}from"./SettingsFormButtons-Cbuywpud.js";import{y as $}from"./utils-DihYaFf6.js";import{G as B,a as d}from"./chunk-ZPFGWTBB-CfuIyNTX.js";import{C as L}from"./ColorModeSelector-CnW8xduA.js";import"./chunk-QURMB2UJ-BoOQBYSq.js";import"./chunk-3KCBMPN5-CdY7cck7.js";import"./chunk-ALC6QPCI-C2jRzl9i.js";import"./chunk-KRPLQIP4-DRGOXS8W.js";import"./chunk-HB6KBUMZ-CJPGLeRv.js";import"./chunk-3ASUQ6PA-ByZtqmzd.js";import"./chunk-ZHMYA64R-Cq5LpG9O.js";import"./chunk-6QYXN73V-B1Nx9szV.js";import"./chunk-2OOHT3W5-y4h3Shmy.js";import"./chunk-BL2ZZSHG-DP_ZXxbw.js";import"./ResponsiveIconButton-Ccujq6NG.js";import"./chunk-VMD3UMGK-BOiy-z46.js";import"./chunk-7OLJDQMT-DB_eYbVs.js";import"./chunk-3Y4YXCR2-CiP0t4s6.js";import"./chunk-YQO7BFFX-CEG2A-0c.js";import"./chunk-MFVQSVQB-gRsUJlZr.js";import"./chunk-46CXQZ4E-bCSOgkek.js";import"./ControlledInput-DsnpheB0.js";import"./chunk-56K2BSAJ-r8NF7IGV.js";import"./chunk-H46NUPBZ-Cf5o4NPi.js";import"./chunk-6CVSDS6C-B4Ua9FB8.js";import"./chunk-2ZHRCML3-BcSRrPbH.js";import"./chunk-Z6RXEUPO-DTekSvPj.js";const U=()=>{const[r,o]=j.useState(null);return{yupValidationSchema:R({old_password:m().required("Ingrese su contaseña actual"),new_password:m().required("Ingrese su nueva contraseña").test("password","Formato de contraseña no válido",t=>{if(t!=""&&t!=null){let a=H(t);return F.isEqual(r,a)||o(a),$(T,t)}return!0}),new_password_repeat:m().required("Repita su nueva contraseña").oneOf([b("new_password")],"Las contraseñas deben coincidir")}).required(),passwordStatus:r}},M=()=>{const r=q(),o=D(),{yupValidationSchema:u,passwordStatus:t}=U(),{handleSubmit:a,control:i,reset:X,setError:c,formState:{errors:w,isSubmitting:f,isSubmitSuccessful:_}}=V({defaultValues:{old_password:"",new_password:"",new_password_repeat:""},resolver:E(u)}),e=_||f,x=async S=>{const{new_password_repeat:Z,...h}=S;(await I(h,r)).map({success:n=>{o({title:y,status:"success"}),r.authDispatch(new v(n.data.user)),r.navigate(N)},error:n=>{o({title:O,status:"error"}),c("root",{message:n.info.error_description})}})};return s.jsx("form",{noValidate:!0,onSubmit:a(x),children:s.jsxs(C,{children:[s.jsx(G,{errors:w}),s.jsx(l,{children:s.jsxs(B,{templateColumns:"1fr",alignItems:"start",gap:4,children:[s.jsx(d,{children:s.jsx(p,{fieldProps:{name:"old_password",id:"old_password"},formControlInnerProps:{label:"Contraseña Actual"},disableForm:e,control:i})}),s.jsx(d,{children:s.jsx(p,{fieldProps:{name:"new_password",id:"new_password"},formControlInnerProps:{label:"Nueva contraseña"},passwordStatus:t,disableForm:e,control:i})}),s.jsx(d,{children:s.jsx(p,{fieldProps:{name:"new_password_repeat",id:"new_password_repeat"},formControlInnerProps:{label:"Confirmar nueva contraseña"},disableForm:e,control:i})})]})}),s.jsx(l,{children:s.jsx(W,{isLoading:e,hideCancelButton:!0})})]})})};function qs(){return s.jsxs(s.Fragment,{children:[s.jsx(g,{}),s.jsxs(L,{maxW:"2xl",sx:{my:4},children:[s.jsx(A,{title:P}),s.jsx(M,{})]})]})}export{qs as default};
