import{r as b,j as t,u as h}from"./emotion-element-43c6fea0.browser.esm-Bukkp3pI.js";import{j as u,a4 as _,U as d,R as A}from"./auth_context-By8qlCOz.js";import{a as I,e as P,f as R}from"./app-ChKZjo6p.js";import{S as T}from"./SettingsFormHeading-DRaop4b3.js";import{a as F,o as v}from"./yup-DmufeRdH.js";import{a as c,F as O,b as N}from"./useDXTApiFetch-DMZ_pwG5.js";import{a as D,b as L}from"./app_resources-0MHmsA5u.js";import{u as G}from"./useTangoList-BH5N6yVu.js";import{C as p}from"./CommonCard-B6Zs7VdS.js";import{C as U}from"./ControlledSelect-C5AbekiF.js";import{F as M}from"./FormErrors-DK3bqFxa.js";import{I as q}from"./InlineError-DcRSvLUF.js";import{S as B}from"./SettingsFormButtons-Dtw3fGC3.js";import{c as V,a as Y}from"./index.esm-DLycO5Xl.js";import{G as k,a as l}from"./chunk-ZPFGWTBB-C6BSXP9K.js";import"./chunk-KRPLQIP4-BIcN844u.js";import"./chunk-BL2ZZSHG-CllUrry9.js";import"./chunk-7OLJDQMT-DeTsz2JD.js";import"./chunk-6QYXN73V-e7cXtMTs.js";import"./chunk-56K2BSAJ-HKDUOZgn.js";import"./chunk-3Y4YXCR2-BRX7qSte.js";import"./chunk-QURMB2UJ-DZ-0JI-4.js";import"./chunk-3KCBMPN5-BSyM0bpq.js";import"./chunk-ZHMYA64R-DxFJ4KrV.js";import"./chunk-YQO7BFFX--iiPSc49.js";import"./chunk-MFVQSVQB-DALUCuvz.js";import"./index.esm-R70fV0CN.js";import"./select-DHDuYCjb.js";import"./chunk-W7WUSNWJ-D1ck6ov6.js";import"./chunk-HB6KBUMZ-D138MJ1y.js";import"./chunk-46CXQZ4E-3v06V3Zr.js";import"./chunk-Z6RXEUPO-BTzJ3cmm.js";const w=u("/dictionary","GET"),H=u("/dictionary/active_company","POST"),$=async(e,s)=>await _({...H,params:e,silent:!0},s),z=V({company:Y().required("Seleccione una empresa activa")}).required(),J=()=>{const e=D(),s=L(),{state:r,result:a}=G({endpoint:w,fieldsMap:{label:"name",value:"db_name",selected:"is_active"}}),{handleSubmit:f,control:S,reset:x,setError:y,formState:{errors:C,isSubmitting:j,isSubmitSuccessful:g}}=F({defaultValues:{company:""},resolver:v(z)}),n=g||j;b.useEffect(()=>{if(r instanceof c){const o=a.findIndex(i=>i.selected===!0);o>=0&&x({company:a[o].value})}},[r]);const E=async o=>{const i={company:o.company};(await $(i,e)).map({success:m=>{s({title:P,status:"success"}),e.navigate(d)},error:m=>{s({title:A,status:"error"}),y("root",{message:m.info.error_description})}})};return t.jsx("form",{noValidate:!0,onSubmit:f(E),children:t.jsxs(I,{children:[t.jsx(M,{errors:C}),t.jsx(p,{children:t.jsxs(k,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[t.jsxs(l,{children:[t.jsx(U,{fieldProps:{name:"company",placeholder:"Seleccione una empresa",options:a,noOptionsMessage(o){return"No hay empresas disponibles"},selectedOptionStyle:"check",isLoading:r instanceof O},formControlProps:{isDisabled:n||!(r instanceof c)},formControlInnerProps:{label:"Empresa activa"},control:S}),r instanceof N&&t.jsx(q,{error:r.errorOrNull().error})]}),t.jsx(l,{})]})}),t.jsx(p,{children:t.jsx(B,{isLoading:n,hideCancelButton:!0})})]})})};function Rt(){const e=h();return t.jsxs(t.Fragment,{children:[t.jsx(T,{title:R,returnButton:{buttonProps:{onClick:()=>{e(d)}}}}),t.jsx(J,{})]})}export{Rt as default};
