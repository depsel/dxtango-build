import{r as j,p as $}from"./emotion-element-43c6fea0.browser.esm-Cuif_eEn.js";import{v as X,w as z,x as F,y as W,z as Y,B as Q,C as Z}from"./TextPrice-BKP0caI3.js";import{z as m,aM as R,aN as c,al as q,aO as n,aP as _,aQ as A,aR as J,aS as K,aT as k,V as p,aU as I,aV as d,aW as f,D as ee,N as re,l as ae,aX as ie,aY as te}from"./auth_context-B-Tcig0k.js";import{V as ne}from"./vo_user_name-DWPGqLsA.js";class se extends m{constructor(r,a){super(r),this.maxLength=a}validate(r){if(typeof r=="string"){const a=r.trim();if(a!==""&&(this.maxLength==null||a.length<=this.maxLength))return a}this.throwError(r)}}class oe extends m{throwInvalidAddressError(r){this.throwError(r,"Invalid email address")}validate(r){if(typeof r=="string"){const a=r.trim().toLowerCase();if(R.isEmail(a,{domain_specific_validation:!0}))return a}this.throwError(r)}}class w extends m{constructor(r){c.isBuffer(r)&&(r=r.toString("hex")),super(r)}validate(r){let a;if(c.isBuffer(r)&&(a=r.toString("hex")),typeof r=="string"&&(a=r.trim().toLowerCase()),typeof a=="string"&&R.isMD5(a))return a;this.throwError(r)}toBuffer(){return c.from(this.value,"hex")}static random(){const r=Array(16);for(let a=0;a<r.length;a++)r[a]=q(0,255);return new w(c.from(r))}}function le(e){try{return J(n,e)}catch{throw new _(`Invalid user role value: ${e}`)}}function de(e){try{return K(n,e)}catch{throw new _(`Invalid user role string: ${A(e,!0)}`)}}function ue(e){switch(e){case n.customer:return 0;case n.seller:return 1;case n.admin:return 2}throw new _(`Invalid user role: ${A(e,!0)}`)}function ce(e){switch(e){case 0:return n.customer;case 1:return n.seller;case 2:return n.admin}throw new _(`Invalid user role number: ${A(e,!0)}`)}class fe extends m{validate(r){try{if(typeof r=="string")return de(r);if(k(n,r))return r}catch{}this.throwError(r)}toString(){return le(this.value)}isAdmin(){return this.value.valueOf()==n.admin}isSeller(){return this.value.valueOf()==n.seller}isCustomer(){return this.value.valueOf()==n.customer}}function he(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var O=he(j),Oe=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},me=function(e,r){var a={};for(var i in e)r.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(a[i]=e[i]);return a},P=function(r){var a=r.color,i=a===void 0?"currentColor":a,s=r.size,o=s===void 0?24:s;r.children;var u=me(r,["color","size","children"]),l="mdi-icon "+(u.className||"");return O.createElement("svg",Oe({},u,{className:l,width:o,height:o,fill:i,viewBox:"0 0 24 24"}),O.createElement("path",{d:"M18,3H6V7H18M19,12A1,1 0 0,1 18,11A1,1 0 0,1 19,10A1,1 0 0,1 20,11A1,1 0 0,1 19,12M16,19H8V14H16M19,8H5A3,3 0 0,0 2,11V17H6V21H18V17H22V11A3,3 0 0,0 19,8Z"}))},_e=O.memo?O.memo(P):P,ve=_e;const Ie=$(ve);var t=(e=>(e[e.INVALIDO=0]="INVALIDO",e[e.INGRESADO=1]="INGRESADO",e[e.APROBADO=2]="APROBADO",e[e.CUMPLIDO=3]="CUMPLIDO",e[e.CERRADO=4]="CERRADO",e[e.ANULADO=5]="ANULADO",e[e.EN_PROGRESO=100]="EN_PROGRESO",e))(t||{});class pe{constructor(r){this.id=r}parentToUnsafe(){return{id:this.id.valueOf()}}}class Ae extends pe{}class h extends Ae{constructor(r){super(new p(r.id));const{username:a,tango_id:i,tango_code:s,habilitado_en_tango:o,screen_name:u,email:l,password_hash:v,role:b,habilitado_en_dxt:N,puede_crear_pedido:C,puede_editar_pedido:S,puede_anular_pedido:T,borrar_pedido_al_anular:V,perfil_facturacion_id:U,aprobar_pedido_al_crear:x,ver_pedidos_cumplidos:L,dia_de_entrega:y,ver_sin_precio:B,mostrar_mensaje_de_advertencia:M,timestamp_modificacion:G,vendedor_id:D,id_lista_prioritaria:E,bonificacion_lista_prioritaria:g,universal_id:H}=r;if(this.username=new ne(a),this.screenName=new I(u),typeof l=="string"&&(this.email=new I(l.trim()!==""?new oe(l).valueOf():"")),this.passwordHash=new w(v),this.role=new fe(ce(b)),this.habilitadoEnDXT=new d(N),this.puedeCrearPedido=new d(C),this.puedeEditarPedido=new d(S),this.puedeAnularPedido=new d(T),this.borrarPedidoAlAnular=new d(V),this.perfilFacturacionId=new f(U),this.aprobarPedidoAlCrear=new d(x),this.verPedidosCumplidos=new d(L),this.diaDeEntrega=new p(y),this.verSinPrecio=new d(B),this.mostrarMensajeDeAdvertencia=new d(M),this.timestampModificacion=new p(G),!this.role.isAdmin()&&i==null)throw new ee(new re(ae.UNPROCESSABLE_ENTITY,{extra:"tango_id missing in UserEntity"}));this.tangoId=i!=null?new f(i):void 0,this.tangoCode=s!=null?new se(s):void 0,this.habilitadoEnTango=o!=null?new d(o):void 0,this.vendedorId=D!=null?new f(D):void 0,this.idListaPrioritaria=E!=null?new f(E):void 0,this.bonificacionListaPrioritaria=g!=null?new ie(g):void 0,this.universalId=new te(H.replaceAll("-",""))}toUnsafe(){var a,i,s,o,u,l;return{...this.parentToUnsafe(),username:this.username.valueOf(),tango_id:(a=this.tangoId)==null?void 0:a.valueOf(),tango_code:(i=this.tangoCode)==null?void 0:i.valueOf(),habilitado_en_tango:(s=this.habilitadoEnTango)==null?void 0:s.valueOf(),screen_name:this.screenName.valueOf(),email:((o=this.email)==null?void 0:o.valueOf())??null,password_hash:this.passwordHash.valueOf(),role:ue(this.role.valueOf()),habilitado_en_dxt:this.habilitadoEnDXT.valueOf(),puede_crear_pedido:this.puedeCrearPedido.valueOf(),puede_editar_pedido:this.puedeEditarPedido.valueOf(),puede_anular_pedido:this.puedeAnularPedido.valueOf(),borrar_pedido_al_anular:this.borrarPedidoAlAnular.valueOf(),perfil_facturacion_id:this.perfilFacturacionId.valueOf(),aprobar_pedido_al_crear:this.aprobarPedidoAlCrear.valueOf(),ver_pedidos_cumplidos:this.verPedidosCumplidos.valueOf(),dia_de_entrega:this.diaDeEntrega.valueOf(),ver_sin_precio:this.verSinPrecio.valueOf(),mostrar_mensaje_de_advertencia:this.mostrarMensajeDeAdvertencia.valueOf(),timestamp_modificacion:this.timestampModificacion.valueOf(),id_lista_prioritaria:(u=this.idListaPrioritaria)==null?void 0:u.valueOf(),bonificacion_lista_prioritaria:(l=this.bonificacionListaPrioritaria)==null?void 0:l.valueOf(),universal_id:this.universalId.valueOf()}}tangoUserExists(){return this.habilitadoEnTango!=null}habilitado(){return this.habilitadoEnDXT.valueOf()&&this.habilitadoEnTango!=null&&this.habilitadoEnTango.valueOf()}isAdmin(){return this.role.isAdmin()}isCustomer(){return this.role.isCustomer()}isSeller(){return this.role.isSeller()}hasAdminAccess(){return this.role.isAdmin()}}function Pe(e){switch(e){case t.INGRESADO:return Z;case t.APROBADO:return Q;case t.CUMPLIDO:return Y;case t.CERRADO:return W;case t.ANULADO:return F;case t.EN_PROGRESO:return z;default:return X}}function Re(e,r){const{estado:a}=e;if(!(r!=null&&(a==t.APROBADO||a==t.INGRESADO)))return a;for(const s of r){const{a_descontar:o,a_facturar:u,pendiente_descontar:l,pendiente_facturar:v}=s;if(o!=l||u!=v)return t.EN_PROGRESO}return a}function be(e,r){if(r==null)return null;let a=0;for(const i of r)a+=(i.cantidad??0)*(i.precio??0);return a}function Ne(e,r){return!((e instanceof h?e.isAdmin():e.role==n.admin)||r!=t.INGRESADO)}function Ce(e,r){const a=e instanceof h?e.isAdmin():e.role==n.admin;if(!(a?!0:e instanceof h?e.puedeAnularPedido.valueOf():e.puede_anular_pedido))return!1;const s=e instanceof h?e.aprobarPedidoAlCrear.valueOf():e.aprobar_pedido_al_crear;return!!(r==t.APROBADO&&s||(r==t.EN_PROGRESO||r==t.ANULADO)&&a)}export{t as E,Ie as P,Ce as a,be as b,Pe as g,Ne as i,Re as r};
