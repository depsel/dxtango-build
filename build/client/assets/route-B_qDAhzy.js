import{j as t,u as h,a as C}from"./emotion-element-43c6fea0.browser.esm-Bukkp3pI.js";import{a4 as u,U as n,Q as R}from"./auth_context-D8ug2Qcd.js";import{A as E,a as D,b as U,c as y}from"./paths-Cp9jAs9D.js";import{P as F,t as N,a as p,L as O,I as q,B as G}from"./app-B420985G.js";import{u as x}from"./useDXTApiFetch-BjHmfZbr.js";import{C as v}from"./CommonErrors-EkZQf0Xy.js";import{S as z}from"./SettingsFormHeading-5SiLHHxE.js";import{A as X}from"./ApiErrors-DeZcFLHr.js";import{a as B,F as d}from"./FormSkeletons-D_WNCpXW.js";import{G as T,a as i}from"./chunk-ZPFGWTBB-qFhw8OhE.js";import{T as j}from"./chunk-2OOHT3W5-B6Vi5BjQ.js";import{a as w,o as k}from"./yup-BdZyDz3M.js";import{u as V,a as $}from"./app_resources-CEgZe0CK.js";import{C as c}from"./CommonCard-C2byJLAu.js";import{C as H}from"./ControlledTextarea-CBiS41ck.js";import{F as M}from"./FormErrors-BaCwbtS0.js";import{S as Z}from"./SettingsFormButtons-CthONgBp.js";import{A as K}from"./index-rATjf0mL.js";import{c as Q,a as Y}from"./index.esm-DLycO5Xl.js";import"./chunk-3KCBMPN5-C6G4MaXF.js";import"./chunk-QURMB2UJ-CfPn0lni.js";import"./chunk-KRPLQIP4-Cm2LXMK6.js";import"./chunk-BL2ZZSHG-BUdH9WQK.js";import"./chunk-7OLJDQMT-W4l9hI3h.js";import"./chunk-6QYXN73V-BQTiQyuX.js";import"./chunk-3ASUQ6PA-BAcdPhwD.js";import"./chunk-ZHMYA64R-D24w8AgT.js";import"./chunk-56K2BSAJ-8vSmiqh4.js";import"./chunk-3Y4YXCR2-K1dpGGRN.js";import"./chunk-YQO7BFFX-CrbUtirh.js";import"./chunk-MFVQSVQB-BSFcmmoO.js";import"./chunk-46CXQZ4E-CsbUyZmS.js";const J=async(e,s)=>await u({...E,data:e,silent:!0},s),W=async(e,s)=>await u({...D,data:e,silent:!0},s);function tt(){return x({...U,silent:!0})}function st(){return x({...y,silent:!0})}const et={edit:{api:{getAll:tt,post:W},title:F,description:t.jsxs(t.Fragment,{children:["Ingrese en la lista los códigos de artículo en el órden en que desea que aparezcan durante la edición de un pedido o borrador.",t.jsx("br",{}),t.jsx("br",{}),"Cualquier línea que ingrese, que no contenga ningún código de artículo, será considerada como título de grupo."]})},print:{api:{getAll:st,post:J},title:N,description:t.jsxs(t.Fragment,{children:["Los pedidos y borradores se guardarán ordenando los artículos según esta lista.",t.jsx("br",{}),t.jsx("br",{}),"Además a cada ítem puede asignarle parámetros adicionales, como la cantidad de unidades por bulto.",t.jsx("br",{}),t.jsx("br",{}),'Por ejemplo, la siguente línea indica el artículo "01 35", y además define que cada bulto posee 12 unidades:',t.jsx("br",{}),t.jsx("br",{}),t.jsx("b",{children:"01 35, b=12"})]})}},rt=e=>{const{typeSettings:s}=e;return t.jsx(p,{width:"full",sx:{mt:8,mb:4},children:t.jsxs(T,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[t.jsx(i,{children:t.jsx(B,{height:"380px"})}),t.jsx(i,{children:t.jsx(j,{fontSize:"sm",children:s.description})}),t.jsx(i,{children:t.jsx(d,{})}),t.jsx(i,{children:t.jsx(d,{})})]})})},ot=Q({list:Y().default("").test("avoid-ARTICLE_GROUP_NO_NAME",`Evite utilizar ${K}`,function(e){return!/(^|[^a-zA-Z0-9])_([^a-zA-Z0-9]|$)/.test(e)})}).required(),it=e=>{const{stateData:s,typeSettings:r}=e,a=V(),o=$(),{handleSubmit:f,control:g,reset:nt,setError:_,formState:{errors:A,isSubmitting:I,isSubmitSuccessful:S}}=w({defaultValues:{list:(s==null?void 0:s.join(`\r
`))||""},resolver:k(ot)}),l=S||I,b=async L=>{const P={data:L.list.split(`
`)};(await r.api.post(P,a)).map({success:m=>{o({title:O,status:"success"}),a.navigate(n)},error:m=>{o({title:R,status:"error"}),_("root",{message:m.info.error_description})}})};return t.jsx("form",{noValidate:!0,onSubmit:f(b),children:t.jsxs(p,{children:[t.jsx(M,{errors:A}),t.jsx(c,{children:t.jsxs(T,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[t.jsx(i,{children:t.jsx(H,{fieldProps:{name:"list",id:"list",rows:20,fontSize:"sm"},formControlProps:{isDisabled:l},control:g})}),t.jsx(i,{children:t.jsx(j,{fontSize:"sm",children:r.description})})]})}),t.jsx(c,{children:t.jsx(Z,{isLoading:l,hideCancelButton:!0})})]})})},at=e=>{const{typeSettings:s}=e,{state:r,retry:a}=s.api.getAll();return r.map({loading:o=>t.jsx(rt,{typeSettings:s}),error:({error:o})=>t.jsx(X,{error:o,retry:a,cancelAndNavigateTo:n}),success:o=>t.jsx(it,{stateData:o.data,typeSettings:s})})};function Bt(){const e=h(),{type:s}=C(),r=et[s];return s!=null&&r!=null?t.jsxs(t.Fragment,{children:[t.jsx(z,{title:r.title,returnButton:{buttonProps:{onClick:()=>{e(n)}}}}),t.jsx(at,{typeSettings:r})]}):t.jsx(v,{error:q,buttonProps:{label:G,colorScheme:"green",onClick:()=>{e(n)}}})}export{Bt as default};
