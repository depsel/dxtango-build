import{r as h,j as t,u as _}from"./emotion-element-43c6fea0.browser.esm-Cuif_eEn.js";import{a4 as u,S as b,U as d,a1 as A}from"./auth_context-B-Tcig0k.js";import{a as I,p as P,q as R}from"./app-BdYyDs5S.js";import{S as T}from"./SettingsFormHeading-oznEKY0V.js";import{c as F,a as v,d as O,o as N}from"./index.esm-DXKbKlYo.js";import{F as c,a as D,b as L}from"./useDXTApiFetch-_LSStUNh.js";import{u as G,a as U}from"./app_resources-CDkSSx5t.js";import{u as q,C as M}from"./ControlledSelect-CjhzTTii.js";import{C as p}from"./CommonCard-BQfjnTT7.js";import{F as B}from"./FormErrors-DgI5zxIH.js";import{I as V}from"./InlineError-DCz4eDK0.js";import{S as Y}from"./SettingsFormButtons-Cbuywpud.js";import{G as k,a as l}from"./chunk-ZPFGWTBB-CfuIyNTX.js";import"./ResponsiveIconButton-Ccujq6NG.js";import"./chunk-ZHMYA64R-Cq5LpG9O.js";import"./chunk-VMD3UMGK-BOiy-z46.js";import"./chunk-6QYXN73V-B1Nx9szV.js";import"./chunk-KRPLQIP4-DRGOXS8W.js";import"./chunk-BL2ZZSHG-DP_ZXxbw.js";import"./chunk-7OLJDQMT-DB_eYbVs.js";import"./chunk-3Y4YXCR2-CiP0t4s6.js";import"./chunk-ALC6QPCI-C2jRzl9i.js";import"./chunk-3KCBMPN5-CdY7cck7.js";import"./chunk-QURMB2UJ-BoOQBYSq.js";import"./index.esm-CpzYlNdn.js";import"./chunk-56K2BSAJ-r8NF7IGV.js";import"./chunk-W7WUSNWJ-CDK2m9PS.js";import"./chunk-HB6KBUMZ-CJPGLeRv.js";import"./chunk-H46NUPBZ-Cf5o4NPi.js";import"./chunk-YQO7BFFX-CEG2A-0c.js";import"./chunk-MFVQSVQB-gRsUJlZr.js";import"./chunk-46CXQZ4E-bCSOgkek.js";import"./chunk-Z6RXEUPO-DTekSvPj.js";const w=u("/dictionary","GET"),H=u("/dictionary/active_company","POST"),$=async(e,s)=>await b({...H,params:e,silent:!0},s),z=F({company:v().required("Seleccione una empresa activa")}).required(),J=()=>{const e=G(),s=U(),{state:r,result:a}=q({endpoint:w,fieldsMap:{label:"name",value:"db_name",selected:"is_active"}}),{handleSubmit:f,control:S,reset:x,setError:y,formState:{errors:C,isSubmitting:g,isSubmitSuccessful:j}}=O({defaultValues:{company:""},resolver:N(z)}),n=j||g;h.useEffect(()=>{if(r instanceof c){const o=a.findIndex(i=>i.selected===!0);o>=0&&x({company:a[o].value})}},[r]);const E=async o=>{const i={company:o.company};(await $(i,e)).map({success:m=>{s({title:P,status:"success"}),e.navigate(d)},error:m=>{s({title:A,status:"error"}),y("root",{message:m.info.error_description})}})};return t.jsx("form",{noValidate:!0,onSubmit:f(E),children:t.jsxs(I,{children:[t.jsx(B,{errors:C}),t.jsx(p,{children:t.jsxs(k,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[t.jsxs(l,{children:[t.jsx(M,{fieldProps:{name:"company",placeholder:"Seleccione una empresa",options:a,noOptionsMessage(o){return"No hay empresas disponibles"},selectedOptionStyle:"check",isLoading:r instanceof D},formControlProps:{isDisabled:n||!(r instanceof c)},formControlInnerProps:{label:"Empresa activa"},control:S}),r instanceof L&&t.jsx(V,{error:r.errorOrNull().error})]}),t.jsx(l,{})]})}),t.jsx(p,{children:t.jsx(Y,{isLoading:n,hideCancelButton:!0})})]})})};function Tt(){const e=_();return t.jsxs(t.Fragment,{children:[t.jsx(T,{title:R,returnButton:{buttonProps:{onClick:()=>{e(d)}}}}),t.jsx(J,{})]})}export{Tt as default};
