import{r as h,j as t,u as _}from"./emotion-element-43c6fea0.browser.esm-CqNy1Myq.js";import{a0 as u,O as b,U as d,Y as A}from"./auth_context-BcmIMa0H.js";import{n as I,o as P}from"./app-B1a_okyL.js";import{S as R}from"./SettingsFormHeading-BHfSW-Kb.js";import{c as T,a as F,d as O,o as v}from"./index.esm-DRWPArKk.js";import{F as c,a as N,b as D}from"./useDXTApiFetch-DCIa93_N.js";import{u as L}from"./app_resources-DBlOodC1.js";import{u as G,C as U}from"./ControlledSelect-fWVi0-qr.js";import{C as p}from"./CommonCard-CeRdMR-s.js";import{F as B}from"./FormErrors-Cq6m-7WG.js";import{I as M}from"./InlineError-CaHI0zK4.js";import{S as Y}from"./SettingsFormButtons-BvgAhPGk.js";import{u as q}from"./chunk-6RSEZNRH-HBxAY87Z.js";import{B as V}from"./chunk-PULVB27S-DFGZ_FhU.js";import{G as k,a as l}from"./chunk-ZPFGWTBB-D1BdsecE.js";import"./ResponsiveIconButton-Dzqr81nH.js";import"./chunk-VMD3UMGK-CjQf0NqH.js";import"./chunk-6QYXN73V-CZbxpQYs.js";import"./chunk-BL2ZZSHG-XVL5PYnd.js";import"./chunk-7OLJDQMT-mUIp5tuF.js";import"./chunk-KRPLQIP4-22zt2_dG.js";import"./index.esm-BqhPpraI.js";import"./chunk-56K2BSAJ-C8tXkxw9.js";import"./chunk-HB6KBUMZ-25NI-665.js";import"./index-CAKzuJDV.js";import"./chunk-H46NUPBZ-DZttvycU.js";import"./chunk-YQO7BFFX-4WIx2Mcr.js";import"./chunk-MFVQSVQB-3P8bbuxX.js";import"./chunk-3KCBMPN5-COSGWH1j.js";import"./chunk-46CXQZ4E-CX4juB_f.js";import"./chunk-Z6RXEUPO-CLnUS3YW.js";import"./chunk-3Y4YXCR2-D9PuIzMR.js";import"./chunk-QURMB2UJ-Cc-vvoFz.js";const w=u("/dictionary","GET"),H=u("/dictionary/active_company","POST"),$=async(r,s)=>await b({...H,params:r,silent:!0},s),z=T({company:F().required("Seleccione una empresa activa")}).required(),J=()=>{const r=L(),s=q(),{state:e,result:a}=G({endpoint:w,fieldsMap:{label:"name",value:"db_name",selected:"is_active"}}),{handleSubmit:f,control:S,reset:x,setError:y,formState:{errors:C,isSubmitting:g,isSubmitSuccessful:j}}=O({defaultValues:{company:""},resolver:v(z)}),n=j||g;h.useEffect(()=>{if(e instanceof c){const o=a.findIndex(i=>i.selected===!0);o>=0&&x({company:a[o].value})}},[e]);const E=async o=>{const i={company:o.company};(await $(i,r)).map({success:m=>{s({title:I,status:"success"}),r.navigate(d)},error:m=>{s({title:A,status:"error"}),y("root",{message:m.info.error_description})}})};return t.jsx("form",{noValidate:!0,onSubmit:f(E),children:t.jsxs(V,{children:[t.jsx(B,{errors:C}),t.jsx(p,{children:t.jsxs(k,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[t.jsxs(l,{children:[t.jsx(U,{fieldProps:{name:"company",placeholder:"Seleccione una empresa",options:a,noOptionsMessage(o){return"No hay empresas disponibles"},selectedOptionStyle:"check",isLoading:e instanceof N},formControlProps:{isDisabled:n||!(e instanceof c)},formControlInnerProps:{label:"Empresa activa"},control:S}),e instanceof D&&t.jsx(M,{error:e.errorOrNull().error})]}),t.jsx(l,{})]})}),t.jsx(p,{children:t.jsx(Y,{isLoading:n,hideCancelButton:!0})})]})})};function Tt(){const r=_();return t.jsxs(t.Fragment,{children:[t.jsx(R,{title:P,returnButton:{buttonProps:{onClick:()=>{r(d)}}}}),t.jsx(J,{})]})}export{Tt as default};
