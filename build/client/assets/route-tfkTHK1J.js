import{j as t,u as E,a as C}from"./emotion-element-43c6fea0.browser.esm-CqNy1Myq.js";import{a0 as a,O as p,U as l,Y as R}from"./auth_context-BcmIMa0H.js";import{P as D,s as O,L as U,I as y,B as F}from"./app-B1a_okyL.js";import{u as x}from"./useDXTApiFetch-DCIa93_N.js";import{C as N}from"./CommonErrors-Ca1Fo25T.js";import{S as G}from"./SettingsFormHeading-BHfSW-Kb.js";import{A as q}from"./ApiErrors-BofVVWwq.js";import{a as v,F as m}from"./FormSkeletons-C9NbYi-R.js";import{B as T}from"./chunk-PULVB27S-DFGZ_FhU.js";import{G as _,a as i}from"./chunk-ZPFGWTBB-D1BdsecE.js";import{T as j}from"./chunk-2OOHT3W5-Ci3F40nI.js";import{c as z,a as B,d as X,o as w}from"./index.esm-DRWPArKk.js";import{u as k}from"./app_resources-DBlOodC1.js";import{C as u}from"./CommonCard-CeRdMR-s.js";import{C as V}from"./ControlledTextarea-D3qNDSdo.js";import{F as $}from"./FormErrors-Cq6m-7WG.js";import{S as H}from"./SettingsFormButtons-BvgAhPGk.js";import{A as M}from"./index-Ik1F4ylM.js";import{u as Y}from"./chunk-6RSEZNRH-HBxAY87Z.js";import"./CloseIcon-DhOj6wIL.js";import"./chunk-KRPLQIP4-22zt2_dG.js";import"./ResponsiveIconButton-Dzqr81nH.js";import"./chunk-VMD3UMGK-CjQf0NqH.js";import"./chunk-6QYXN73V-CZbxpQYs.js";import"./chunk-BL2ZZSHG-XVL5PYnd.js";import"./chunk-7OLJDQMT-mUIp5tuF.js";import"./components-DVk_p40a.js";import"./chunk-3ASUQ6PA-C9U3rhNA.js";import"./chunk-YQO7BFFX-4WIx2Mcr.js";import"./chunk-MFVQSVQB-3P8bbuxX.js";import"./chunk-56K2BSAJ-C8tXkxw9.js";import"./chunk-H46NUPBZ-DZttvycU.js";import"./chunk-3KCBMPN5-COSGWH1j.js";import"./chunk-46CXQZ4E-CX4juB_f.js";import"./chunk-3Y4YXCR2-D9PuIzMR.js";import"./index-CAKzuJDV.js";import"./chunk-QURMB2UJ-Cc-vvoFz.js";const Z=a("/dxt/articulo/print_list","GET"),K=a("/dxt/articulo/print_list","POST"),J=a("/dxt/articulo/edit_list","GET"),Q=a("/dxt/articulo/edit_list","POST");a("/dxt/articulo/print_list/ids","GET");const W=async(r,s)=>await p({...K,data:r,silent:!0},s),tt=async(r,s)=>await p({...Q,data:r,silent:!0},s);function st(){return x({...J,silent:!0})}function rt(){return x({...Z,silent:!0})}const et={edit:{api:{getAll:st,post:tt},title:D,description:t.jsxs(t.Fragment,{children:["Ingrese en la lista los códigos de artículo en el órden en que desea que aparezcan durante la edición de un pedido o borrador.",t.jsx("br",{}),t.jsx("br",{}),"Cualquier línea que ingrese, que no contenga ningún código de artículo, será considerada como título de grupo."]})},print:{api:{getAll:rt,post:W},title:O,description:t.jsxs(t.Fragment,{children:["Los pedidos y borradores se guardarán ordenando los artículos según esta lista.",t.jsx("br",{}),t.jsx("br",{}),"Además a cada ítem puede asignarle parámetros adicionales, como la cantidad de unidades por bulto.",t.jsx("br",{}),t.jsx("br",{}),'Por ejemplo, la siguente línea indica el artículo "01 35", y además define que cada bulto posee 12 unidades:',t.jsx("br",{}),t.jsx("br",{}),t.jsx("b",{children:"01 35; b=12"})]})}},ot=r=>{const{typeSettings:s}=r;return t.jsx(T,{width:"full",sx:{mt:8,mb:4},children:t.jsxs(_,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[t.jsx(i,{children:t.jsx(v,{height:"380px"})}),t.jsx(i,{children:t.jsx(j,{fontSize:"sm",children:s.description})}),t.jsx(i,{children:t.jsx(m,{})}),t.jsx(i,{children:t.jsx(m,{})})]})})},it=z({list:B().default("").test("avoid-ARTICLE_GROUP_NO_NAME",`Evite utilizar ${M}`,function(r){return!/(^|[^a-zA-Z0-9])_([^a-zA-Z0-9]|$)/.test(r)})}).required(),at=r=>{const{stateData:s,typeSettings:e}=r,n=k(),o=Y(),{handleSubmit:f,control:g,reset:lt,setError:A,formState:{errors:S,isSubmitting:I,isSubmitSuccessful:P}}=X({defaultValues:{list:s?.join(`\r
`)||""},resolver:w(it)}),d=P||I,L=async b=>{const h={data:b.list.split(`
`)};(await e.api.post(h,n)).map({success:c=>{o({title:U,status:"success"}),n.navigate(l)},error:c=>{o({title:R,status:"error"}),A("root",{message:c.info.error_description})}})};return t.jsx("form",{noValidate:!0,onSubmit:f(L),children:t.jsxs(T,{children:[t.jsx($,{errors:S}),t.jsx(u,{children:t.jsxs(_,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[t.jsx(i,{children:t.jsx(V,{fieldProps:{name:"list",id:"list",rows:20,fontSize:"sm"},formControlProps:{isDisabled:d},control:g})}),t.jsx(i,{children:t.jsx(j,{fontSize:"sm",children:e.description})})]})}),t.jsx(u,{children:t.jsx(H,{isLoading:d,hideCancelButton:!0})})]})})},nt=r=>{const{typeSettings:s}=r,{state:e,retry:n}=s.api.getAll();return e.map({loading:o=>t.jsx(ot,{typeSettings:s}),error:({error:o})=>t.jsx(q,{error:o,retry:n,cancelAndNavigateTo:l}),success:o=>t.jsx(at,{stateData:o.data,typeSettings:s})})};function Mt(){const r=E(),{type:s}=C(),e=et[s];return s!=null&&e!=null?t.jsxs(t.Fragment,{children:[t.jsx(G,{title:e.title,returnButton:{buttonProps:{onClick:()=>{r(l)}}}}),t.jsx(nt,{typeSettings:e})]}):t.jsx(N,{error:y,buttonProps:{label:F,colorScheme:"gray",onClick:()=>{r(l)}}})}export{Mt as default};
