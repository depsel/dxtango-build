import{A as k,k as a,D as d,l,m as p,n as i,p as T,q as m}from"./auth_context-By8qlCOz.js";class E extends k{constructor(n,o){super(),this.currentUserInfo=n,this.errorCallback=o}async run(n,o,u,h){if(!(n instanceof a))throw new d(l.INTERNAL_SERVER_ERROR,"Must be logged in");const s=p();if(s==null||n.authToken!==s){o(new i);return}(await T(n.authToken,u,!0)).map({error:e=>{const r=e.info;m(r.status)&&o(new i)},success:e=>{const r=n.userInfo,f=n.authToken,t=e.data.user,c=e.data.auth_token;(f!==c||r.timestamp_modificacion!==t.timestamp_modificacion)&&o(new a(c,t))}})}}export{E as A};
