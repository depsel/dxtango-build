import{r as d}from"./emotion-element-5486c51c.browser.esm-CMT9BBIk.js";import{M as x,N as m,h as g,O as y,P as F,Q as R}from"./auth_context-CCfWU2Jo.js";class p{constructor(s){this.originalRequest=s}mapOrElse(s){const{loading:t,success:r,error:e,orElse:o}=s;return this instanceof u&&t?t(this):this instanceof h&&r?r(this):this instanceof c&&e?e(this):o(this)}map(s){const{loading:t,success:r,error:e}=s;return this.mapOrElse({loading:t,success:r,error:e,orElse:o=>{throw Error("Invalid useAxiosFetch state")}})}isLoading(){return this instanceof u}isSuccess(){return this instanceof h}isError(){return this instanceof c}errorOrNull(){return this instanceof c?this.error:null}callIfLoading(s){return this instanceof u?s(this)??!1:!1}callIfSuccess(s){return this instanceof h?s(this)??!1:!1}callIfError(s){return this instanceof c?s(this)??!1:!1}}class u extends p{constructor(s){super(s)}}class c extends p{constructor(s,t){super(t),this.error=s}}class h extends p{constructor(s,t){super(t),this.data=s}}function A(n,...s){const[t,r]=d.useState(new u(n)),e=async()=>{r(new u(t.originalRequest)),await l()},o=async()=>{t.isSuccess()||r(new u(t.originalRequest)),await l()},l=async()=>{const i=t.originalRequest;try{const a=await x(i),f=a?.data?.data??a?.data;r(new h(f,i))}catch(a){if(a instanceof m){const f=a,[E]=s,S=E?E(f):f,w=new c(S,i);r(w)}else throw a}};return d.useEffect(()=>{l()},[]),{state:t,reload:o,retry:e}}function T(n){const s=g(),t=s.retryCallback,r=y(s,n),{state:e,retry:o,reload:l}=A(r,i=>R(i));return d.useEffect(()=>{(async()=>{if((n?.silent??!1)||!(e instanceof c))return;const a=e.error;await F(s,a.status)||t&&await t({message:a.error_description})&&o()})()},[e]),{state:e,retry:o,reload:l}}export{h as F,u as a,c as b,T as u};
