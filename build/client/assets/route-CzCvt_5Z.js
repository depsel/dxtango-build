import{r as g,j as t,a as _}from"./emotion-element-43c6fea0.browser.esm-V7CwUVk-.js";import{j as u,a5 as h,e as d,X as A}from"./auth_context-BBDV2-qW.js";import{B as I,o as P,p as F}from"./app-BMvraJRd.js";import{S as T}from"./SettingsFormHeading-BZPNDeWv.js";import{a as R,b as v}from"./app_resources-CxShxcx8.js";import{u as O}from"./useTangoList-Bq-SEz1p.js";import{c as N,a as D,d as L,o as G}from"./index.esm-SP9Jm6Nz.js";import{a as c,F as M,b as U}from"./useDXTApiFetch-cUHsby58.js";import{C as p}from"./CommonCard-CrzQbbIu.js";import{C as q}from"./ControlledSelect-Bgaw0xLO.js";import{F as B}from"./FormErrors-5HYi3DVI.js";import{I as V}from"./InlineError-DRfvy1Jn.js";import{S as Y}from"./SettingsFormButtons-BuGsXUqX.js";import{G as k,a as l}from"./chunk-ZPFGWTBB-BQOfC-td.js";import"./chunk-KRPLQIP4-NJec_PE4.js";import"./chunk-7OLJDQMT-3EhHOSPR.js";import"./chunk-6QYXN73V-BKD6YrO0.js";import"./chunk-3Y4YXCR2-DS9dcu0f.js";import"./chunk-QURMB2UJ-8Wtwm6sR.js";import"./chunk-3KCBMPN5-70uOg14b.js";import"./chunk-56K2BSAJ-ByH33m4W.js";import"./chunk-YQO7BFFX-B4KLri48.js";import"./chunk-MFVQSVQB-BInMUJ5Q.js";import"./index.esm-DYgtBHkz.js";import"./select-BgjIqqU7.js";import"./chunk-W7WUSNWJ-BEqd18B9.js";import"./chunk-HB6KBUMZ-jk1Ar7Nh.js";import"./chunk-46CXQZ4E-Cu23NgCw.js";import"./chunk-Z6RXEUPO-DSTG9QiY.js";const w=u("/dictionary","GET"),H=u("/dictionary/active_company","POST"),$=async(r,o)=>await h({...H,params:r,silent:!0},o),X=N({company:D().required("Seleccione una empresa activa")}).required(),z=()=>{const r=R(),o=v(),{state:e,result:a}=O({endpoint:w,fieldsMap:{label:"name",value:"db_name",selected:"is_active"}}),{handleSubmit:f,control:S,reset:x,setError:j,formState:{errors:y,isSubmitting:C,isSubmitSuccessful:E}}=L({defaultValues:{company:""},resolver:G(X)}),n=E||C;g.useEffect(()=>{if(e instanceof c){const s=a.findIndex(i=>i.selected===!0);s>=0&&x({company:a[s].value})}},[e]);const b=async s=>{const i={company:s.company};(await $(i,r)).map({success:m=>{o({title:P,status:"success"}),r.navigate(d)},error:m=>{o({title:A,status:"error"}),j("root",{message:m.info.error_description})}})};return t.jsx("form",{noValidate:!0,onSubmit:f(b),children:t.jsxs(I,{children:[t.jsx(B,{errors:y}),t.jsx(p,{children:t.jsxs(k,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[t.jsxs(l,{children:[t.jsx(q,{fieldProps:{name:"company",placeholder:"Seleccione una empresa",options:a,noOptionsMessage(s){return"No hay empresas disponibles"},selectedOptionStyle:"check",isLoading:e instanceof M},formControlProps:{isDisabled:n||!(e instanceof c)},formControlInnerProps:{label:"Empresa activa"},control:S}),e instanceof U&&t.jsx(V,{error:e.errorOrNull().error})]}),t.jsx(l,{})]})}),t.jsx(p,{children:t.jsx(Y,{isLoading:n})})]})})},J=()=>t.jsx(z,{});function It(){const r=_();return t.jsxs(t.Fragment,{children:[t.jsx(T,{title:F,returnButton:{buttonProps:{onClick:()=>{r(d)}}}}),t.jsx(J,{})]})}export{It as default};
