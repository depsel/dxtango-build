import{r as j,g as $}from"./emotion-element-43c6fea0.browser.esm-CqNy1Myq.js";import{w as X,x as z,y as F,z as W,B as Y,C as Z,D as q}from"./TextPrice-LTUXzWuW.js";import{J as _,aO as P,aP as c,aq as J,aQ as n,aR as m,aS as A,aT as Q,aU as K,aV as k,V as p,aW as I,aX as o,aY as f,D as ee,i as re,j as ae,aZ as ie,a_ as te}from"./auth_context-BcmIMa0H.js";import{V as ne}from"./vo_user_name-C34O4LAA.js";class se extends _{constructor(r,a){super(r),this.maxLength=a}validate(r){if(typeof r=="string"){const a=r.trim();if(a!==""&&(this.maxLength==null||a.length<=this.maxLength))return a}this.throwError(r)}}class oe extends _{throwInvalidAddressError(r){this.throwError(r,"Invalid email address")}validate(r){if(typeof r=="string"){const a=r.trim().toLowerCase();if(P.isEmail(a,{domain_specific_validation:!0}))return a}this.throwError(r)}}class w extends _{constructor(r){c.isBuffer(r)&&(r=r.toString("hex")),super(r)}validate(r){let a;if(c.isBuffer(r)&&(a=r.toString("hex")),typeof r=="string"&&(a=r.trim().toLowerCase()),typeof a=="string"&&P.isMD5(a))return a;this.throwError(r)}toBuffer(){return c.from(this.value,"hex")}static random(){const r=Array(16);for(let a=0;a<r.length;a++)r[a]=J(0,255);return new w(c.from(r))}}function le(e){try{return Q(n,e)}catch{throw new m(`Invalid user role value: ${e}`)}}function de(e){try{return K(n,e)}catch{throw new m(`Invalid user role string: ${A(e,!0)}`)}}function ue(e){switch(e){case n.customer:return 0;case n.seller:return 1;case n.admin:return 2}throw new m(`Invalid user role: ${A(e,!0)}`)}function ce(e){switch(e){case 0:return n.customer;case 1:return n.seller;case 2:return n.admin}throw new m(`Invalid user role number: ${A(e,!0)}`)}class fe extends _{validate(r){try{if(typeof r=="string")return de(r);if(k(n,r))return r}catch{}this.throwError(r)}toString(){return le(this.value)}isAdmin(){return this.value.valueOf()==n.admin}isSeller(){return this.value.valueOf()==n.seller}isCustomer(){return this.value.valueOf()==n.customer}}function he(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var O=he(j),Oe=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},_e=function(e,r){var a={};for(var i in e)r.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(a[i]=e[i]);return a},R=function(r){var a=r.color,i=a===void 0?"currentColor":a,s=r.size,l=s===void 0?24:s;r.children;var u=_e(r,["color","size","children"]),d="mdi-icon "+(u.className||"");return O.createElement("svg",Oe({},u,{className:d,width:l,height:l,fill:i,viewBox:"0 0 24 24"}),O.createElement("path",{d:"M18,3H6V7H18M19,12A1,1 0 0,1 18,11A1,1 0 0,1 19,10A1,1 0 0,1 20,11A1,1 0 0,1 19,12M16,19H8V14H16M19,8H5A3,3 0 0,0 2,11V17H6V21H18V17H22V11A3,3 0 0,0 19,8Z"}))},me=O.memo?O.memo(R):R,ve=me;const Ie=$(ve);var t=(e=>(e[e.INVALIDO=0]="INVALIDO",e[e.INGRESADO=1]="INGRESADO",e[e.APROBADO=2]="APROBADO",e[e.CUMPLIDO=3]="CUMPLIDO",e[e.CERRADO=4]="CERRADO",e[e.ANULADO=5]="ANULADO",e[e.EN_PROGRESO=100]="EN_PROGRESO",e))(t||{});class pe{constructor(r){this.id=r}parentToUnsafe(){return{id:this.id.valueOf()}}}class Ae extends pe{}class h extends Ae{constructor(r){super(new p(r.id));const{username:a,tango_id:i,tango_code:s,habilitado_en_tango:l,screen_name:u,email:d,password_hash:v,role:b,habilitado_en_dxt:N,puede_crear_pedido:C,puede_editar_pedido:S,puede_anular_pedido:T,borrar_pedido_al_anular:V,perfil_facturacion_id:U,aprobar_pedido_al_crear:x,ver_pedidos_cumplidos:L,dia_de_entrega:y,ver_sin_precio:B,mostrar_mensaje_de_advertencia:M,timestamp_modificacion:G,vendedor_id:D,id_lista_adicional:E,bonificacion_lista_adicional:g,universal_id:H}=r;if(this.username=new ne(a),this.screenName=new I(u),typeof d=="string"&&(this.email=new I(d.trim()!==""?new oe(d).valueOf():"")),this.passwordHash=new w(v),this.role=new fe(ce(b)),this.habilitadoEnDXT=new o(N),this.puedeCrearPedido=new o(C),this.puedeEditarPedido=new o(S),this.puedeAnularPedido=new o(T),this.borrarPedidoAlAnular=new o(V),this.perfilFacturacionId=new f(U),this.aprobarPedidoAlCrear=new o(x),this.verPedidosCumplidos=new o(L),this.diaDeEntrega=new p(y),this.verSinPrecio=new o(B),this.mostrarMensajeDeAdvertencia=new o(M),this.timestampModificacion=new p(G),!this.role.isAdmin()&&i==null)throw new ee(new re(ae.UNPROCESSABLE_ENTITY,{extra:"tango_id missing in UserEntity"}));this.tangoId=i!=null?new f(i):void 0,this.tangoCode=s!=null?new se(s):void 0,this.habilitadoEnTango=l!=null?new o(l):void 0,this.vendedorId=D!=null?new f(D):void 0,this.idListaAdicional=E!=null?new f(E):void 0,this.bonificacionListaAdicional=g!=null?new ie(g):void 0,this.universalId=new te(H.replaceAll("-",""))}toUnsafe(){return{...this.parentToUnsafe(),username:this.username.valueOf(),tango_id:this.tangoId?.valueOf(),tango_code:this.tangoCode?.valueOf(),habilitado_en_tango:this.habilitadoEnTango?.valueOf(),screen_name:this.screenName.valueOf(),email:this.email?.valueOf()??null,password_hash:this.passwordHash.valueOf(),role:ue(this.role.valueOf()),habilitado_en_dxt:this.habilitadoEnDXT.valueOf(),puede_crear_pedido:this.puedeCrearPedido.valueOf(),puede_editar_pedido:this.puedeEditarPedido.valueOf(),puede_anular_pedido:this.puedeAnularPedido.valueOf(),borrar_pedido_al_anular:this.borrarPedidoAlAnular.valueOf(),perfil_facturacion_id:this.perfilFacturacionId.valueOf(),aprobar_pedido_al_crear:this.aprobarPedidoAlCrear.valueOf(),ver_pedidos_cumplidos:this.verPedidosCumplidos.valueOf(),dia_de_entrega:this.diaDeEntrega.valueOf(),ver_sin_precio:this.verSinPrecio.valueOf(),mostrar_mensaje_de_advertencia:this.mostrarMensajeDeAdvertencia.valueOf(),timestamp_modificacion:this.timestampModificacion.valueOf(),id_lista_adicional:this.idListaAdicional?.valueOf(),bonificacion_lista_adicional:this.bonificacionListaAdicional?.valueOf(),universal_id:this.universalId.valueOf()}}tangoUserExists(){return this.habilitadoEnTango!=null}habilitado(){return this.habilitadoEnDXT.valueOf()&&this.habilitadoEnTango!=null&&this.habilitadoEnTango.valueOf()}isAdmin(){return this.role.isAdmin()}isCustomer(){return this.role.isCustomer()}isSeller(){return this.role.isSeller()}hasAdminAccess(){return this.role.isAdmin()}}function Re(e){switch(e){case t.INGRESADO:return q;case t.APROBADO:return Z;case t.CUMPLIDO:return Y;case t.CERRADO:return W;case t.ANULADO:return F;case t.EN_PROGRESO:return z;default:return X}}function Pe(e,r){const{estado:a}=e;if(!(r!=null&&(a==t.APROBADO||a==t.INGRESADO)))return a;for(const s of r){const{a_descontar:l,a_facturar:u,pendiente_descontar:d,pendiente_facturar:v}=s;if(l!=d||u!=v)return t.EN_PROGRESO}return a}function be(e,r){if(r==null)return null;let a=0;for(const s of r)a+=(s.cantidad??0)*(s.precio??0);const{descuento:i}=e;return a=a-a*i/100,a}function Ne(e,r){return!((e instanceof h?e.isAdmin():e.role==n.admin)||r!=t.INGRESADO)}function Ce(e,r){const a=e instanceof h?e.isAdmin():e.role==n.admin;if(!(a?!0:e instanceof h?e.puedeAnularPedido.valueOf():e.puede_anular_pedido))return!1;if(r==t.INGRESADO)return!0;const s=e instanceof h?e.aprobarPedidoAlCrear.valueOf():e.aprobar_pedido_al_crear;return!!(r==t.APROBADO&&s||(r==t.EN_PROGRESO||r==t.ANULADO)&&a)}export{t as E,Ie as P,Ce as a,be as b,Re as g,Ne as i,Pe as r};
