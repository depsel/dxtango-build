import{j as t,g as O,r as g}from"./emotion-element-5486c51c.browser.esm-CMT9BBIk.js";import{q as N,aK as $,aL as z,A as E,s as S,f as L,c as x,d as P,au as k,x as D,I as j,B as H}from"./auth_context-CCfWU2Jo.js";import{c as M,a as C,d as U,o as B}from"./index.esm-CzxlHhdA.js";import{y as T}from"./utils-DQu-C9ov.js";import{V as R}from"./vo_user_name-DRov8-rC.js";import{a as q,C as F}from"./ColorModeSelector-zA6QYbuT.js";import{C as A}from"./ControlledInput-BKce-7V6.js";import{I as W}from"./chunk-QINAG4RG-DZB8sNy9.js";import{u as Z,M as K}from"./MessageToUserDialog-CPklsPmb.js";import{C as X}from"./ClientOnly-CruWkRVx.js";import{b as Y}from"./components-BuCL6aou.js";import{u as G,C as J,a as Q}from"./chunk-YQO7BFFX-BA4DVzl3.js";import{U as ee,L as b}from"./chunk-46CXQZ4E-CqQSj_hs.js";import{V as re}from"./chunk-NTCQBYKE-BqJT1CcA.js";import{H as te}from"./chunk-7OLJDQMT-DqhdIuo6.js";import{B as m}from"./chunk-PULVB27S-C1tz_n3L.js";import{A as oe}from"./chunk-3KCBMPN5-D8G8ZRLu.js";import{I as y}from"./chunk-2ZHRCML3-Cd9Yb1VE.js";import"./app-DHK1Xtws.js";import"./chunk-6QYXN73V-tPml5wjb.js";import"./chunk-56K2BSAJ-Bys-b2nt.js";import"./chunk-H46NUPBZ-CGUTFX_3.js";import"./chunk-6CVSDS6C-BMnlnkqH.js";import"./chunk-2OOHT3W5-CC38uFWT.js";import"./chunk-MFVQSVQB-Bvk0kezP.js";class se extends N{constructor(o,e){super(),this.params=o,this.errorCallback=e}async run(o,e,s,a){e(new $),(await z(this.params,s)).map({success:async n=>{const{user:i,auth_token:v}=n.data;e(new E(v,i))},error:async n=>{const i=n.info;e(new S(i)),this.errorCallback&&this.errorCallback(i)}})}}var ae=L(function(o,e){const{className:s,...a}=o,c=G();return t.jsx(x.div,{ref:e,className:P("chakra-card__header",s),__css:c.header,...a})}),V=x("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});V.displayName="Center";var ne={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};L(function(o,e){const{axis:s="both",...a}=o;return t.jsx(x.div,{ref:e,__css:ne[s],...a,position:"absolute"})});function ie(r){return r&&typeof r=="object"&&"default"in r?r.default:r}var u=ie(g),ce=Object.assign||function(r){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}return r},le=function(r,o){var e={};for(var s in r)o.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e},I=function(o){var e=o.color,s=e===void 0?"currentColor":e,a=o.size,c=a===void 0?24:a;o.children;var n=le(o,["color","size","children"]),i="mdi-icon "+(n.className||"");return u.createElement("svg",ce({},n,{className:i,width:c,height:c,fill:s,viewBox:"0 0 24 24"}),u.createElement("path",{d:"M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"}))},me=u.memo?u.memo(I):I,ue=me;const de=O(ue);function pe(r){return r&&typeof r=="object"&&"default"in r?r.default:r}var d=pe(g),fe=Object.assign||function(r){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}return r},he=function(r,o){var e={};for(var s in r)o.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e},w=function(o){var e=o.color,s=e===void 0?"currentColor":e,a=o.size,c=a===void 0?24:a;o.children;var n=he(o,["color","size","children"]),i="mdi-icon "+(n.className||"");return d.createElement("svg",fe({},n,{className:i,width:c,height:c,fill:s,viewBox:"0 0 24 24"}),d.createElement("path",{d:"M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"}))},ge=d.memo?d.memo(w):w,xe=ge;const ve=O(xe),je=r=>t.jsx(W,{src:"/welcome/logo.svg",...r}),Ce=M({username:C().required("Ingrese su nombre de usuario").test("test","Usuario no valido",r=>T(R,r)),password:C().required("Ingrese su contraseña")}).required();function We(){const{programConfig:r,programName:o}=Y();k();const{state:e,dispatch:s}=D(),a=Z(),{welcome_message:c}=r,{handleSubmit:n,control:i,reset:v,formState:{errors:p,isSubmitting:f}}=U({defaultValues:{username:"",password:""},resolver:B(Ce)}),_=async l=>{const h={username:l.username,password:l.password};await s(new se(h))};return g.useEffect(()=>{if(e instanceof S){const l=e.errorOrNull()?.message_to_user;l!=null&&a({message:t.jsx(K,{...l})})}},[e]),e.isLoggedIn()?t.jsx(t.Fragment,{}):t.jsxs(X,{children:[t.jsx(m,{sx:{position:"absolute",top:3,right:4},children:t.jsx(q,{})}),t.jsxs(m,{sx:{display:"flex",height:"100vh",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[t.jsx(F,{maxWidth:"sm",sx:{alignSelf:"center"},children:t.jsxs(J,{overflow:"hidden",children:[t.jsx(ae,{bgColor:"#ffffff",children:t.jsx(V,{children:t.jsx(je,{width:"180px",alt:""})})}),t.jsx(Q,{children:t.jsx("form",{noValidate:!0,onSubmit:n(_),children:t.jsxs(re,{spacing:4,children:[t.jsx(te,{size:"sm",sx:{textAlign:"center",pb:2},children:c}),(Object.keys(p).length||e.errorOrNull())&&t.jsx(m,{width:"full",children:t.jsx(oe,{status:"error",children:t.jsxs(ee,{fontSize:"sm",styleType:"none",sx:{m:0},children:[Object.keys(p).length&&Object.values(p).map((l,h)=>t.jsx(b,{children:l.message},h)),e.errorOrNull()&&t.jsx(b,{children:e.errorOrNull()?.error_description},"api_error")]})})}),t.jsx(A,{formControlInnerProps:{icon:t.jsx(y,{pointerEvents:"none",children:t.jsx(j,{as:de})})},fieldProps:{name:"username",id:"username",type:"text",placeholder:"Usuario",autoCapitalize:"off",autoComplete:"username"},formControlProps:{isDisabled:f},control:i}),t.jsx(A,{formControlInnerProps:{icon:t.jsx(y,{pointerEvents:"none",children:t.jsx(j,{as:ve})})},fieldProps:{name:"password",id:"password",type:"password",placeholder:"Contraseña",autoComplete:"current-password"},formControlProps:{isDisabled:f},control:i}),t.jsx(H,{type:"submit",width:"full",colorScheme:"blue",isLoading:f,children:"Ingresar"})]})})})]})}),t.jsx(m,{marginTop:5,textColor:"#AAA",textAlign:"center",children:o})]})]})}export{We as default};
