import{j as s,g as V,r as C}from"./emotion-element-5486c51c.browser.esm-CMT9BBIk.js";import{q as H,aS as M,aT as T,A as U,s as E,f as j,c as f,d as B,as as R,x as q,I as w,B as W}from"./auth_context-1lRrAoj9.js";import{c as Z,a as O,d as X,o as Y}from"./index.esm-CzxlHhdA.js";import{y as G}from"./utils-DQu-C9ov.js";import{V as J}from"./vo_user_name-gTZKlTBJ.js";import{u as K,s as Q,a as ee,C as re}from"./ColorModeSelector-j0gj2PXA.js";import{C as S}from"./ControlledInput-D8DKSpFc.js";import{u as te,M as oe}from"./MessageToUserDialog-DgPEqlF9.js";import{C as se}from"./ClientOnly-CruWkRVx.js";import{k as ae}from"./components-DJTbJwhK.js";import{u as ne,C as ie,a as ce}from"./chunk-YQO7BFFX-C0kTL7iy.js";import{U as le,L as k}from"./chunk-46CXQZ4E-xzSkmIKk.js";import{V as me}from"./chunk-NTCQBYKE-BT9zAAaQ.js";import{H as ue}from"./chunk-7OLJDQMT-BCYTowu1.js";import{B as g}from"./chunk-PULVB27S-DtbcLAA3.js";import{A as de}from"./chunk-3KCBMPN5--NnBMJog.js";import{I as N}from"./chunk-2ZHRCML3-siIePHBt.js";import"./app-DHK1Xtws.js";import"./chunk-6QYXN73V-D4AeCydz.js";import"./chunk-56K2BSAJ-BQuanzzh.js";import"./chunk-H46NUPBZ-BIanLneB.js";import"./chunk-6CVSDS6C-DQNwoFo1.js";import"./chunk-2OOHT3W5-rFMCTWJa.js";import"./chunk-MFVQSVQB-nS3zYPqC.js";class fe extends H{constructor(t,e){super(),this.params=t,this.errorCallback=e}async run(t,e,o,a){e(new M),(await T(this.params,o)).map({success:async n=>{const{user:c,auth_token:p}=n.data;e(new U(p,c))},error:async n=>{const c=n.info;e(new E(c)),this.errorCallback&&this.errorCallback(c)}})}}var b=j(function(t,e){const{htmlWidth:o,htmlHeight:a,alt:i,...n}=t;return s.jsx("img",{width:o,height:a,ref:e,alt:i,...n})});b.displayName="NativeImage";function pe(r,t=[]){const e=Object.assign({},r);for(const o of t)o in e&&delete e[o];return e}var P=j(function(t,e){const{fallbackSrc:o,fallback:a,src:i,srcSet:n,align:c,fit:p,loading:m,ignoreFallback:u,crossOrigin:h,fallbackStrategy:l="beforeLoadOrError",referrerPolicy:d,...I}=t,z=o!==void 0||a!==void 0,y=m!=null||u||!z,D=K({...t,crossOrigin:h,ignoreFallback:y}),F=Q(D,l),A={ref:e,objectFit:p,objectPosition:c,...y?I:pe(I,["onError","onLoad"])};return F?a||s.jsx(f.img,{as:b,className:"chakra-image__placeholder",src:o,...A}):s.jsx(f.img,{as:b,src:i,srcSet:n,crossOrigin:h,loading:m,referrerPolicy:d,className:"chakra-image",...A})});P.displayName="Image";var he=j(function(t,e){const{className:o,...a}=t,i=ne();return s.jsx(f.div,{ref:e,className:B("chakra-card__header",o),__css:i.header,...a})}),$=f("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});$.displayName="Center";var ge={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};j(function(t,e){const{axis:o="both",...a}=t;return s.jsx(f.div,{ref:e,__css:ge[o],...a,position:"absolute"})});function ve(r){return r&&typeof r=="object"&&"default"in r?r.default:r}var v=ve(C),xe=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},je=function(r,t){var e={};for(var o in r)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e},L=function(t){var e=t.color,o=e===void 0?"currentColor":e,a=t.size,i=a===void 0?24:a;t.children;var n=je(t,["color","size","children"]),c="mdi-icon "+(n.className||"");return v.createElement("svg",xe({},n,{className:c,width:i,height:i,fill:o,viewBox:"0 0 24 24"}),v.createElement("path",{d:"M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"}))},be=v.memo?v.memo(L):L,Ce=be;const Ie=V(Ce);function ye(r){return r&&typeof r=="object"&&"default"in r?r.default:r}var x=ye(C),Ae=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},we=function(r,t){var e={};for(var o in r)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e},_=function(t){var e=t.color,o=e===void 0?"currentColor":e,a=t.size,i=a===void 0?24:a;t.children;var n=we(t,["color","size","children"]),c="mdi-icon "+(n.className||"");return x.createElement("svg",Ae({},n,{className:c,width:i,height:i,fill:o,viewBox:"0 0 24 24"}),x.createElement("path",{d:"M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"}))},Oe=x.memo?x.memo(_):_,Se=Oe;const ke=V(Se),Ne=r=>s.jsx(P,{src:"/welcome/logo.svg",...r}),Le=Z({username:O().required("Ingrese su nombre de usuario").test("test","Usuario no valido",r=>G(J,r)),password:O().required("Ingrese su contraseña")}).required();function rr(){const{programConfig:r,programName:t}=ae();R();const{state:e,dispatch:o}=q(),a=te(),{welcome_message:i}=r,{handleSubmit:n,control:c,reset:p,formState:{errors:m,isSubmitting:u}}=X({defaultValues:{username:"",password:""},resolver:Y(Le)}),h=async l=>{const d={username:l.username,password:l.password};await o(new fe(d))};return C.useEffect(()=>{if(e instanceof E){const l=e.errorOrNull()?.message_to_user;l!=null&&a({message:s.jsx(oe,{...l})})}},[e]),e.isLoggedIn()?s.jsx(s.Fragment,{}):s.jsxs(se,{children:[s.jsx(g,{sx:{position:"absolute",top:3,right:4},children:s.jsx(ee,{})}),s.jsxs(g,{sx:{display:"flex",height:"100vh",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[s.jsx(re,{maxWidth:"sm",sx:{alignSelf:"center"},children:s.jsxs(ie,{overflow:"hidden",children:[s.jsx(he,{bgColor:"#ffffff",children:s.jsx($,{children:s.jsx(Ne,{width:"180px",alt:""})})}),s.jsx(ce,{children:s.jsx("form",{noValidate:!0,onSubmit:n(h),children:s.jsxs(me,{spacing:4,children:[s.jsx(ue,{size:"sm",sx:{textAlign:"center",pb:2},children:i}),(Object.keys(m).length||e.errorOrNull())&&s.jsx(g,{width:"full",children:s.jsx(de,{status:"error",children:s.jsxs(le,{fontSize:"sm",styleType:"none",sx:{m:0},children:[Object.keys(m).length&&Object.values(m).map((l,d)=>s.jsx(k,{children:l.message},d)),e.errorOrNull()&&s.jsx(k,{children:e.errorOrNull()?.error_description},"api_error")]})})}),s.jsx(S,{formControlInnerProps:{icon:s.jsx(N,{pointerEvents:"none",children:s.jsx(w,{as:Ie})})},fieldProps:{name:"username",id:"username",type:"text",placeholder:"Usuario",autoCapitalize:"off",autoComplete:"username"},formControlProps:{isDisabled:u},control:c}),s.jsx(S,{formControlInnerProps:{icon:s.jsx(N,{pointerEvents:"none",children:s.jsx(w,{as:ke})})},fieldProps:{name:"password",id:"password",type:"password",placeholder:"Contraseña",autoComplete:"current-password"},formControlProps:{isDisabled:u},control:c}),s.jsx(W,{type:"submit",width:"full",colorScheme:"blue",isLoading:u,children:"Ingresar"})]})})})]})}),s.jsx(g,{marginTop:5,textColor:"#AAA",textAlign:"center",children:t})]})]})}export{rr as default};
