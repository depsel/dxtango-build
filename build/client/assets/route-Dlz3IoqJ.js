import{j as e,u as w}from"./emotion-element-43c6fea0.browser.esm-Bukkp3pI.js";import{Q as F,av as R,U as S,R as q}from"./auth_context-By8qlCOz.js";import{a as A,V,s as U}from"./app-ChKZjo6p.js";import{S as H}from"./SettingsFormHeading-DRaop4b3.js";import{b as C,c as I,V as N,d as O,e as G}from"./index-C6Hb1dK-.js";import{u as L}from"./useDXTApiFetch-DMZ_pwG5.js";import{A as k}from"./ApiErrors-CbWmNTke.js";import{F as n,a as T}from"./FormSkeletons-C5bAoHqQ.js";import{G as g,a as s}from"./chunk-ZPFGWTBB-C6BSXP9K.js";import{D as m}from"./chunk-W7WUSNWJ-D1ck6ov6.js";import{u as $,a as z,o as B}from"./yup-DmufeRdH.js";import{a as X,b as Y}from"./app_resources-0MHmsA5u.js";import{C as f}from"./CommonCard-B6Zs7VdS.js";import{F as Q,a as J}from"./chunk-56K2BSAJ-HKDUOZgn.js";import{F as K}from"./chunk-KRPLQIP4-BIcN844u.js";import{C as W}from"./chunk-CWVAJCXJ-P8vNqRmn.js";import{C as l}from"./ControlledInput-Bfe1Y7Kq.js";import{C as D}from"./ControlledTextarea-7wwQiiGu.js";import{F as Z}from"./FormErrors-DK3bqFxa.js";import{S as ee}from"./SettingsFormButtons-Dtw3fGC3.js";import{y as M}from"./utils-DihYaFf6.js";import{c as se,a as d,d as v,e as re}from"./index.esm-DLycO5Xl.js";import{H as y}from"./chunk-7OLJDQMT-DeTsz2JD.js";import"./chunk-BL2ZZSHG-CllUrry9.js";import"./chunk-6QYXN73V-e7cXtMTs.js";import"./chunk-3ASUQ6PA-CMDtM4Gu.js";import"./chunk-ZHMYA64R-DxFJ4KrV.js";import"./chunk-2OOHT3W5-BaTWmMuR.js";import"./chunk-3Y4YXCR2-BRX7qSte.js";import"./chunk-QURMB2UJ-DZ-0JI-4.js";import"./chunk-3KCBMPN5-BSyM0bpq.js";import"./chunk-YQO7BFFX--iiPSc49.js";import"./chunk-MFVQSVQB-DALUCuvz.js";import"./chunk-7D6N5TE5-Df1Pwbuv.js";import"./chunk-6CVSDS6C-DbHhw9T-.js";import"./chunk-46CXQZ4E-3v06V3Zr.js";class te extends F{validate(a){let t=a;if(typeof t=="string"&&(t=t.trim().toLowerCase(),R(t)))return t;this.throwError(a)}}const oe=()=>e.jsx(A,{width:"full",sx:{mt:8,mb:4},children:e.jsxs(g,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"center",gap:4,children:[e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(m,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(m,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(n,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(T,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(m,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(n,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(T,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})})]})}),ie=i=>{const{fieldProps:a,formControlProps:t,formControlInnerProps:p,control:c}=i,{text:o,helperText:u,helperAction:x}=p||{},{field:{ref:j,onChange:h,value:_},fieldState:{invalid:r},formState:{errors:b}}=$({name:a.name,control:c});return e.jsxs(Q,{...t,isInvalid:r,ref:j,children:[e.jsxs(K,{alignItems:"center",children:[e.jsx(W,{...a,onChange:h,isChecked:_,children:o}),x]}),u!=null&&e.jsx(J,{children:u})]})},ne=se({smtp_host:d().required("Ingrese el host SMTP").test("valid-host","Ingrese un host SMTP válido",i=>M(te,i)),smtp_username:d().required("Ingrese el usuario SMTP"),smtp_password:d().required("Ingrese la contraseña SMTP"),smtp_port:v().required("Ingrese el puerto SMTP").typeError("Ingrese un número de puerto SMTP válido").test("is-port","Ingrese un puerto SMTP válido",i=>M(N,i)),smtp_use_tls:re().required(),auth_expiration_days:v().min(C,`El tiempo de espera debe ser mayor a ${C}`).max(I,`El tiempo de espera debe ser menor a ${I}`).required("Ingrese el tiempo de espera para logout").typeError("Ingrese el tiempo de espera para logout"),admin_email:d().required("Ingrese el correo electrónico del Administrador").email("Ingrese un correo electrónico válido"),user_warning_message_title:d().required("Ingrese el título del mensaje de advertencia"),user_warning_message_content:d().required("Ingrese el contenido del mensaje de advertencia"),user_disabled_message_title:d().required("Ingrese el título del mensaje de inhabilitación"),user_disabled_message_content:d().required("Ingrese el contenido del mensaje de inhabilitación")}).required(),ae=i=>{const{stateData:a}=i,t=X(),p=Y(),{handleSubmit:c,control:o,reset:u,setError:x,formState:{errors:j,isSubmitting:h,isSubmitSuccessful:_}}=z({defaultValues:a,resolver:B(ne)}),r=_||h,b=async E=>{(await O(E,t)).map({success:P=>{p({title:V,status:"success"}),t.navigate(S)},error:P=>{p({title:q}),x("root",{message:P.info.error_description})}})};return e.jsx("form",{noValidate:!0,onSubmit:c(b),children:e.jsxs(A,{children:[e.jsx(Z,{errors:j}),e.jsx(f,{children:e.jsxs(g,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[e.jsx(s,{colSpan:{md:2},children:e.jsx(y,{size:"sm",textTransform:"uppercase",children:"Servidor de Correos"})}),e.jsx(s,{children:e.jsx(l,{fieldProps:{name:"smtp_host",id:"smtp_host",type:"text",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Hostname SMTP"},control:o})}),e.jsx(s,{children:e.jsx(l,{fieldProps:{name:"smtp_username",id:"smtp_username",type:"text",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Usuario SMTP"},control:o})}),e.jsx(s,{children:e.jsx(l,{fieldProps:{name:"smtp_password",id:"smtp_password",type:"text",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Contraseña SMTP"},control:o})}),e.jsx(s,{children:e.jsx(l,{fieldProps:{name:"smtp_port",id:"smtp_port",type:"number",inputMode:"tel",htmlSize:5,maxLength:5,width:"auto",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Puerto SMTP"},control:o})}),e.jsx(s,{children:e.jsx(ie,{control:o,fieldProps:{id:"smtp_use_tls",name:"smtp_use_tls"},formControlInnerProps:{text:"Usar TLS"}})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(m,{})}),e.jsx(s,{children:e.jsx(l,{fieldProps:{name:"auth_expiration_days",id:"auth_expiration_days",type:"number",inputMode:"tel",htmlSize:5,maxLength:5,width:"auto",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Tiempo de espera para logout",helperText:"Expresado en días"},control:o})}),e.jsx(s,{children:e.jsx(l,{fieldProps:{name:"admin_email",id:"admin_email",type:"text",inputMode:"email",htmlSize:30,width:"auto",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Correo electrónico Administrador"},control:o})})]})}),e.jsx(f,{children:e.jsxs(g,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[e.jsx(s,{colSpan:{md:2},children:e.jsx(y,{size:"sm",textTransform:"uppercase",children:"Mensajes"})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(l,{fieldProps:{name:"user_warning_message_title",id:"user_warning_message_title",type:"text",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Título del mensaje de advertencia"},control:o})}),e.jsx(s,{colSpan:{md:2},children:"Contenido del mensaje de advertencia"}),e.jsx(s,{colSpan:{md:2},children:e.jsx(D,{fieldProps:{name:"user_warning_message_content",id:"user_warning_message_content",isDisabled:r},formControlProps:{isDisabled:r},control:o})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(m,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(l,{fieldProps:{name:"user_disabled_message_title",id:"user_disabled_message_title",type:"text",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Título del mensaje de inhabilitación"},control:o})}),e.jsx(s,{colSpan:{md:2},children:"Contenido del mensaje de inhabilitación"}),e.jsx(s,{colSpan:{md:2},children:e.jsx(D,{fieldProps:{name:"user_disabled_message_content",id:"user_disabled_message_content",isDisabled:r},formControlProps:{isDisabled:r},control:o})})]})}),e.jsx(f,{children:e.jsx(ee,{isLoading:r,hideCancelButton:!0})})]})})},le=()=>{const{state:i,retry:a}=L({...G,silent:!0});return i.map({loading:t=>e.jsx(oe,{}),error:({error:t})=>e.jsx(k,{error:t,retry:a,cancelAndNavigateTo:S}),success:t=>e.jsx(ae,{stateData:t.data})})};function Xe(){const i=w();return e.jsxs(e.Fragment,{children:[e.jsx(H,{title:U,returnButton:{buttonProps:{onClick:()=>{i(S)}}}}),e.jsx(le,{})]})}export{Xe as default};
