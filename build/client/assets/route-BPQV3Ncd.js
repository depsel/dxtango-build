import{j as r,r as P,R as D}from"./emotion-element-43c6fea0.browser.esm-CqNy1Myq.js";import{aj as w,B as G,I as K,ak as z,V as X,al as q}from"./auth_context-BcmIMa0H.js";import{T as J,i as M,j as Q,k as Y,l as m,m as Z,P as rr,n as er}from"./TextPrice-LTUXzWuW.js";import{t as sr}from"./utils-DTXYOP_7.js";import{u as tr}from"./order.api_hooks-mmBq3Dj8.js";import{l as ir}from"./app-B1a_okyL.js";import{S as nr,A as or}from"./ApiErrors-BofVVWwq.js";import{C as dr}from"./CommonErrors-Ca1Fo25T.js";import{B as x}from"./chunk-PULVB27S-DFGZ_FhU.js";import{T as c,a as h,b as a,c as e}from"./chunk-T2WCTPDH-D-1yuUFr.js";import{g as ar,P as lr}from"./index-BReOA4XD.js";import{T as cr,a as l}from"./chunk-MGVPL3OH-DUt6-qa1.js";import{F as hr}from"./chunk-KRPLQIP4-22zt2_dG.js";import{H as xr}from"./chunk-3ASUQ6PA-C9U3rhNA.js";import{S as jr}from"./chunk-VTV6N5LE-CVRITHBR.js";import{F as mr}from"./chunk-H46NUPBZ-DZttvycU.js";import{u as pr}from"./components-DVk_p40a.js";import"./chunk-2OOHT3W5-Ci3F40nI.js";import"./useDXTApiFetch-DCIa93_N.js";import"./CloseIcon-DhOj6wIL.js";import"./app_resources-DBlOodC1.js";import"./chunk-7OLJDQMT-mUIp5tuF.js";import"./vo_user_name-C34O4LAA.js";import"./chunk-7D6N5TE5-BJ4T9Sem.js";import"./chunk-56K2BSAJ-C8tXkxw9.js";import"./index-CAKzuJDV.js";const n=()=>r.jsx(nr,{width:"full",height:"20px"}),gr=()=>r.jsx(r.Fragment,{children:r.jsxs(x,{width:"full",sx:{backgroundColor:"white"},children:[r.jsx(c,{children:r.jsx(h,{children:r.jsxs(a,{children:[r.jsx(e,{width:"23%",children:r.jsx(n,{})}),r.jsx(e,{width:"18%",children:r.jsx(n,{})}),r.jsx(e,{width:"18%",children:r.jsx(n,{})}),r.jsx(e,{width:"18%",children:r.jsx(n,{})}),r.jsx(e,{width:"23%",children:r.jsx(n,{})})]})})}),r.jsx(c,{children:r.jsx(h,{children:r.jsxs(a,{children:[r.jsx(e,{width:"50%",children:r.jsx(n,{})}),r.jsx(e,{width:"50%",children:r.jsx(n,{})})]})})}),r.jsx(c,{children:r.jsx(h,{children:[...Array(10)].map((i,s)=>r.jsxs(a,{children:[r.jsx(e,{children:r.jsx(n,{})}),r.jsx(e,{children:r.jsx(n,{})}),r.jsx(e,{children:r.jsx(n,{})}),r.jsx(e,{children:r.jsx(n,{})})]},`loading-${s}`))})})]})}),ur=({handlePageBreaks:i,pageBreaks:s})=>{const t=()=>{window.print()};return P.useEffect(()=>{const o=()=>{window.scrollTo(0,0)};return window.addEventListener("beforeprint",o),()=>{window.removeEventListener("beforeprint",o)}},[]),r.jsx(hr,{bgColor:"white",className:"hidden-print",justifyContent:"start",sx:{p:4,position:"sticky",top:0,w:"100%",h:20},children:r.jsxs(xr,{children:[r.jsx(G,{onClick:t,boxShadow:"md",size:"sm",pl:6,pr:6,colorScheme:"blue",leftIcon:r.jsx(K,{as:lr}),children:z}),r.jsxs(x,{display:"flex",alignItems:"center",p:1,height:8,borderColor:"blue.500",borderWidth:1,borderRadius:"md",boxShadow:0,children:[r.jsx(jr,{id:"page_break",onChange:i,isChecked:s}),r.jsx(mr,{display:"block",htmlFor:"page_break",flexShrink:1,ml:2,mb:0,color:"blue.900",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"100%",children:rr})]})]})})},fr=i=>{const{orders:s}=i,[t,o]=P.useState(!1),d=()=>{o(!t)};return r.jsxs(x,{sx:{backgroundColor:"white",minHeight:"100vh"},children:[r.jsx(ur,{handlePageBreaks:d,pageBreaks:t}),s.map((j,p)=>{const{id:g,numero_pedido:_,fecha_alta:A,fecha_entrega:T,descuento:u,estado:C,total:k,codigo_cliente:y,nombre_cliente:E,codigo_transporte:I,nombre_transporte:O,sin_iva:S,sin_ii:B}=j.cabecera,N=p>0?r.jsx("div",{style:{pageBreakBefore:"always"}}):r.jsx(r.Fragment,{});return r.jsxs(D.Fragment,{children:[t&&N,p>0&&r.jsx(x,{className:t?"hidden-print":"",sx:{height:"40px"}}),r.jsx(J,{sx:{p:2,overflowX:"hidden"},children:r.jsxs(c,{variant:"basicPrintable",children:[r.jsxs(cr,{children:[r.jsx(a,{children:r.jsx(l,{colSpan:5,children:r.jsxs("table",{width:"100%",children:[r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("strong",{children:_})}),r.jsx("td",{style:{width:0,paddingRight:"5px"},children:"Cliente:"}),r.jsx("td",{children:r.jsx("strong",{children:M(y,E)})}),r.jsxs("td",{align:"right",children:["Emisión: ",r.jsx("strong",{children:w(A)})]})]}),r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("strong",{style:{textTransform:"uppercase"},children:ar(C)})}),r.jsx("td",{style:{width:0,paddingRight:"5px"},children:"Transporte:"}),r.jsx("td",{children:r.jsx("strong",{children:Q(I,O)})}),r.jsxs("td",{align:"right",children:["Entrega: ",r.jsx("strong",{children:w(T)})]})]})]})})}),r.jsxs(a,{children:[r.jsx(l,{width:"0px",children:"L"}),r.jsx(l,{children:"Artículo"}),r.jsx(l,{textAlign:"center",width:"80px",children:"Cantidad"}),r.jsx(l,{textAlign:"right",width:"100px",children:"Precio Unitario"}),r.jsx(l,{textAlign:"right",width:"100px",children:"Importe"})]})]}),r.jsxs(h,{children:[j.renglones!=null&&j.renglones.map((R,v)=>{const{id_articulo:F,nombre_articulo:L,codigo_articulo:$,descripcion_adicional:U,precio:H,cantidad:f,bulto:V,subtotal:W}=R,b=er(f,V);return r.jsxs(a,{children:[r.jsx(e,{children:v+1}),r.jsx(e,{children:Y(L,$,U)}),r.jsxs(e,{textAlign:"center",children:[f,b!=null&&r.jsxs(r.Fragment,{children:[" [",b,"]"]})]}),r.jsx(e,{textAlign:"right",children:r.jsx(m,{moneda:"$",precio:H})}),r.jsx(e,{textAlign:"right",children:r.jsx(m,{moneda:"$",precio:W})})]},`renglon-${g}_${F}`)}),r.jsxs(a,{children:[r.jsx(e,{colSpan:4,fontWeight:"bold",children:`TOTAL ${u>0?`CON BONIFICACIÓN ${u}% `:""} (${Z(S,B).toLocaleUpperCase()})`}),r.jsx(e,{textAlign:"right",fontWeight:"bold",children:r.jsx(m,{moneda:"$",precio:k})})]})]})]})})]},`pedido-${g}`)})]})},br=i=>{const{orders:s}=i;if(s!=null&&Array.isArray(s)){const t=[];if(s.forEach(o=>{const d=sr(()=>new X(o),null);d!=null&&t.push(d)}),t.length>0)return r.jsx(wr,{orders:t})}return r.jsx(dr,{error:ir})},wr=i=>{const{orders:s}=i,{state:t,retry:o}=tr(s);return t.map({loading:d=>r.jsx(gr,{}),error:({error:d})=>r.jsx(or,{error:d,retry:o,cancelAndNavigateTo:q}),success:d=>(d.data.sort(Pr),r.jsx(fr,{orders:d.data}))})};function Pr(i,s){const t=i.cabecera.numero_pedido,o=s.cabecera.numero_pedido;return t.localeCompare(o)}function qr(){const[i]=pr(),s=i.getAll("orderId");return r.jsx(br,{orders:s})}export{qr as default};
