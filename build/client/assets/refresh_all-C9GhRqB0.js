import{q as d,A as a,D as k,j as T,r as l,s as i,v as p,w as A}from"./auth_context-o-QFsdoP.js";class E extends d{constructor(n,o){super(),this.currentUserInfo=n,this.errorCallback=o}async run(n,o,u,m){if(!(n instanceof a))throw new k(T.INTERNAL_SERVER_ERROR,"Must be logged in");const s=l();if(s==null||n.authToken!==s){o(new i);return}(await p(n.authToken,u,!0)).map({error:e=>{const r=e.info;A(r.status)&&o(new i)},success:e=>{const r=n.userInfo,f=n.authToken,t=e.data.user,c=e.data.auth_token;(f!==c||r.timestamp_modificacion!==t.timestamp_modificacion)&&o(new a(c,t))}})}}export{E as A};
