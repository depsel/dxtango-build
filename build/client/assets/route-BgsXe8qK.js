import{j as e,u as F}from"./emotion-element-43c6fea0.browser.esm-CqNy1Myq.js";import{J as w,aF as q,U as S,Y as R}from"./auth_context-BcmIMa0H.js";import{V,q as U}from"./app-B1a_okyL.js";import{S as H}from"./SettingsFormHeading-BHfSW-Kb.js";import{b as C,c as I,V as N,d as O,e as G}from"./index-DrSWqTKG.js";import{D as m,u as L}from"./useDXTApiFetch-DCIa93_N.js";import{A as k}from"./ApiErrors-BofVVWwq.js";import{F as n,a as T}from"./FormSkeletons-C9NbYi-R.js";import{B as A}from"./chunk-PULVB27S-DFGZ_FhU.js";import{G as g,a as s}from"./chunk-ZPFGWTBB-D1BdsecE.js";import{u as $,c as z,a as l,e as D,f as B,d as X,o as Y}from"./index.esm-DRWPArKk.js";import{u as J}from"./app_resources-DBlOodC1.js";import{C as f}from"./CommonCard-CeRdMR-s.js";import{F as K,a as Q}from"./chunk-56K2BSAJ-C8tXkxw9.js";import{F as W}from"./chunk-KRPLQIP4-22zt2_dG.js";import{C as Z}from"./chunk-CWVAJCXJ-CfPCGt4p.js";import{C as d}from"./ControlledInput-CDCrsGF4.js";import{C as M}from"./ControlledTextarea-D3qNDSdo.js";import{F as ee}from"./FormErrors-Cq6m-7WG.js";import{S as se}from"./SettingsFormButtons-BvgAhPGk.js";import{y as v}from"./utils-DihYaFf6.js";import{u as re}from"./chunk-6RSEZNRH-HBxAY87Z.js";import{H as y}from"./chunk-7OLJDQMT-mUIp5tuF.js";import"./ResponsiveIconButton-Dzqr81nH.js";import"./chunk-VMD3UMGK-CjQf0NqH.js";import"./chunk-6QYXN73V-CZbxpQYs.js";import"./chunk-BL2ZZSHG-XVL5PYnd.js";import"./CloseIcon-DhOj6wIL.js";import"./components-DVk_p40a.js";import"./chunk-3ASUQ6PA-C9U3rhNA.js";import"./chunk-2OOHT3W5-Ci3F40nI.js";import"./chunk-YQO7BFFX-4WIx2Mcr.js";import"./chunk-MFVQSVQB-3P8bbuxX.js";import"./chunk-7D6N5TE5-BJ4T9Sem.js";import"./index-CAKzuJDV.js";import"./chunk-H46NUPBZ-DZttvycU.js";import"./chunk-6CVSDS6C-CZaR6dev.js";import"./chunk-3KCBMPN5-COSGWH1j.js";import"./chunk-46CXQZ4E-CX4juB_f.js";import"./chunk-3Y4YXCR2-D9PuIzMR.js";import"./chunk-QURMB2UJ-Cc-vvoFz.js";class te extends w{validate(a){let t=a;if(typeof t=="string"&&(t=t.trim().toLowerCase(),q(t)))return t;this.throwError(a)}}const oe=()=>e.jsx(A,{width:"full",sx:{mt:8,mb:4},children:e.jsxs(g,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"center",gap:4,children:[e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(m,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(m,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(n,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(T,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(m,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(n,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(T,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})})]})}),ie=i=>{const{fieldProps:a,formControlProps:t,formControlInnerProps:p,control:c}=i,{text:o,helperText:u,helperAction:x}=p||{},{field:{ref:j,onChange:h,value:_},fieldState:{invalid:r},formState:{errors:b}}=$({name:a.name,control:c});return e.jsxs(K,{...t,isInvalid:r,ref:j,children:[e.jsxs(W,{alignItems:"center",children:[e.jsx(Z,{...a,onChange:h,isChecked:_,children:o}),x]}),u!=null&&e.jsx(Q,{children:u})]})},ne=z({smtp_host:l().required("Ingrese el host SMTP").test("valid-host","Ingrese un host SMTP válido",i=>v(te,i)),smtp_username:l().required("Ingrese el usuario SMTP"),smtp_password:l().required("Ingrese la contraseña SMTP"),smtp_port:D().required("Ingrese el puerto SMTP").typeError("Ingrese un número de puerto SMTP válido").test("is-port","Ingrese un puerto SMTP válido",i=>v(N,i)),smtp_use_tls:B().required(),auth_expiration_days:D().min(C,`El tiempo de espera debe ser mayor a ${C}`).max(I,`El tiempo de espera debe ser menor a ${I}`).required("Ingrese el tiempo de espera para logout").typeError("Ingrese el tiempo de espera para logout"),admin_email:l().required("Ingrese el correo electrónico del Administrador").email("Ingrese un correo electrónico válido"),user_warning_message_title:l().required("Ingrese el título del mensaje de advertencia"),user_warning_message_content:l().required("Ingrese el contenido del mensaje de advertencia"),user_disabled_message_title:l().required("Ingrese el título del mensaje de inhabilitación"),user_disabled_message_content:l().required("Ingrese el contenido del mensaje de inhabilitación")}).required(),ae=i=>{const{stateData:a}=i,t=J(),p=re(),{handleSubmit:c,control:o,reset:u,setError:x,formState:{errors:j,isSubmitting:h,isSubmitSuccessful:_}}=X({defaultValues:a,resolver:Y(ne)}),r=_||h,b=async E=>{(await O(E,t)).map({success:P=>{p({title:V,status:"success"}),t.navigate(S)},error:P=>{p({title:R}),x("root",{message:P.info.error_description})}})};return e.jsx("form",{noValidate:!0,onSubmit:c(b),children:e.jsxs(A,{children:[e.jsx(ee,{errors:j}),e.jsx(f,{children:e.jsxs(g,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[e.jsx(s,{colSpan:{md:2},children:e.jsx(y,{size:"sm",textTransform:"uppercase",children:"Servidor de Correos"})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"smtp_host",id:"smtp_host",type:"text",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Hostname SMTP"},control:o})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"smtp_username",id:"smtp_username",type:"text",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Usuario SMTP"},control:o})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"smtp_password",id:"smtp_password",type:"text",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Contraseña SMTP"},control:o})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"smtp_port",id:"smtp_port",type:"number",inputMode:"tel",htmlSize:5,maxLength:5,width:"auto",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Puerto SMTP"},control:o})}),e.jsx(s,{children:e.jsx(ie,{control:o,fieldProps:{id:"smtp_use_tls",name:"smtp_use_tls"},formControlInnerProps:{text:"Usar TLS"}})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(m,{})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"auth_expiration_days",id:"auth_expiration_days",type:"number",inputMode:"tel",htmlSize:5,maxLength:5,width:"auto",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Tiempo de espera para logout",helperText:"Expresado en días"},control:o})}),e.jsx(s,{children:e.jsx(d,{fieldProps:{name:"admin_email",id:"admin_email",type:"text",inputMode:"email",htmlSize:30,width:"auto",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Correo electrónico Administrador"},control:o})})]})}),e.jsx(f,{children:e.jsxs(g,{templateColumns:{base:"1fr",md:"repeat(2,1fr)"},alignItems:"start",gap:4,children:[e.jsx(s,{colSpan:{md:2},children:e.jsx(y,{size:"sm",textTransform:"uppercase",children:"Mensajes"})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(d,{fieldProps:{name:"user_warning_message_title",id:"user_warning_message_title",type:"text",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Título del mensaje de advertencia"},control:o})}),e.jsx(s,{colSpan:{md:2},children:"Contenido del mensaje de advertencia"}),e.jsx(s,{colSpan:{md:2},children:e.jsx(M,{fieldProps:{name:"user_warning_message_content",id:"user_warning_message_content",isDisabled:r},formControlProps:{isDisabled:r},control:o})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(m,{})}),e.jsx(s,{colSpan:{md:2},children:e.jsx(d,{fieldProps:{name:"user_disabled_message_title",id:"user_disabled_message_title",type:"text",isDisabled:r},formControlProps:{isDisabled:r},formControlInnerProps:{label:"Título del mensaje de inhabilitación"},control:o})}),e.jsx(s,{colSpan:{md:2},children:"Contenido del mensaje de inhabilitación"}),e.jsx(s,{colSpan:{md:2},children:e.jsx(M,{fieldProps:{name:"user_disabled_message_content",id:"user_disabled_message_content",isDisabled:r},formControlProps:{isDisabled:r},control:o})})]})}),e.jsx(f,{children:e.jsx(se,{isLoading:r,hideCancelButton:!0})})]})})},le=()=>{const{state:i,retry:a}=L({...G,silent:!0});return i.map({loading:t=>e.jsx(oe,{}),error:({error:t})=>e.jsx(k,{error:t,retry:a,cancelAndNavigateTo:S}),success:t=>e.jsx(ae,{stateData:t.data})})};function We(){const i=F();return e.jsxs(e.Fragment,{children:[e.jsx(H,{title:U,returnButton:{buttonProps:{onClick:()=>{i(S)}}}}),e.jsx(le,{})]})}export{We as default};
