import{j as e,r as u,R as oe}from"./emotion-element-43c6fea0.browser.esm-CqNy1Myq.js";import{ak as T,al as ae,B as de,I as le,am as ce,V as xe,an as he}from"./auth_context-BPNKm5C_.js";import{T as je,i as v,j as k,k as me,l as g,m as pe,P as ge,n as fe,o as A}from"./TextPrice-BpaUIUlQ.js";import{t as ue}from"./utils-DTXYOP_7.js";import{u as be}from"./order.api_hooks-BMg3wn5Q.js";import{l as we}from"./app-CX69rDqm.js";import{S as _e,A as Ne}from"./ApiErrors-DQxu8cuC.js";import{C as Pe}from"./CommonErrors-ANn-F17-.js";import{B as m}from"./chunk-PULVB27S-CjXp21rs.js";import{T as h,a as j,b as d,c as r}from"./chunk-T2WCTPDH-Dq_zjQt4.js";import{g as Te,P as ve}from"./index-BUXJlPvv.js";import{T as ke,a as l}from"./chunk-MGVPL3OH-DpP-FJ9z.js";import{G as Ae,a as f}from"./chunk-ZPFGWTBB-BGOvs2SN.js";import{F as Ce}from"./chunk-KRPLQIP4-BuYv1GpP.js";import{H as Ie}from"./chunk-3ASUQ6PA-hNB_nry7.js";import{S as Ee}from"./chunk-VTV6N5LE-DVEjuiDF.js";import{F as Se}from"./chunk-H46NUPBZ-CEXsk7m2.js";import{u as ye}from"./components-F5Cv7EYO.js";import"./chunk-2OOHT3W5-U8fop6km.js";import"./useDXTApiFetch-DJJQmcPU.js";import"./CloseIcon-DhOj6wIL.js";import"./app_resources-BncH8wDZ.js";import"./chunk-7OLJDQMT-Dt4RFKr6.js";import"./vo_user_name-Bhswf9ko.js";import"./chunk-7D6N5TE5-Bi3ngImC.js";import"./chunk-56K2BSAJ-GUqegmVg.js";import"./index-CAKzuJDV.js";const o=()=>e.jsx(_e,{width:"full",height:"20px"}),Be=()=>e.jsx(e.Fragment,{children:e.jsxs(m,{width:"full",sx:{backgroundColor:"white"},children:[e.jsx(h,{children:e.jsx(j,{children:e.jsxs(d,{children:[e.jsx(r,{width:"23%",children:e.jsx(o,{})}),e.jsx(r,{width:"18%",children:e.jsx(o,{})}),e.jsx(r,{width:"18%",children:e.jsx(o,{})}),e.jsx(r,{width:"18%",children:e.jsx(o,{})}),e.jsx(r,{width:"23%",children:e.jsx(o,{})})]})})}),e.jsx(h,{children:e.jsx(j,{children:e.jsxs(d,{children:[e.jsx(r,{width:"50%",children:e.jsx(o,{})}),e.jsx(r,{width:"50%",children:e.jsx(o,{})})]})})}),e.jsx(h,{children:e.jsx(j,{children:[...Array(10)].map((i,s)=>e.jsxs(d,{children:[e.jsx(r,{children:e.jsx(o,{})}),e.jsx(r,{children:e.jsx(o,{})}),e.jsx(r,{children:e.jsx(o,{})}),e.jsx(r,{children:e.jsx(o,{})})]},`loading-${s}`))})})]})}),Oe=({handlePageBreaks:i,pageBreaks:s})=>{const a=()=>{window.print()};return u.useEffect(()=>{const n=()=>{window.scrollTo(0,0)};return window.addEventListener("beforeprint",n),()=>{window.removeEventListener("beforeprint",n)}},[]),e.jsx(Ce,{bgColor:"white",className:"hidden-print",justifyContent:"start",sx:{p:4,position:"sticky",top:0,w:"100%",h:20},children:e.jsxs(Ie,{children:[e.jsx(de,{onClick:a,boxShadow:"md",size:"sm",pl:6,pr:6,colorScheme:"blue",leftIcon:e.jsx(le,{as:ve}),children:ce}),e.jsxs(m,{display:"flex",alignItems:"center",p:1,height:8,borderColor:"blue.500",borderWidth:1,borderRadius:"md",boxShadow:0,children:[e.jsx(Ee,{id:"page_break",onChange:i,isChecked:s}),e.jsx(Se,{display:"block",htmlFor:"page_break",flexShrink:1,ml:2,mb:0,color:"blue.900",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"100%",children:ge})]})]})})},Re=i=>{const{orders:s,fixedPageWidth:a}=i,[n,c]=u.useState(1),[t,I]=u.useState(!1),E=()=>{I(!t)};return e.jsxs(m,{sx:{backgroundColor:"white",minHeight:"100vh",transform:`scale(${n})`},children:[e.jsx(Oe,{handlePageBreaks:E,pageBreaks:t}),s.map((p,b)=>{const{id:w,numero_pedido:S,fecha_hora_ingreso:_,fecha_entrega:y,descuento:x,estado:B,total:O,codigo_cliente:R,nombre_cliente:F,direccion_cliente:L,localidad_cliente:W,telefono_cliente:$,codigo_vendedor:D,nombre_vendedor:V,codigo_transporte:G,nombre_transporte:H,codigo_deposito:U,nombre_deposito:K,sin_iva:X,sin_ii:z}=p.cabecera,q=b>0?e.jsx("div",{style:{pageBreakBefore:"always"}}):e.jsx(e.Fragment,{});return e.jsxs(oe.Fragment,{children:[t&&q,b>0&&e.jsx(m,{className:t?"hidden-print":"",sx:{height:"40px"}}),e.jsx(je,{sx:{p:2,overflowX:"hidden"},children:e.jsxs(h,{variant:"basicPrintable",children:[e.jsxs(ke,{children:[e.jsx(d,{children:e.jsx(l,{colSpan:5,children:e.jsxs(Ae,{className:"order_print",templateColumns:"min-content auto max-content",gap:4,children:[e.jsx(f,{children:e.jsxs("table",{width:"auto",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Número"}),e.jsx("td",{className:"v",children:e.jsx("strong",{children:S})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Estado"}),e.jsx("td",{className:"v",children:e.jsx("strong",{style:{textTransform:"uppercase"},children:Te(B)})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Ingreso"}),e.jsx("td",{className:"v",children:e.jsx("strong",{children:T(_)})})]}),e.jsxs("tr",{children:[e.jsx("td",{}),e.jsx("td",{className:"v",children:e.jsx("strong",{children:ae(_)})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Entrega"}),e.jsx("td",{className:"v",children:e.jsx("strong",{children:T(y)})})]})]})}),e.jsx(f,{display:"flex",justifyContent:"center",alignItems:"flex-start",minWidth:"250px",children:e.jsxs("table",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Cliente"}),e.jsx("td",{className:"v word-break-all",children:e.jsx("strong",{children:v(R,F)})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Direccion"}),e.jsx("td",{className:"v word-break-all",children:e.jsx("strong",{children:L??"-"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Localidad"}),e.jsx("td",{className:"v word-break-all",children:e.jsx("strong",{children:W??"-"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Teléfono"}),e.jsx("td",{className:"v word-break-all",children:e.jsx("strong",{children:$??"-"})})]})]})}),e.jsx(f,{width:"fit-content",maxWidth:"250px",children:e.jsxs("table",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Vendedor"}),e.jsx("td",{className:"v word-break-all",children:e.jsx("strong",{children:v(D,V)})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Deposito"}),e.jsx("td",{className:"v word-break-all",children:e.jsx("strong",{children:k(U,K)})}),e.jsx("td",{})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Transporte"}),e.jsx("td",{className:"v word-break-all",children:e.jsx("strong",{children:k(G,H)})})]})]})})]})})}),e.jsxs(d,{children:[e.jsx(l,{width:"0px",children:"L"}),e.jsx(l,{children:"Artículo"}),e.jsx(l,{textAlign:"right",width:"100px",children:"Bonificado"}),e.jsx(l,{textAlign:"center",width:"80px",children:"Cantidad"}),e.jsx(l,{textAlign:"right",width:"100px",children:"Subtotal"})]})]}),e.jsxs(j,{children:[p.renglones!=null&&p.renglones.map((J,M)=>{const{id_articulo:Q,nombre_articulo:Y,codigo_articulo:Z,descripcion_adicional:ee,precio:re,cantidad:N,bulto:se,subtotal:te}=J,P=fe(N,se),ie=A(re,x),ne=A(te,x);return e.jsxs(d,{children:[e.jsx(r,{children:M+1}),e.jsx(r,{children:me(Y,Z,ee)}),e.jsx(r,{textAlign:"right",children:e.jsx(g,{moneda:"$",precio:ie})}),e.jsxs(r,{textAlign:"center",children:[N,P!=null&&e.jsxs(e.Fragment,{children:[" [",P,"]"]})]}),e.jsx(r,{textAlign:"right",children:e.jsx(g,{moneda:"$",precio:ne})})]},`renglon-${w}_${Q}`)}),e.jsxs(d,{children:[e.jsx(r,{colSpan:4,fontWeight:"bold",children:`TOTAL ${x>0?`CON BONIFICACIÓN ${x}% `:""} (${pe(X,z).toLocaleUpperCase()})`}),e.jsx(r,{textAlign:"right",fontWeight:"bold",children:e.jsx(g,{moneda:"$",precio:O})})]})]})]})})]},`pedido-${w}`)})]})},Fe=i=>{const{orders:s,fixedPageWidth:a}=i;if(s!=null&&Array.isArray(s)){const n=[];if(s.forEach(c=>{const t=ue(()=>new xe(c),null);t!=null&&n.push(t)}),n.length>0)return e.jsx(Le,{orders:n,fixedPageWidth:a})}return e.jsx(Pe,{error:we})},Le=i=>{const{orders:s,fixedPageWidth:a}=i,{state:n,retry:c}=be(s);return n.map({loading:t=>e.jsx(Be,{}),error:({error:t})=>e.jsx(Ne,{error:t,retry:c,cancelAndNavigateTo:he}),success:t=>(t.data.sort(We),e.jsx(Re,{orders:t.data,fixedPageWidth:a}))})};function We(i,s){const a=i.cabecera.numero_pedido,n=s.cabecera.numero_pedido;return a.localeCompare(n)}const C=1920,hr=()=>[{charset:"utf-8"},{name:"viewport",content:`width=${C}, initial-scale=1.0`}];function jr(){const[i]=ye(),s=i.getAll("orderId");return e.jsx(Fe,{orders:s,fixedPageWidth:C})}export{jr as default,hr as meta};
