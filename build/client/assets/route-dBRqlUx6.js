import{r as j,j as s,a as P}from"./emotion-element-43c6fea0.browser.esm-V7CwUVk-.js";import{_ as g,Q as b,T as A,W as c,X as R}from"./auth_context-BBDV2-qW.js";import{B as V,C as E}from"./app-BMvraJRd.js";import{S as I}from"./SettingsFormHeading-BZPNDeWv.js";import{a as y,b as F}from"./app_resources-CxShxcx8.js";import{A as O}from"./refresh_all-B81RH04G.js";import{c as q,a as m,b as v,d as D,o as N}from"./index.esm-SP9Jm6Nz.js";import{C as l}from"./CommonCard-CrzQbbIu.js";import{F as G}from"./FormErrors-5HYi3DVI.js";import{d as T,V as W,P as p}from"./vo_dxt_password-W93vgryN.js";import{S as B}from"./SettingsFormButtons-BuGsXUqX.js";import{y as H}from"./utils-DihYaFf6.js";import{G as L,a as d}from"./chunk-ZPFGWTBB-BQOfC-td.js";import{C as $}from"./chunk-5MKCW436-C9Q5EsRW.js";import"./chunk-KRPLQIP4-NJec_PE4.js";import"./chunk-7OLJDQMT-3EhHOSPR.js";import"./chunk-6QYXN73V-BKD6YrO0.js";import"./chunk-3Y4YXCR2-DS9dcu0f.js";import"./chunk-QURMB2UJ-8Wtwm6sR.js";import"./chunk-3KCBMPN5-70uOg14b.js";import"./chunk-56K2BSAJ-ByH33m4W.js";import"./chunk-YQO7BFFX-B4KLri48.js";import"./chunk-MFVQSVQB-BInMUJ5Q.js";import"./chunk-46CXQZ4E-Cu23NgCw.js";import"./ControlledInput-Bw-P79we.js";import"./chunk-6CVSDS6C-EjyqZFPp.js";import"./chunk-2ZHRCML3-DK3i-inn.js";import"./chunk-Z6RXEUPO-DSTG9QiY.js";const U=()=>{const[r,a]=j.useState(null);return{yupValidationSchema:q({old_password:m().required("Ingrese su contaseña actual"),new_password:m().required("Ingrese su nueva contraseña").test("password","Formato de contraseña no válido",t=>{if(t!=""&&t!=null){let o=T(t);return g.isEqual(r,o)||a(o),H(W,t)}return!0}),new_password_repeat:m().required("Repita su nueva contraseña").oneOf([v("new_password")],"Las contraseñas deben coincidir")}).required(),passwordStatus:r}},X=()=>{const r=y(),a=F(),{yupValidationSchema:u,passwordStatus:t}=U(),{handleSubmit:o,control:n,reset:k,setError:w,formState:{errors:f,isSubmitting:_,isSubmitSuccessful:S}}=D({defaultValues:{old_password:"",new_password:"",new_password_repeat:""},resolver:N(u)}),e=S||_,x=async h=>{const{new_password_repeat:M,...C}=h;(await b(C,r)).map({success:i=>{a({title:A,status:"success"}),r.authDispatch(new O(i.data.user)),r.navigate(c)},error:i=>{a({title:R,status:"error"}),w("root",{message:i.info.error_description})}})};return s.jsx("form",{noValidate:!0,onSubmit:o(x),children:s.jsxs(V,{children:[s.jsx(G,{errors:f}),s.jsx(l,{children:s.jsxs(L,{templateColumns:"1fr",alignItems:"start",gap:4,children:[s.jsx(d,{children:s.jsx(p,{fieldProps:{name:"old_password",id:"old_password"},formControlInnerProps:{label:"Contraseña Actual"},disableForm:e,control:n})}),s.jsx(d,{children:s.jsx(p,{fieldProps:{name:"new_password",id:"new_password"},formControlInnerProps:{label:"Nueva contraseña"},passwordStatus:t,disableForm:e,control:n})}),s.jsx(d,{children:s.jsx(p,{fieldProps:{name:"new_password_repeat",id:"new_password_repeat"},formControlInnerProps:{label:"Confirmar nueva contraseña"},disableForm:e,control:n})})]})}),s.jsx(l,{children:s.jsx(B,{isLoading:e})})]})})};function bs(){const r=P();return s.jsxs($,{maxW:"2xl",sx:{my:4},children:[s.jsx(I,{title:E,returnButton:{buttonProps:{onClick:()=>{r(c)}}}}),s.jsx(X,{})]})}export{bs as default};
