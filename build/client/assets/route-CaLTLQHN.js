import{j as r,r as P,R as U}from"./emotion-element-43c6fea0.browser.esm-CqNy1Myq.js";import{aj as b,B as V,I as W,ak as D,V as G,al as K}from"./auth_context-BcmIMa0H.js";import{T as z,i as X,j as q,k as J,l as m,P as M,m as Q}from"./TextPrice-8bfzlbFQ.js";import{t as Y}from"./utils-DTXYOP_7.js";import{u as Z}from"./order.api_hooks-CvgWT8Q3.js";import{l as rr}from"./app-B1a_okyL.js";import{S as er,A as sr}from"./ApiErrors-BofVVWwq.js";import{C as ir}from"./CommonErrors-Ca1Fo25T.js";import{B as x}from"./chunk-PULVB27S-DFGZ_FhU.js";import{T as l,a as c,b as d,c as e}from"./chunk-T2WCTPDH-D-1yuUFr.js";import{g as tr,P as nr}from"./index-C3akcJfi.js";import{T as or,a as h}from"./chunk-MGVPL3OH-DUt6-qa1.js";import{F as ar}from"./chunk-KRPLQIP4-22zt2_dG.js";import{H as dr}from"./chunk-3ASUQ6PA-C9U3rhNA.js";import{S as lr}from"./chunk-VTV6N5LE-CVRITHBR.js";import{F as cr}from"./chunk-H46NUPBZ-DZttvycU.js";import{u as hr}from"./components-DVk_p40a.js";import"./chunk-2OOHT3W5-Ci3F40nI.js";import"./useDXTApiFetch-DCIa93_N.js";import"./CloseIcon-DhOj6wIL.js";import"./app_resources-DBlOodC1.js";import"./chunk-7OLJDQMT-mUIp5tuF.js";import"./vo_user_name-C34O4LAA.js";import"./chunk-7D6N5TE5-BJ4T9Sem.js";import"./chunk-56K2BSAJ-C8tXkxw9.js";import"./index-CAKzuJDV.js";const t=()=>r.jsx(er,{width:"full",height:"20px"}),xr=()=>r.jsx(r.Fragment,{children:r.jsxs(x,{width:"full",sx:{backgroundColor:"white"},children:[r.jsx(l,{children:r.jsx(c,{children:r.jsxs(d,{children:[r.jsx(e,{width:"23%",children:r.jsx(t,{})}),r.jsx(e,{width:"18%",children:r.jsx(t,{})}),r.jsx(e,{width:"18%",children:r.jsx(t,{})}),r.jsx(e,{width:"18%",children:r.jsx(t,{})}),r.jsx(e,{width:"23%",children:r.jsx(t,{})})]})})}),r.jsx(l,{children:r.jsx(c,{children:r.jsxs(d,{children:[r.jsx(e,{width:"50%",children:r.jsx(t,{})}),r.jsx(e,{width:"50%",children:r.jsx(t,{})})]})})}),r.jsx(l,{children:r.jsx(c,{children:[...Array(10)].map((n,s)=>r.jsxs(d,{children:[r.jsx(e,{children:r.jsx(t,{})}),r.jsx(e,{children:r.jsx(t,{})}),r.jsx(e,{children:r.jsx(t,{})}),r.jsx(e,{children:r.jsx(t,{})})]},`loading-${s}`))})})]})}),jr=({handlePageBreaks:n,pageBreaks:s})=>{const i=()=>{window.print()};return P.useEffect(()=>{const a=()=>{window.scrollTo(0,0)};return window.addEventListener("beforeprint",a),()=>{window.removeEventListener("beforeprint",a)}},[]),r.jsx(ar,{bgColor:"white",className:"hidden-print",justifyContent:"start",sx:{p:4,position:"sticky",top:0,w:"100%",h:20},children:r.jsxs(dr,{children:[r.jsx(V,{onClick:i,boxShadow:"md",size:"sm",pl:6,pr:6,colorScheme:"blue",leftIcon:r.jsx(W,{as:nr}),children:D}),r.jsxs(x,{display:"flex",alignItems:"center",p:1,height:8,borderColor:"blue.500",borderWidth:1,borderRadius:"md",boxShadow:0,children:[r.jsx(lr,{id:"page_break",onChange:n,isChecked:s}),r.jsx(cr,{display:"block",htmlFor:"page_break",flexShrink:1,ml:2,mb:0,color:"blue.900",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"100%",children:M})]})]})})},mr=n=>{const{orders:s}=n,[i,a]=P.useState(!1),o=()=>{a(!i)};return r.jsxs(x,{sx:{backgroundColor:"white",minHeight:"100vh"},children:[r.jsx(jr,{handlePageBreaks:o,pageBreaks:i}),s.map((j,p)=>{const{id:g,numero_pedido:A,fecha_alta:_,fecha_entrega:T,descuento:f,estado:k,total:E,codigo_cliente:C,nombre_cliente:I,codigo_transporte:B,nombre_transporte:O}=j.cabecera,S=p>0?r.jsx("div",{style:{pageBreakBefore:"always"}}):r.jsx(r.Fragment,{});return r.jsxs(U.Fragment,{children:[i&&S,p>0&&r.jsx(x,{className:i?"hidden-print":"",sx:{height:"40px"}}),r.jsxs(z,{sx:{p:2,overflowX:"hidden"},children:[r.jsx(l,{variant:"basicPrintable",children:r.jsx(c,{children:r.jsxs(d,{children:[r.jsxs(e,{width:"23%",children:["Pedido: ",r.jsx("strong",{children:A})]}),r.jsxs(e,{width:"18%",children:["Emisión: ",r.jsx("strong",{children:b(_)})]}),r.jsxs(e,{width:"18%",children:["Entrega: ",r.jsx("strong",{children:b(T)})]}),r.jsx(e,{width:"18%",children:f!=0&&r.jsxs(r.Fragment,{children:["Bonificación: ",r.jsxs("strong",{children:[f,"%"]})]})}),r.jsxs(e,{width:"23%",children:["Estado: ",r.jsx("strong",{style:{textTransform:"uppercase"},children:tr(k)})]})]})})}),r.jsx(l,{variant:"basicPrintable",children:r.jsx(c,{children:r.jsxs(d,{children:[r.jsxs(e,{width:"50%",children:["Cliente: ",r.jsx("strong",{children:X(C,I)})]}),r.jsxs(e,{width:"50%",children:["Transporte: ",r.jsx("strong",{children:q(B,O)})]})]})})}),j.renglones!=null&&r.jsxs(l,{variant:"basicPrintable",children:[r.jsx(or,{children:r.jsxs(d,{children:[r.jsx(h,{children:"Artículo"}),r.jsx(h,{textAlign:"center",width:"80px",children:"Cantidad"}),r.jsx(h,{textAlign:"right",width:"100px",children:"Precio Unitario"}),r.jsx(h,{textAlign:"right",width:"100px",children:"Importe"})]})}),r.jsxs(c,{children:[j.renglones.map(y=>{const{id_articulo:v,nombre_articulo:F,codigo_articulo:N,descripcion_adicional:R,precio:L,cantidad:u,bulto:$,subtotal:H}=y,w=Q(u,$);return r.jsxs(d,{children:[r.jsx(e,{children:J(F,N,R)}),r.jsxs(e,{textAlign:"center",children:[u,w!=null&&r.jsxs(r.Fragment,{children:[" [",w,"]"]})]}),r.jsx(e,{textAlign:"right",children:r.jsx(m,{moneda:"$",precio:L})}),r.jsx(e,{textAlign:"right",children:r.jsx(m,{moneda:"$",precio:H})})]},`renglon-${g}_${v}`)}),r.jsxs(d,{children:[r.jsx(e,{colSpan:3,fontWeight:"bold",children:"TOTAL CON BONIFICACIÓN"}),r.jsx(e,{textAlign:"right",fontWeight:"bold",children:r.jsx(m,{moneda:"$",precio:E})})]})]})]})]})]},`pedido-${g}`)})]})},pr=n=>{const{orders:s}=n;if(s!=null&&Array.isArray(s)){const i=[];if(s.forEach(a=>{const o=Y(()=>new G(a),null);o!=null&&i.push(o)}),i.length>0)return r.jsx(gr,{orders:i})}return r.jsx(ir,{error:rr})},gr=n=>{const{orders:s}=n,{state:i,retry:a}=Z(s);return i.map({loading:o=>r.jsx(xr,{}),error:({error:o})=>r.jsx(sr,{error:o,retry:a,cancelAndNavigateTo:K}),success:o=>r.jsx(mr,{orders:o.data})})};function Dr(){const[n]=hr(),s=n.getAll("orderId");return r.jsx(pr,{orders:s})}export{Dr as default};
