import{j as e,r as N,R as ge}from"./emotion-element-5486c51c.browser.esm-CMT9BBIk.js";import{am as C,an as ue,B as fe,I as be,ao as we,V as _e,ap as Ne}from"./auth_context-CCfWU2Jo.js";import{T as Pe,i as S,j as E,k as ve,l as w,P as Te,m as Ae,n as ye,o as B}from"./TextPrice-pYuEWncP.js";import{t as Ie}from"./utils-DTXYOP_7.js";import{u as ke}from"./order.api_hooks-DBtEYjHv.js";import{l as Ce}from"./app-DHK1Xtws.js";import{S as Se,A as Ee}from"./ApiErrors-Blpol96Y.js";import{C as Be}from"./CommonErrors-Dv5kaEHh.js";import{B as m}from"./chunk-PULVB27S-C1tz_n3L.js";import{T as j,a as c,b as o,c as s}from"./chunk-T2WCTPDH-B3SegIkI.js";import{o as Oe,g as Le,P as Fe}from"./index-BdVeZ32W.js";import{T as Re,a as d}from"./chunk-MGVPL3OH-DdtIvv8f.js";import{G as We,a as _}from"./chunk-ZPFGWTBB-Bu2gzu07.js";import{F as De}from"./chunk-KRPLQIP4-Duu5zv9H.js";import{H as $e}from"./chunk-3ASUQ6PA-BkEgKCWb.js";import{S as Ve}from"./chunk-VTV6N5LE-DMsBM71Z.js";import{F as Ge}from"./chunk-H46NUPBZ-CGUTFX_3.js";import{u as He}from"./components-BuCL6aou.js";import"./chunk-2OOHT3W5-CC38uFWT.js";import"./useDXTApiFetch-D7fvlkDE.js";import"./CloseIcon-B6Be6esX.js";import"./app_resources-Di8KxAHS.js";import"./chunk-7OLJDQMT-DqhdIuo6.js";import"./chunk-W7WUSNWJ-CwvPeB9a.js";import"./vo_user_name-DRov8-rC.js";import"./chunk-7D6N5TE5-BjI2zV3K.js";import"./chunk-56K2BSAJ-Bys-b2nt.js";import"./index-BtnUei1e.js";import"./index-DdrsuNi1.js";const l=()=>e.jsx(Se,{width:"full",height:"20px"}),Ue=()=>e.jsx(e.Fragment,{children:e.jsxs(m,{width:"full",sx:{backgroundColor:"white"},children:[e.jsx(j,{children:e.jsx(c,{children:e.jsxs(o,{children:[e.jsx(s,{width:"23%",children:e.jsx(l,{})}),e.jsx(s,{width:"18%",children:e.jsx(l,{})}),e.jsx(s,{width:"18%",children:e.jsx(l,{})}),e.jsx(s,{width:"18%",children:e.jsx(l,{})}),e.jsx(s,{width:"23%",children:e.jsx(l,{})})]})})}),e.jsx(j,{children:e.jsx(c,{children:e.jsxs(o,{children:[e.jsx(s,{width:"50%",children:e.jsx(l,{})}),e.jsx(s,{width:"50%",children:e.jsx(l,{})})]})})}),e.jsx(j,{children:e.jsx(c,{children:[...Array(10)].map((t,r)=>e.jsxs(o,{children:[e.jsx(s,{children:e.jsx(l,{})}),e.jsx(s,{children:e.jsx(l,{})}),e.jsx(s,{children:e.jsx(l,{})}),e.jsx(s,{children:e.jsx(l,{})})]},`loading-${r}`))})})]})}),Ke=({handlePageBreaks:t,pageBreaks:r})=>{const a=()=>{window.print()};return N.useEffect(()=>{const i=()=>{window.scrollTo(0,0)};return window.addEventListener("beforeprint",i),()=>{window.removeEventListener("beforeprint",i)}},[]),e.jsx(De,{bgColor:"white",className:"hidden-print",justifyContent:"start",sx:{p:4,position:"sticky",top:0,w:"100%",h:20},children:e.jsxs($e,{children:[e.jsx(fe,{onClick:a,boxShadow:"md",size:"sm",pl:6,pr:6,colorScheme:"blue",leftIcon:e.jsx(be,{as:Fe}),children:we}),e.jsxs(m,{display:"flex",alignItems:"center",p:1,height:8,borderColor:"blue.500",borderWidth:1,borderRadius:"md",boxShadow:0,children:[e.jsx(Ve,{id:"page_break",onChange:t,isChecked:r}),e.jsx(Ge,{display:"block",htmlFor:"page_break",flexShrink:1,ml:2,mb:0,color:"blue.900",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"100%",children:Te})]})]})})},Me=t=>{const{orders:r,fixedPageWidth:a}=t,[i,x]=N.useState(1),[n,L]=N.useState(!1),F=()=>{L(!n)};return e.jsxs(m,{sx:{backgroundColor:"white",minHeight:"100vh",transform:`scale(${i})`},children:[e.jsx(Ke,{handlePageBreaks:F,pageBreaks:n}),r.map((p,P)=>{const{id:v,numero_pedido:R,fecha_hora_ingreso:T,fecha_entrega:g,descuento:h,estado:W,total:D,codigo_cliente:$,nombre_cliente:V,direccion_cliente:G,localidad_cliente:H,telefono_cliente:U,codigo_vendedor:K,nombre_vendedor:M,codigo_transporte:X,nombre_transporte:z,codigo_deposito:q,nombre_deposito:J,leyenda1:Q,leyenda2:Y,leyenda3:Z,leyenda4:ee,leyenda5:se,mensaje_interno:A,cliente_exento_iva:re,cliente_exento_ii:ne}=p.cabecera,y=Oe(Q,Y,Z,ee,se),te=y.length>0,ie=A!=null,le=Ae(re,ne),oe=P>0?e.jsx("div",{style:{pageBreakBefore:"always"}}):e.jsx(e.Fragment,{});return e.jsxs(ge.Fragment,{children:[n&&oe,P>0&&e.jsx(m,{className:n?"hidden-print":"",sx:{height:"40px"}}),e.jsx(Pe,{sx:{p:2,overflowX:"hidden"},children:e.jsxs(j,{variant:"basicPrintable",children:[e.jsxs(Re,{children:[e.jsx(o,{children:e.jsx(d,{colSpan:5,children:e.jsxs(We,{className:"order_print",templateColumns:"min-content auto max-content",gap:4,children:[e.jsx(_,{children:e.jsxs("table",{width:"auto",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Número"}),e.jsx("td",{className:"v",children:e.jsx("strong",{children:R})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Estado"}),e.jsx("td",{className:"v",children:e.jsx("strong",{style:{textTransform:"uppercase"},children:Le(W)})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Ingreso"}),e.jsx("td",{className:"v",children:e.jsx("strong",{children:C(T)})})]}),e.jsxs("tr",{children:[e.jsx("td",{}),e.jsx("td",{className:"v",children:e.jsx("strong",{children:ue(T)})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:g!=null&&e.jsx(e.Fragment,{children:"Entrega"})}),e.jsx("td",{className:"v",children:g!=null&&e.jsx("strong",{children:C(g)})})]})]})}),e.jsx(_,{display:"flex",justifyContent:"center",alignItems:"flex-start",minWidth:"250px",children:e.jsxs("table",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Cliente"}),e.jsx("td",{className:"v word-break-all",children:e.jsx("strong",{children:S($,V)})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Direccion"}),e.jsx("td",{className:"v word-break-all",children:e.jsx("strong",{children:G??"-"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Localidad"}),e.jsx("td",{className:"v word-break-all",children:e.jsx("strong",{children:H??"-"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Teléfono"}),e.jsx("td",{className:"v word-break-all",children:e.jsx("strong",{children:U??"-"})})]})]})}),e.jsx(_,{width:"fit-content",maxWidth:"250px",children:e.jsxs("table",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Vendedor"}),e.jsx("td",{className:"v word-break-all",children:e.jsx("strong",{children:S(K,M)})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Deposito"}),e.jsx("td",{className:"v word-break-all",children:e.jsx("strong",{children:E(q,J)})}),e.jsx("td",{})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"l",children:"Transporte"}),e.jsx("td",{className:"v word-break-all",children:e.jsx("strong",{children:E(X,z)})})]})]})})]})})}),e.jsxs(o,{children:[e.jsx(d,{width:"0px",children:"L"}),e.jsx(d,{children:"Artículo"}),e.jsx(d,{textAlign:"right",width:"100px",children:"Bonificado"}),e.jsx(d,{textAlign:"center",width:"80px",children:"Cantidad"}),e.jsx(d,{textAlign:"right",width:"100px",children:"Subtotal"})]})]}),e.jsxs(c,{className:"rows",children:[p.renglones!=null&&p.renglones.map((u,I)=>{const{id_articulo:ae,nombre_articulo:de,codigo_articulo:ce,descripcion_adicional:xe,precio:f,cantidad:b,bulto:he}=u,k=ye(b,he),je=f!=null?f*b:null,me=B(f,h),pe=B(je,h);return e.jsxs(o,{children:[e.jsx(s,{children:I+1}),e.jsx(s,{children:ve(de,ce,xe)}),e.jsx(s,{textAlign:"right",children:e.jsx(w,{moneda:"$",precio:me})}),e.jsxs(s,{textAlign:"center",children:[b,k!=null&&e.jsxs(e.Fragment,{children:[" [",k,"]"]})]}),e.jsx(s,{textAlign:"right",children:e.jsx(w,{moneda:"$",precio:pe})})]},`renglon-${v}_${ae}`)}),e.jsxs(o,{children:[e.jsxs(s,{colSpan:4,valign:"top",fontWeight:"bold",children:[e.jsx("p",{children:`TOTAL ${h>0?`CON BONIFICACIÓN DEL ${h}% `:""}`}),e.jsx("p",{children:le.toLocaleUpperCase()})]}),e.jsx(s,{textAlign:"right",valign:"bottom",fontWeight:"bold",children:e.jsx(w,{moneda:"$",precio:D})})]})]}),te&&e.jsxs(c,{className:"captions",children:[e.jsx(o,{children:e.jsxs(s,{colSpan:5,children:[e.jsx("br",{}),e.jsx("b",{children:"Leyendas"})]})}),y.map((u,I)=>e.jsx(o,{children:e.jsx(s,{colSpan:5,children:u.v})}))]}),ie&&e.jsxs(c,{className:"captions",children:[e.jsx(o,{children:e.jsxs(s,{colSpan:5,children:[e.jsx("br",{}),e.jsx("b",{children:"Mensaje interno"})]})}),e.jsx(o,{children:e.jsx(s,{colSpan:5,height:50,valign:"top",children:A})})]})]})}),e.jsx("div",{style:{borderTop:"2px solid #000"}})]},`pedido-${v}`)})]})},Xe=t=>{const{orders:r,fixedPageWidth:a}=t;if(r!=null&&Array.isArray(r)){const i=[];if(r.forEach(x=>{const n=Ie(()=>new _e(x),null);n!=null&&i.push(n)}),i.length>0)return e.jsx(ze,{orders:i,fixedPageWidth:a})}return e.jsx(Be,{error:Ce})},ze=t=>{const{orders:r,fixedPageWidth:a}=t,{state:i,retry:x}=ke(r);return i.map({loading:n=>e.jsx(Ue,{}),error:({error:n})=>e.jsx(Ee,{error:n,retry:x,cancelAndNavigateTo:Ne}),success:n=>(n.data.sort(qe),e.jsx(Me,{orders:n.data,fixedPageWidth:a}))})};function qe(t,r){const a=t.cabecera.numero_pedido,i=r.cabecera.numero_pedido;return a.localeCompare(i)}const O=1920,Ts=()=>[{charset:"utf-8"},{name:"viewport",content:`width=${O}, initial-scale=1.0`}];function As(){const[t]=He(),r=t.getAll("orderId");return e.jsx(Xe,{orders:r,fixedPageWidth:O})}export{As as default,Ts as meta};
